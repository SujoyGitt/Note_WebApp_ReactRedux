/*! For license information please see main.417bda4d.js.LICENSE.txt */
!function(){"use strict";var e={861:function(e,t,n){var r=n(456),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};function s(e){return r.isMemo(e)?o:u[e.$$typeof]||i}u[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},u[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,v=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(v){var i=d(n);i&&i!==v&&e(t,i,r)}var o=l(n);f&&(o=o.concat(f(n)));for(var u=s(t),p=s(n),y=0;y<o.length;++y){var m=o[y];if(!a[m]&&(!r||!r[m])&&(!p||!p[m])&&(!u||!u[m])){var g=h(n,m);try{c(t,m,g)}catch(k){}}}}return t}},229:function(e,t){var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,v=n?Symbol.for("react.suspense_list"):60120,p=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case u:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case y:case p:case s:return e;default:return t}}case i:return t}}}function _(e){return w(e)===f}t.AsyncMode=l,t.ConcurrentMode=f,t.ContextConsumer=c,t.ContextProvider=s,t.Element=r,t.ForwardRef=h,t.Fragment=a,t.Lazy=y,t.Memo=p,t.Portal=i,t.Profiler=u,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return _(e)||w(e)===l},t.isConcurrentMode=_,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===s},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===h},t.isFragment=function(e){return w(e)===a},t.isLazy=function(e){return w(e)===y},t.isMemo=function(e){return w(e)===p},t.isPortal=function(e){return w(e)===i},t.isProfiler=function(e){return w(e)===u},t.isStrictMode=function(e){return w(e)===o},t.isSuspense=function(e){return w(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===f||e===u||e===o||e===d||e===v||"object"===typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===p||e.$$typeof===s||e.$$typeof===c||e.$$typeof===h||e.$$typeof===g||e.$$typeof===k||e.$$typeof===b||e.$$typeof===m)},t.typeOf=w},456:function(e,t,n){e.exports=n(229)},534:function(e,t,n){var r=n(313),i=n(224);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},v={};function p(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new p(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new p(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new p(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new p(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new p(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new p(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new p(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new p(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new p(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(v,e)||!f.call(d,e)&&(h.test(e)?v[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new p(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new p(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,g);y[t]=new p(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new p(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new p("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new p(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=R&&e[R]||e["@@iterator"])?e:null}var M,F=Object.assign;function V(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var z=!1;function U(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?V(e):""}function B(e){switch(e.tag){case 5:return V(e.type);case 16:return V("Lazy");case 13:return V("Suspense");case 19:return V("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function j(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case _:return"Portal";case E:return"Profiler";case S:return"StrictMode";case N:return"Suspense";case D:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case I:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:j(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return j(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return j(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Q(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function H(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Z(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function X(e,t){Z(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&H(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function ae(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ve=["Webkit","ms","Moz","O"];function pe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ye(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=pe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){ve.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var me=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,xe=null,Se=null;function Ee(e){if(e=ki(e)){if("function"!==typeof _e)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),_e(e.stateNode,e.type,t))}}function Ie(e){xe?Se?Se.push(e):Se=[e]:xe=e}function Te(){if(xe){var e=xe,t=Se;if(Se=xe=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Ce(e,t){return e(t)}function Ne(){}var De=!1;function Ae(e,t,n){if(De)return e(t,n);De=!0;try{return Ce(e,t,n)}finally{De=!1,(null!==xe||null!==Se)&&(Ne(),Te())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Oe=!1;if(l)try{var Re={};Object.defineProperty(Re,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",Re,Re),window.removeEventListener("test",Re,Re)}catch(le){Oe=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,Ve=!1,ze=null,Ue={onError:function(e){Me=!0,Fe=e}};function Be(e,t,n,r,i,a,o,u,s){Me=!1,Fe=null,Le.apply(Ue,arguments)}function je(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(je(e)!==e)throw Error(a(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=je(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ke(i),e;if(o===r)return Ke(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Qe(e):null}function Qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Qe(e);if(null!==t)return t;e=e.sibling}return null}var We=i.unstable_scheduleCallback,He=i.unstable_cancelCallback,$e=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Ze=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Je=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function vt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function pt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function yt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,_t,xt,St,Et,It=!1,Tt=[],Ct=null,Nt=null,Dt=null,At=new Map,Pt=new Map,Ot=[],Rt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":Dt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=je(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void Et(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Vt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function zt(e,t,n){Vt(e)&&n.delete(t)}function Ut(){It=!1,null!==Ct&&Vt(Ct)&&(Ct=null),null!==Nt&&Vt(Nt)&&(Nt=null),null!==Dt&&Vt(Dt)&&(Dt=null),At.forEach(zt),Pt.forEach(zt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,It||(It=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ut)))}function jt(e){function t(t){return Bt(t,e)}if(0<Tt.length){Bt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Bt(Ct,e),null!==Nt&&Bt(Nt,e),null!==Dt&&Bt(Dt,e),At.forEach(t),Pt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Ft(n),null===n.blockedOn&&Ot.shift()}var qt=b.ReactCurrentBatchConfig,Kt=!0;function Gt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=1,Wt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Qt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=4,Wt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Wt(e,t,n,r){if(Kt){var i=$t(e,t,n,r);if(null===i)Kr(e,t,r,Ht,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return Dt=Mt(Dt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return At.set(a,Mt(At.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Pt.set(a,Mt(Pt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Rt.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=$t(e,t,n,r))&&Kr(e,t,r,Ht,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Ht=null;function $t(e,t,n,r){if(Ht=null,null!==(e=gi(e=we(r))))if(null===(t=je(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ht=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Je:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Zt=null,Xt=null,Jt=null;function en(){if(Jt)return Jt;var e,t,n=Xt,r=n.length,i="value"in Zt?Zt.value:Zt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Jt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=F({},cn,{view:0,detail:0}),hn=an(fn),dn=F({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),vn=an(dn),pn=an(F({},dn,{dataTransfer:0})),yn=an(F({},fn,{relatedTarget:0})),mn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),bn=an(F({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function En(){return Sn}var In=F({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(In),Cn=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(F({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Dn=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=an(An),On=[9,13,27,32],Rn=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!Rn||Ln&&8<Ln&&11>=Ln),Vn=String.fromCharCode(32),zn=!1;function Un(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var jn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Gn(e,t,n,r){Ie(r),0<(t=Qr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Qn=null,Wn=null;function Hn(e){Vr(e,0)}function $n(e){if(W(bi(e)))return e}function Yn(e,t){if("change"===e)return t}var Zn=!1;if(l){var Xn;if(l){var Jn="oninput"in document;if(!Jn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Jn="function"===typeof er.oninput}Xn=Jn}else Xn=!1;Zn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Qn&&(Qn.detachEvent("onpropertychange",nr),Wn=Qn=null)}function nr(e){if("value"===e.propertyName&&$n(Wn)){var t=[];Gn(t,Wn,e,we(e)),Ae(Hn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Wn=n,(Qn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Wn)}function ar(e,t){if("click"===e)return $n(t)}function or(e,t){if("input"===e||"change"===e)return $n(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=H();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=H((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function vr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var pr=l&&"documentMode"in document&&11>=document.documentMode,yr=null,mr=null,gr=null,kr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==yr||yr!==H(r)||("selectionStart"in(r=yr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Qr(mr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},xr={},Sr={};function Er(e){if(xr[e])return xr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return xr[e]=n[t];return e}l&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Ir=Er("animationend"),Tr=Er("animationiteration"),Cr=Er("animationstart"),Nr=Er("transitionend"),Dr=new Map,Ar="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Dr.set(e,t),s(t,[e])}for(var Or=0;Or<Ar.length;Or++){var Rr=Ar[Or];Pr(Rr.toLowerCase(),"on"+(Rr[0].toUpperCase()+Rr.slice(1)))}Pr(Ir,"onAnimationEnd"),Pr(Tr,"onAnimationIteration"),Pr(Cr,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(Be.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,Ve||(Ve=!0,ze=l)}}(r,t,void 0,e),e.currentTarget=null}function Vr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}}}if(Ve)throw e=ze,Ve=!1,ze=null,e}function zr(e,t){var n=t[pi];void 0===n&&(n=t[pi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Ur(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function jr(e){if(!e[Br]){e[Br]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Ur(t,!1,e),Ur(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,Ur("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Yt(t)){case 1:var i=Gt;break;case 4:i=Qt;break;default:i=Wt}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Ae((function(){var r=a,i=we(n),o=[];e:{var u=Dr.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=Tn;break;case"focusin":c="focus",s=yn;break;case"focusout":c="blur",s=yn;break;case"beforeblur":case"afterblur":s=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=vn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=pn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Nn;break;case Ir:case Tr:case Cr:s=mn;break;case Nr:s=Dn;break;case"scroll":s=hn;break;case"wheel":s=Pn;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Cn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,v=r;null!==v;){var p=(d=v).stateNode;if(5===d.tag&&null!==p&&(d=p,null!==h&&(null!=(p=Pe(v,h))&&l.push(Gr(v,p,d)))),f)break;v=v.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[vi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=je(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=vn,p="onMouseLeave",h="onMouseEnter",v="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,p="onPointerLeave",h="onPointerEnter",v="pointer"),f=null==s?u:bi(s),d=null==c?u:bi(c),(u=new l(p,v+"leave",s,n,i)).target=f,u.relatedTarget=d,p=null,gi(i)===r&&((l=new l(h,v+"enter",c,n,i)).target=d,l.relatedTarget=f,p=l),f=p,s&&c)e:{for(h=c,v=0,d=l=s;d;d=Wr(d))v++;for(d=0,p=h;p;p=Wr(p))d++;for(;0<v-d;)l=Wr(l),v--;for(;0<d-v;)h=Wr(h),d--;for(;v--;){if(l===h||null!==h&&l===h.alternate)break e;l=Wr(l),h=Wr(h)}l=null}else l=null;null!==s&&Hr(o,u,s,l,!1),null!==c&&null!==f&&Hr(o,f,c,l,!0)}if("select"===(s=(u=r?bi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var y=Yn;else if(Kn(u))if(Zn)y=or;else{y=ir;var m=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(y=ar);switch(y&&(y=y(e,r))?Gn(o,y,n,i):(m&&m(e,u,r),"focusout"===e&&(m=u._wrapperState)&&m.controlled&&"number"===u.type&&ee(u,"number",u.value)),m=r?bi(r):window,e){case"focusin":(Kn(m)||"true"===m.contentEditable)&&(yr=m,mr=r,gr=null);break;case"focusout":gr=mr=yr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,br(o,n,i);break;case"selectionchange":if(pr)break;case"keydown":case"keyup":br(o,n,i)}var g;if(Rn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else jn?Un(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(jn||"onCompositionStart"!==k?"onCompositionEnd"===k&&jn&&(g=en()):(Xt="value"in(Zt=i)?Zt.value:Zt.textContent,jn=!0)),0<(m=Qr(r,k)).length&&(k=new bn(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=Bn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(zn=!0,Vn);case"textInput":return(e=t.data)===Vn&&zn?null:e;default:return null}}(e,n):function(e,t){if(jn)return"compositionend"===e||!Rn&&Un(e,t)?(e=en(),Jt=Xt=Zt=null,jn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Qr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Vr(o,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Qr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Pe(e,n))&&r.unshift(Gr(e,a,i)),null!=(a=Pe(e,t))&&r.push(Gr(e,a,i))),e=e.return}return r}function Wr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Hr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Pe(n,a))&&o.unshift(Gr(n,s,u)):i||null!=(s=Pe(n,a))&&o.push(Gr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var $r=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Zr(e){return("string"===typeof e?e:""+e).replace($r,"\n").replace(Yr,"")}function Xr(e,t,n){if(t=Zr(t),Zr(e)!==t&&n)throw Error(a(425))}function Jr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void jt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);jt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,vi="__reactContainer$"+fi,pi="__reactEvents$"+fi,yi="__reactListeners$"+fi,mi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[vi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[vi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var _i=[],xi=-1;function Si(e){return{current:e}}function Ei(e){0>xi||(e.current=_i[xi],_i[xi]=null,xi--)}function Ii(e,t){xi++,_i[xi]=e.current,e.current=t}var Ti={},Ci=Si(Ti),Ni=Si(!1),Di=Ti;function Ai(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oi(){Ei(Ni),Ei(Ci)}function Ri(e,t,n){if(Ci.current!==Ti)throw Error(a(168));Ii(Ci,t),Ii(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Di=Ci.current,Ii(Ci,e),Ii(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Di),r.__reactInternalMemoizedMergedChildContext=e,Ei(Ni),Ei(Ci),Ii(Ci,e)):Ei(Ni),Ii(Ni,n)}var Vi=null,zi=!1,Ui=!1;function Bi(e){null===Vi?Vi=[e]:Vi.push(e)}function ji(){if(!Ui&&null!==Vi){Ui=!0;var e=0,t=kt;try{var n=Vi;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Vi=null,zi=!1}catch(i){throw null!==Vi&&(Vi=Vi.slice(e+1)),We(Je,ji),i}finally{kt=t,Ui=!1}}return null}var qi=[],Ki=0,Gi=null,Qi=0,Wi=[],Hi=0,$i=null,Yi=1,Zi="";function Xi(e,t){qi[Ki++]=Qi,qi[Ki++]=Gi,Gi=e,Qi=t}function Ji(e,t,n){Wi[Hi++]=Yi,Wi[Hi++]=Zi,Wi[Hi++]=$i,$i=e;var r=Yi;e=Zi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Yi=1<<32-ot(t)+i|n<<i|r,Zi=a+e}else Yi=1<<a|n<<i|r,Zi=e}function ea(e){null!==e.return&&(Xi(e,1),Ji(e,1,0))}function ta(e){for(;e===Gi;)Gi=qi[--Ki],qi[Ki]=null,Qi=qi[--Ki],qi[Ki]=null;for(;e===$i;)$i=Wi[--Hi],Wi[Hi]=null,Zi=Wi[--Hi],Wi[Hi]=null,Yi=Wi[--Hi],Wi[Hi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==$i?{id:Yi,overflow:Zi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function va(e){null===aa?aa=[e]:aa.push(e)}var pa=b.ReactCurrentBatchConfig;function ya(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ma=Si(null),ga=null,ka=null,ba=null;function wa(){ba=ka=ga=null}function _a(e){var t=ma.current;Ei(ma),e._currentValue=t}function xa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Sa(e,t){ga=e,ba=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bu=!0),e.firstContext=null)}function Ea(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Ia=null;function Ta(e){null===Ia?Ia=[e]:Ia.push(e)}function Ca(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ta(t)):(n.next=i.next,i.next=n),t.interleaved=n,Na(e,r)}function Na(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Da=!1;function Aa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Oa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ra(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Ns)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Na(e,n)}return null===(i=r.interleaved)?(t.next=t,Ta(r)):(t.next=i.next,i.next=t),r.interleaved=t,Na(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Da=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var v=e,p=u;switch(h=t,d=n,p.tag){case 1:if("function"===typeof(v=p.payload)){f=v.call(d,f,h);break e}f=v;break e;case 3:v.flags=-65537&v.flags|128;case 0:if(null===(h="function"===typeof(v=p.payload)?v.call(d,f,h):v)||void 0===h)break e;f=F({},f,h);break e;case 2:Da=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Fs|=o,e.lanes=o,e.memoizedState=f}}function Va(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var za=(new r.Component).refs;function Ua(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Ba={isMounted:function(e){return!!(e=e._reactInternals)&&je(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Oa(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Ra(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Oa(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Ra(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Oa(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Ra(e,i,r))&&(rc(t,e,r,n),La(t,e,r))}};function ja(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function qa(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Ea(a):(i=Pi(t)?Di:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ai(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Ba,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ka(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ba.enqueueReplaceState(t,t.state,null)}function Ga(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=za,Aa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ea(a):(a=Pi(t)?Di:Ci.current,i.context=Ai(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Ua(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Ba.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Qa(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===za&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Wa(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ha(e){return(0,e._init)(e._payload)}function $a(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Rc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Vc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===x?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===P&&Ha(a)===t.type)?((r=i(t,n.props)).ref=Qa(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=Qa(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=zc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Vc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=Qa(e,null,t),n.return=e,n;case _:return(t=zc(t,e.mode,n)).return=e,t;case P:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Mc(t,e.mode,n,null)).return=e,t;Wa(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case _:return n.key===i?l(e,t,n,r):null;case P:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);Wa(e,n)}return null}function v(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return v(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);Wa(t,r)}return null}function p(i,a,u,s){for(var c=null,l=null,f=a,p=a=0,y=null;null!==f&&p<u.length;p++){f.index>p?(y=f,f=null):y=f.sibling;var m=d(i,f,u[p],s);if(null===m){null===f&&(f=y);break}e&&f&&null===m.alternate&&t(i,f),a=o(m,a,p),null===l?c=m:l.sibling=m,l=m,f=y}if(p===u.length)return n(i,f),ia&&Xi(i,p),c;if(null===f){for(;p<u.length;p++)null!==(f=h(i,u[p],s))&&(a=o(f,a,p),null===l?c=f:l.sibling=f,l=f);return ia&&Xi(i,p),c}for(f=r(i,f);p<u.length;p++)null!==(y=v(f,i,p,u[p],s))&&(e&&null!==y.alternate&&f.delete(null===y.key?p:y.key),a=o(y,a,p),null===l?c=y:l.sibling=y,l=y);return e&&f.forEach((function(e){return t(i,e)})),ia&&Xi(i,p),c}function y(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,p=u,y=u=0,m=null,g=s.next();null!==p&&!g.done;y++,g=s.next()){p.index>y?(m=p,p=null):m=p.sibling;var k=d(i,p,g.value,c);if(null===k){null===p&&(p=m);break}e&&p&&null===k.alternate&&t(i,p),u=o(k,u,y),null===f?l=k:f.sibling=k,f=k,p=m}if(g.done)return n(i,p),ia&&Xi(i,y),l;if(null===p){for(;!g.done;y++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,y),null===f?l=g:f.sibling=g,f=g);return ia&&Xi(i,y),l}for(p=r(i,p);!g.done;y++,g=s.next())null!==(g=v(p,i,y,g.value,c))&&(e&&null!==g.alternate&&p.delete(null===g.key?y:g.key),u=o(g,u,y),null===f?l=g:f.sibling=g,f=g);return e&&p.forEach((function(e){return t(i,e)})),ia&&Xi(i,y),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===x){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&Ha(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Qa(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===x?((a=Mc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Lc(o.type,o.key,o.props,null,r.mode,s)).ref=Qa(r,a,o),s.return=r,r=s)}return u(r);case _:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=zc(o,r.mode,s)).return=r,r=a}return u(r);case P:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return p(r,a,o,s);if(L(o))return y(r,a,o,s);Wa(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Vc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var Ya=$a(!0),Za=$a(!1),Xa={},Ja=Si(Xa),eo=Si(Xa),to=Si(Xa);function no(e){if(e===Xa)throw Error(a(174));return e}function ro(e,t){switch(Ii(to,t),Ii(eo,e),Ii(Ja,Xa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei(Ja),Ii(Ja,t)}function io(){Ei(Ja),Ei(eo),Ei(to)}function ao(e){no(to.current);var t=no(Ja.current),n=se(t,e.type);t!==n&&(Ii(eo,e),Ii(Ja,n))}function oo(e){eo.current===e&&(Ei(Ja),Ei(eo))}var uo=Si(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=b.ReactCurrentDispatcher,ho=b.ReactCurrentBatchConfig,vo=0,po=null,yo=null,mo=null,go=!1,ko=!1,bo=0,wo=0;function _o(){throw Error(a(321))}function xo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function So(e,t,n,r,i,o){if(vo=o,po=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),ko){o=0;do{if(ko=!1,bo=0,25<=o)throw Error(a(301));o+=1,mo=yo=null,t.updateQueue=null,fo.current=cu,e=n(r,i)}while(ko)}if(fo.current=ou,t=null!==yo&&null!==yo.next,vo=0,mo=yo=po=null,go=!1,t)throw Error(a(300));return e}function Eo(){var e=0!==bo;return bo=0,e}function Io(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===mo?po.memoizedState=mo=e:mo=mo.next=e,mo}function To(){if(null===yo){var e=po.alternate;e=null!==e?e.memoizedState:null}else e=yo.next;var t=null===mo?po.memoizedState:mo.next;if(null!==t)mo=t,yo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(yo=e).memoizedState,baseState:yo.baseState,baseQueue:yo.baseQueue,queue:yo.queue,next:null},null===mo?po.memoizedState=mo=e:mo=mo.next=e}return mo}function Co(e,t){return"function"===typeof t?t(e):t}function No(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=yo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((vo&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,po.lanes|=f,Fs|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(bu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,po.lanes|=o,Fs|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Do(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(bu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ao(){}function Po(e,t){var n=po,r=To(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,bu=!0),r=r.queue,Ko(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==mo&&1&mo.memoizedState.tag){if(n.flags|=2048,zo(9,Ro.bind(null,n,r,i,t),void 0,null),null===Ds)throw Error(a(349));0!==(30&vo)||Oo(n,t,i)}return i}function Oo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=po.updateQueue)?(t={lastEffect:null,stores:null},po.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ro(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Fo(e){var t=Na(e,1);null!==t&&rc(t,e,1,-1)}function Vo(e){var t=Io();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,po,e),[t.memoizedState,e]}function zo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=po.updateQueue)?(t={lastEffect:null,stores:null},po.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Uo(){return To().memoizedState}function Bo(e,t,n,r){var i=Io();po.flags|=e,i.memoizedState=zo(1|t,n,void 0,void 0===r?null:r)}function jo(e,t,n,r){var i=To();r=void 0===r?null:r;var a=void 0;if(null!==yo){var o=yo.memoizedState;if(a=o.destroy,null!==r&&xo(r,o.deps))return void(i.memoizedState=zo(t,n,a,r))}po.flags|=e,i.memoizedState=zo(1|t,n,a,r)}function qo(e,t){return Bo(8390656,8,e,t)}function Ko(e,t){return jo(2048,8,e,t)}function Go(e,t){return jo(4,2,e,t)}function Qo(e,t){return jo(4,4,e,t)}function Wo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ho(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,jo(4,4,Wo.bind(null,t,e),n)}function $o(){}function Yo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Zo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xo(e,t,n){return 0===(21&vo)?(e.baseState&&(e.baseState=!1,bu=!0),e.memoizedState=n):(ur(n,t)||(n=pt(),po.lanes|=n,Fs|=n,e.baseState=!0),t)}function Jo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{kt=n,ho.transition=r}}function eu(){return To().memoizedState}function tu(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=Ca(e,t,n,r))){rc(n,e,r,tc()),au(n,t,r)}}function nu(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,Ta(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ca(e,t,i,r))&&(rc(n,e,r,i=tc()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===po||null!==t&&t===po}function iu(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ou={readContext:Ea,useCallback:_o,useContext:_o,useEffect:_o,useImperativeHandle:_o,useInsertionEffect:_o,useLayoutEffect:_o,useMemo:_o,useReducer:_o,useRef:_o,useState:_o,useDebugValue:_o,useDeferredValue:_o,useTransition:_o,useMutableSource:_o,useSyncExternalStore:_o,useId:_o,unstable_isNewReconciler:!1},uu={readContext:Ea,useCallback:function(e,t){return Io().memoizedState=[e,void 0===t?null:t],e},useContext:Ea,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4194308,4,Wo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Bo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bo(4,2,e,t)},useMemo:function(e,t){var n=Io();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Io();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,po,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Io().memoizedState=e},useState:Vo,useDebugValue:$o,useDeferredValue:function(e){return Io().memoizedState=e},useTransition:function(){var e=Vo(!1),t=e[0];return e=Jo.bind(null,e[1]),Io().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=po,i=Io();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Ds)throw Error(a(349));0!==(30&vo)||Oo(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,zo(9,Ro.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Io(),t=Ds.identifierPrefix;if(ia){var n=Zi;t=":"+t+"R"+(n=(Yi&~(1<<32-ot(Yi)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:Ea,useCallback:Yo,useContext:Ea,useEffect:Ko,useImperativeHandle:Ho,useInsertionEffect:Go,useLayoutEffect:Qo,useMemo:Zo,useReducer:No,useRef:Uo,useState:function(){return No(Co)},useDebugValue:$o,useDeferredValue:function(e){return Xo(To(),yo.memoizedState,e)},useTransition:function(){return[No(Co)[0],To().memoizedState]},useMutableSource:Ao,useSyncExternalStore:Po,useId:eu,unstable_isNewReconciler:!1},cu={readContext:Ea,useCallback:Yo,useContext:Ea,useEffect:Ko,useImperativeHandle:Ho,useInsertionEffect:Go,useLayoutEffect:Qo,useMemo:Zo,useReducer:Do,useRef:Uo,useState:function(){return Do(Co)},useDebugValue:$o,useDeferredValue:function(e){var t=To();return null===yo?t.memoizedState=e:Xo(t,yo.memoizedState,e)},useTransition:function(){return[Do(Co)[0],To().memoizedState]},useMutableSource:Ao,useSyncExternalStore:Po,useId:eu,unstable_isNewReconciler:!1};function lu(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function vu(e,t,n){(n=Oa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Gs||(Gs=!0,Qs=r),hu(0,t)},n}function pu(e,t,n){(n=Oa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hu(0,t),"function"!==typeof r&&(null===Ws?Ws=new Set([this]):Ws.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function yu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ic.bind(null,e,t,n),t.then(e,e))}function mu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Oa(-1,1)).tag=2,Ra(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ku=b.ReactCurrentOwner,bu=!1;function wu(e,t,n,r){t.child=null===e?Za(t,null,n,r):Ya(t,e.child,n,r)}function _u(e,t,n,r,i){n=n.render;var a=t.ref;return Sa(t,i),r=So(e,t,n,r,a,i),n=Eo(),null===e||bu?(ia&&n&&ea(t),t.flags|=1,wu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gu(e,t,i))}function xu(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Oc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Su(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Gu(e,t,i)}return t.flags|=1,(e=Rc(a,r)).ref=t.ref,e.return=t,t.child=e}function Su(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(bu=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Gu(e,t,i);0!==(131072&e.flags)&&(bu=!0)}}return Tu(e,t,n,r,i)}function Eu(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ii(Rs,Os),Os|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ii(Rs,Os),Os|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ii(Rs,Os),Os|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ii(Rs,Os),Os|=r;return wu(e,t,i,n),t.child}function Iu(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Tu(e,t,n,r,i){var a=Pi(n)?Di:Ci.current;return a=Ai(t,a),Sa(t,i),n=So(e,t,n,r,a,i),r=Eo(),null===e||bu?(ia&&r&&ea(t),t.flags|=1,wu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gu(e,t,i))}function Cu(e,t,n,r,i){if(Pi(n)){var a=!0;Mi(t)}else a=!1;if(Sa(t,i),null===t.stateNode)Ku(e,t),qa(t,n,r),Ga(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ea(c):c=Ai(t,c=Pi(n)?Di:Ci.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Ka(t,o,r,c),Da=!1;var h=t.memoizedState;o.state=h,Fa(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Ni.current||Da?("function"===typeof l&&(Ua(t,n,l,r),s=t.memoizedState),(u=Da||ja(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Pa(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:ya(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Ea(s):s=Ai(t,s=Pi(n)?Di:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&Ka(t,o,r,s),Da=!1,h=t.memoizedState,o.state=h,Fa(t,r,o,i);var v=t.memoizedState;u!==f||h!==v||Ni.current||Da?("function"===typeof d&&(Ua(t,n,d,r),v=t.memoizedState),(c=Da||ja(t,n,c,r,h,v,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,v,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,v,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),o.props=r,o.state=v,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Nu(e,t,n,r,a,i)}function Nu(e,t,n,r,i,a){Iu(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Gu(e,t,a);r=t.stateNode,ku.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ya(t,e.child,null,a),t.child=Ya(t,null,u,a)):wu(e,t,u,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Du(e){var t=e.stateNode;t.pendingContext?Ri(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ri(0,t.context,!1),ro(e,t.containerInfo)}function Au(e,t,n,r,i){return da(),va(i),t.flags|=256,wu(e,t,n,r),t.child}var Pu,Ou,Ru,Lu,Mu={dehydrated:null,treeContext:null,retryLane:0};function Fu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Vu(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ii(uo,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=Fc(s,i,0,null),e=Mc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Fu(n),t.memoizedState=Mu,e):zu(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,Uu(e,t,u,r=fu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Fc({mode:"visible",children:r.children},i,0,null),(o=Mc(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Ya(t,e.child,null,u),t.child.memoizedState=Fu(u),t.memoizedState=Mu,o);if(0===(1&t.mode))return Uu(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,Uu(e,t,u,r=fu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),bu||s){if(null!==(r=Ds)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Na(e,i),rc(r,e,i,-1))}return yc(),Uu(e,t,u,r=fu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Wi[Hi++]=Yi,Wi[Hi++]=Zi,Wi[Hi++]=$i,Yi=e.id,Zi=e.overflow,$i=t),t=zu(t,r.children),t.flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Rc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=Rc(r,u):(u=Mc(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?Fu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Mu,i}return e=(u=e.child).sibling,i=Rc(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function zu(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Uu(e,t,n,r){return null!==r&&va(r),Ya(t,e.child,null,n),(e=zu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xa(e.return,t,n)}function ju(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function qu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(wu(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bu(e,n,t);else if(19===e.tag)Bu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ii(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ju(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ju(t,!0,n,null,a);break;case"together":ju(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ku(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Gu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fs|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Rc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Rc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Qu(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Wu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Hu(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wu(t),null;case 1:case 17:return Pi(t.type)&&Oi(),Wu(t),null;case 3:return r=t.stateNode,io(),Ei(Ni),Ei(Ci),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(uc(aa),aa=null))),Ou(e,t),Wu(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Ru(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Wu(t),null}if(e=no(Ja.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":zr("cancel",r),zr("close",r);break;case"iframe":case"object":case"embed":zr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)zr(Lr[i],r);break;case"source":zr("error",r);break;case"img":case"image":case"link":zr("error",r),zr("load",r);break;case"details":zr("toggle",r);break;case"input":Y(r,o),zr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},zr("invalid",r);break;case"textarea":ie(r,o),zr("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&zr("scroll",r)}switch(n){case"input":Q(r),J(r,o,!0);break;case"textarea":Q(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Jr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hi]=t,e[di]=r,Pu(e,t,!1,!1),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":zr("cancel",e),zr("close",e),i=r;break;case"iframe":case"object":case"embed":zr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)zr(Lr[i],e);i=r;break;case"source":zr("error",e),i=r;break;case"img":case"image":case"link":zr("error",e),zr("load",e),i=r;break;case"details":zr("toggle",e),i=r;break;case"input":Y(e,r),i=$(e,r),zr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),zr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),zr("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?ye(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&zr("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":Q(e),J(e,r,!1);break;case"textarea":Q(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Jr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wu(t),null;case 6:if(e&&null!=t.stateNode)Lu(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Ja.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Wu(t),null;case 13:if(Ei(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wu(t),o=!1}else null!==aa&&(uc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Ls&&(Ls=3):yc())),null!==t.updateQueue&&(t.flags|=4),Wu(t),null);case 4:return io(),Ou(e,t),null===e&&jr(t.stateNode.containerInfo),Wu(t),null;case 10:return _a(t.type._context),Wu(t),null;case 19:if(Ei(uo),null===(o=t.memoizedState))return Wu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Qu(o,!1);else{if(0!==Ls||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Qu(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ii(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&Ze()>qs&&(t.flags|=128,r=!0,Qu(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Qu(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Wu(t),null}else 2*Ze()-o.renderingStartTime>qs&&1073741824!==n&&(t.flags|=128,r=!0,Qu(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ze(),t.sibling=null,n=uo.current,Ii(uo,r?1&n|2:1&n),t):(Wu(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Os)&&(Wu(t),6&t.subtreeFlags&&(t.flags|=8192)):Wu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function $u(e,t){switch(ta(t),t.tag){case 1:return Pi(t.type)&&Oi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ei(Ni),Ei(Ci),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ei(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(uo),null;case 4:return io(),null;case 10:return _a(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Pu=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ou=function(){},Ru=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Ja.current);var a,o=null;switch(n){case"input":i=$(e,i),r=$(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Jr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&zr("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Lu=function(e,t,n,r){n!==r&&(t.flags|=4)};var Yu=!1,Zu=!1,Xu="function"===typeof WeakSet?WeakSet:Set,Ju=null;function es(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ec(e,t,r)}else n.current=null}function ts(e,t,n){try{n()}catch(r){Ec(e,t,r)}}var ns=!1;function rs(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&ts(t,n,a)}i=i.next}while(i!==r)}}function is(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function as(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function os(e){var t=e.alternate;null!==t&&(e.alternate=null,os(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[pi],delete t[yi],delete t[mi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function us(e){return 5===e.tag||3===e.tag||4===e.tag}function ss(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||us(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Jr));else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}function ls(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ls(e,t,n),e=e.sibling;null!==e;)ls(e,t,n),e=e.sibling}var fs=null,hs=!1;function ds(e,t,n){for(n=n.child;null!==n;)vs(e,t,n),n=n.sibling}function vs(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:Zu||es(n,t);case 6:var r=fs,i=hs;fs=null,ds(e,t,n),hs=i,null!==(fs=r)&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):fs.removeChild(n.stateNode));break;case 18:null!==fs&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),jt(e)):si(fs,n.stateNode));break;case 4:r=fs,i=hs,fs=n.stateNode.containerInfo,hs=!0,ds(e,t,n),fs=r,hs=i;break;case 0:case 11:case 14:case 15:if(!Zu&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&ts(n,t,o),i=i.next}while(i!==r)}ds(e,t,n);break;case 1:if(!Zu&&(es(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Ec(n,t,u)}ds(e,t,n);break;case 21:ds(e,t,n);break;case 22:1&n.mode?(Zu=(r=Zu)||null!==n.memoizedState,ds(e,t,n),Zu=r):ds(e,t,n);break;default:ds(e,t,n)}}function ps(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xu),t.forEach((function(t){var r=Nc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ys(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:fs=s.stateNode,hs=!1;break e;case 3:case 4:fs=s.stateNode.containerInfo,hs=!0;break e}s=s.return}if(null===fs)throw Error(a(160));vs(o,u,i),fs=null,hs=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Ec(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ms(t,e),t=t.sibling}function ms(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ys(t,e),gs(e),4&r){try{rs(3,e,e.return),is(3,e)}catch(y){Ec(e,e.return,y)}try{rs(5,e,e.return)}catch(y){Ec(e,e.return,y)}}break;case 1:ys(t,e),gs(e),512&r&&null!==n&&es(n,n.return);break;case 5:if(ys(t,e),gs(e),512&r&&null!==n&&es(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(y){Ec(e,e.return,y)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&Z(i,o),ke(s,u);var l=ke(s,o);for(u=0;u<c.length;u+=2){var f=c[u],h=c[u+1];"style"===f?ye(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(s){case"input":X(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var v=o.value;null!=v?ne(i,!!o.multiple,v,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(y){Ec(e,e.return,y)}}break;case 6:if(ys(t,e),gs(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(y){Ec(e,e.return,y)}}break;case 3:if(ys(t,e),gs(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{jt(t.containerInfo)}catch(y){Ec(e,e.return,y)}break;case 4:default:ys(t,e),gs(e);break;case 13:ys(t,e),gs(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(js=Ze())),4&r&&ps(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?(Zu=(l=Zu)||f,ys(t,e),Zu=l):ys(t,e),gs(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Ju=e,f=e.child;null!==f;){for(h=Ju=f;null!==Ju;){switch(v=(d=Ju).child,d.tag){case 0:case 11:case 14:case 15:rs(4,d,d.return);break;case 1:es(d,d.return);var p=d.stateNode;if("function"===typeof p.componentWillUnmount){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(y){Ec(r,n,y)}}break;case 5:es(d,d.return);break;case 22:if(null!==d.memoizedState){_s(h);continue}}null!==v?(v.return=d,Ju=v):_s(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=h.stateNode,u=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=pe("display",u))}catch(y){Ec(e,e.return,y)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(y){Ec(e,e.return,y)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ys(t,e),gs(e),4&r&&ps(e);case 21:}}function gs(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(us(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),ls(e,ss(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cs(e,ss(e),o);break;default:throw Error(a(161))}}catch(u){Ec(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ks(e,t,n){Ju=e,bs(e,t,n)}function bs(e,t,n){for(var r=0!==(1&e.mode);null!==Ju;){var i=Ju,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Yu;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||Zu;u=Yu;var c=Zu;if(Yu=o,(Zu=s)&&!c)for(Ju=i;null!==Ju;)s=(o=Ju).child,22===o.tag&&null!==o.memoizedState?xs(i):null!==s?(s.return=o,Ju=s):xs(i);for(;null!==a;)Ju=a,bs(a,t,n),a=a.sibling;Ju=i,Yu=u,Zu=c}ws(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Ju=a):ws(e)}}function ws(e){for(;null!==Ju;){var t=Ju;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Zu||is(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Zu)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ya(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Va(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Va(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&jt(h)}}}break;default:throw Error(a(163))}Zu||512&t.flags&&as(t)}catch(d){Ec(t,t.return,d)}}if(t===e){Ju=null;break}if(null!==(n=t.sibling)){n.return=t.return,Ju=n;break}Ju=t.return}}function _s(e){for(;null!==Ju;){var t=Ju;if(t===e){Ju=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Ju=n;break}Ju=t.return}}function xs(e){for(;null!==Ju;){var t=Ju;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{is(4,t)}catch(s){Ec(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){Ec(t,i,s)}}var a=t.return;try{as(t)}catch(s){Ec(t,a,s)}break;case 5:var o=t.return;try{as(t)}catch(s){Ec(t,o,s)}}}catch(s){Ec(t,t.return,s)}if(t===e){Ju=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Ju=u;break}Ju=t.return}}var Ss,Es=Math.ceil,Is=b.ReactCurrentDispatcher,Ts=b.ReactCurrentOwner,Cs=b.ReactCurrentBatchConfig,Ns=0,Ds=null,As=null,Ps=0,Os=0,Rs=Si(0),Ls=0,Ms=null,Fs=0,Vs=0,zs=0,Us=null,Bs=null,js=0,qs=1/0,Ks=null,Gs=!1,Qs=null,Ws=null,Hs=!1,$s=null,Ys=0,Zs=0,Xs=null,Js=-1,ec=0;function tc(){return 0!==(6&Ns)?Ze():-1!==Js?Js:Js=Ze()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Ns)&&0!==Ps?Ps&-Ps:null!==pa.transition?(0===ec&&(ec=pt()),ec):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function rc(e,t,n,r){if(50<Zs)throw Zs=0,Xs=null,Error(a(185));mt(e,n,r),0!==(2&Ns)&&e===Ds||(e===Ds&&(0===(2&Ns)&&(Vs|=n),4===Ls&&sc(e,Ps)),ic(e,r),1===n&&0===Ns&&0===(1&t.mode)&&(qs=Ze()+500,zi&&ji()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===Ds?Ps:0);if(0===r)null!==n&&He(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&He(n),1===t)0===e.tag?function(e){zi=!0,Bi(e)}(cc.bind(null,e)):Bi(cc.bind(null,e)),oi((function(){0===(6&Ns)&&ji()})),n=null;else{switch(bt(r)){case 1:n=Je;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Dc(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Js=-1,ec=0,0!==(6&Ns))throw Error(a(327));var n=e.callbackNode;if(xc()&&e.callbackNode!==n)return null;var r=ht(e,e===Ds?Ps:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mc(e,r);else{t=r;var i=Ns;Ns|=2;var o=pc();for(Ds===e&&Ps===t||(Ks=null,qs=Ze()+500,dc(e,t));;)try{kc();break}catch(s){vc(e,s)}wa(),Is.current=o,Ns=i,null!==As?t=0:(Ds=null,Ps=0,t=Ls)}if(0!==t){if(2===t&&(0!==(i=vt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Ms,dc(e,0),sc(e,r),ic(e,Ze()),n;if(6===t)sc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=mc(e,r))&&(0!==(o=vt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Ms,dc(e,0),sc(e,r),ic(e,Ze()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:_c(e,Bs,Ks);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=js+500-Ze())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(_c.bind(null,e,Bs,Ks),t);break}_c(e,Bs,Ks);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Ze()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Es(r/1960))-r)){e.timeoutHandle=ri(_c.bind(null,e,Bs,Ks),r);break}_c(e,Bs,Ks);break;default:throw Error(a(329))}}}return ic(e,Ze()),e.callbackNode===n?ac.bind(null,e):null}function oc(e,t){var n=Us;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=Bs,Bs=n,null!==t&&uc(t)),e}function uc(e){null===Bs?Bs=e:Bs.push.apply(Bs,e)}function sc(e,t){for(t&=~zs,t&=~Vs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Ns))throw Error(a(327));xc();var t=ht(e,0);if(0===(1&t))return ic(e,Ze()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var r=vt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ms,dc(e,0),sc(e,t),ic(e,Ze()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_c(e,Bs,Ks),ic(e,Ze()),null}function lc(e,t){var n=Ns;Ns|=1;try{return e(t)}finally{0===(Ns=n)&&(qs=Ze()+500,zi&&ji())}}function fc(e){null!==$s&&0===$s.tag&&0===(6&Ns)&&xc();var t=Ns;Ns|=1;var n=Cs.transition,r=kt;try{if(Cs.transition=null,kt=1,e)return e()}finally{kt=r,Cs.transition=n,0===(6&(Ns=t))&&ji()}}function hc(){Os=Rs.current,Ei(Rs)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==As)for(n=As.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oi();break;case 3:io(),Ei(Ni),Ei(Ci),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ei(uo);break;case 10:_a(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Ds=e,As=e=Rc(e.current,null),Ps=Os=t,Ls=0,Ms=null,zs=Vs=Fs=0,Bs=Us=null,null!==Ia){for(t=0;t<Ia.length;t++)if(null!==(r=(n=Ia[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ia=null}return e}function vc(e,t){for(;;){var n=As;try{if(wa(),fo.current=ou,go){for(var r=po.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(vo=0,mo=yo=po=null,ko=!1,bo=0,Ts.current=null,null===n||null===n.return){Ls=1,Ms=t,As=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Ps,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var v=mu(u);if(null!==v){v.flags&=-257,gu(v,u,s,0,t),1&v.mode&&yu(o,l,t),c=l;var p=(t=v).updateQueue;if(null===p){var y=new Set;y.add(c),t.updateQueue=y}else p.add(c);break e}if(0===(1&t)){yu(o,l,t),yc();break e}c=Error(a(426))}else if(ia&&1&s.mode){var m=mu(u);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),gu(m,u,s,0,t),va(lu(c,s));break e}}o=c=lu(c,s),4!==Ls&&(Ls=2),null===Us?Us=[o]:Us.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vu(0,c,t));break e;case 1:s=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Ws||!Ws.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,pu(o,s,t));break e}}o=o.return}while(null!==o)}wc(n)}catch(b){t=b,As===n&&null!==n&&(As=n=n.return);continue}break}}function pc(){var e=Is.current;return Is.current=ou,null===e?ou:e}function yc(){0!==Ls&&3!==Ls&&2!==Ls||(Ls=4),null===Ds||0===(268435455&Fs)&&0===(268435455&Vs)||sc(Ds,Ps)}function mc(e,t){var n=Ns;Ns|=2;var r=pc();for(Ds===e&&Ps===t||(Ks=null,dc(e,t));;)try{gc();break}catch(i){vc(e,i)}if(wa(),Ns=n,Is.current=r,null!==As)throw Error(a(261));return Ds=null,Ps=0,Ls}function gc(){for(;null!==As;)bc(As)}function kc(){for(;null!==As&&!$e();)bc(As)}function bc(e){var t=Ss(e.alternate,e,Os);e.memoizedProps=e.pendingProps,null===t?wc(e):As=t,Ts.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Hu(n,t,Os)))return void(As=n)}else{if(null!==(n=$u(n,t)))return n.flags&=32767,void(As=n);if(null===e)return Ls=6,void(As=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(As=t);As=t=e}while(null!==t);0===Ls&&(Ls=5)}function _c(e,t,n){var r=kt,i=Cs.transition;try{Cs.transition=null,kt=1,function(e,t,n,r){do{xc()}while(null!==$s);if(0!==(6&Ns))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Ds&&(As=Ds=null,Ps=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Hs||(Hs=!0,Dc(tt,(function(){return xc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cs.transition,Cs.transition=null;var u=kt;kt=1;var s=Ns;Ns|=4,Ts.current=null,function(e,t){if(ei=Kt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var v;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(v=h.firstChild);)d=h,h=v;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(v=h.nextSibling))break;d=(h=d).parentNode}h=v}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Kt=!1,Ju=t;null!==Ju;)if(e=(t=Ju).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ju=e;else for(;null!==Ju;){t=Ju;try{var p=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var y=p.memoizedProps,m=p.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:ya(t.type,y),m);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(w){Ec(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Ju=e;break}Ju=t.return}p=ns,ns=!1}(e,n),ms(n,e),vr(ti),Kt=!!ei,ti=ei=null,e.current=n,ks(n,e,i),Ye(),Ns=s,kt=u,Cs.transition=o}else e.current=n;if(Hs&&(Hs=!1,$s=e,Ys=i),o=e.pendingLanes,0===o&&(Ws=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Ze()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Gs)throw Gs=!1,e=Qs,Qs=null,e;0!==(1&Ys)&&0!==e.tag&&xc(),o=e.pendingLanes,0!==(1&o)?e===Xs?Zs++:(Zs=0,Xs=e):Zs=0,ji()}(e,t,n,r)}finally{Cs.transition=i,kt=r}return null}function xc(){if(null!==$s){var e=bt(Ys),t=Cs.transition,n=kt;try{if(Cs.transition=null,kt=16>e?16:e,null===$s)var r=!1;else{if(e=$s,$s=null,Ys=0,0!==(6&Ns))throw Error(a(331));var i=Ns;for(Ns|=4,Ju=e.current;null!==Ju;){var o=Ju,u=o.child;if(0!==(16&Ju.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Ju=l;null!==Ju;){var f=Ju;switch(f.tag){case 0:case 11:case 15:rs(8,f,o)}var h=f.child;if(null!==h)h.return=f,Ju=h;else for(;null!==Ju;){var d=(f=Ju).sibling,v=f.return;if(os(f),f===l){Ju=null;break}if(null!==d){d.return=v,Ju=d;break}Ju=v}}}var p=o.alternate;if(null!==p){var y=p.child;if(null!==y){p.child=null;do{var m=y.sibling;y.sibling=null,y=m}while(null!==y)}}Ju=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Ju=u;else e:for(;null!==Ju;){if(0!==(2048&(o=Ju).flags))switch(o.tag){case 0:case 11:case 15:rs(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Ju=g;break e}Ju=o.return}}var k=e.current;for(Ju=k;null!==Ju;){var b=(u=Ju).child;if(0!==(2064&u.subtreeFlags)&&null!==b)b.return=u,Ju=b;else e:for(u=k;null!==Ju;){if(0!==(2048&(s=Ju).flags))try{switch(s.tag){case 0:case 11:case 15:is(9,s)}}catch(_){Ec(s,s.return,_)}if(s===u){Ju=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,Ju=w;break e}Ju=s.return}}if(Ns=i,ji(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{kt=n,Cs.transition=t}}return!1}function Sc(e,t,n){e=Ra(e,t=vu(0,t=lu(n,t),1),1),t=tc(),null!==e&&(mt(e,1,t),ic(e,t))}function Ec(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ws||!Ws.has(r))){t=Ra(t,e=pu(t,e=lu(n,e),1),1),e=tc(),null!==t&&(mt(t,1,e),ic(t,e));break}}t=t.return}}function Ic(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Ds===e&&(Ps&n)===n&&(4===Ls||3===Ls&&(130023424&Ps)===Ps&&500>Ze()-js?dc(e,0):zs|=n),ic(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=tc();null!==(e=Na(e,t))&&(mt(e,t,n),ic(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function Nc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Tc(e,n)}function Dc(e,t){return We(e,t)}function Ac(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,r){return new Ac(e,t,n,r)}function Oc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Oc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case x:return Mc(n.children,i,o,t);case S:u=8,i|=8;break;case E:return(e=Pc(12,n,t,2|i)).elementType=E,e.lanes=o,e;case N:return(e=Pc(13,n,t,i)).elementType=N,e.lanes=o,e;case D:return(e=Pc(19,n,t,i)).elementType=D,e.lanes=o,e;case O:return Fc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case I:u=10;break e;case T:u=9;break e;case C:u=11;break e;case A:u=14;break e;case P:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Pc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Mc(e,t,n,r){return(e=Pc(7,e,r,t)).lanes=n,e}function Fc(e,t,n,r){return(e=Pc(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Vc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function zc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yt(0),this.expirationTimes=yt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,r,i,a,o,u,s){return e=new Uc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Pc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Aa(a),e}function jc(e){if(!e)return Ti;e:{if(je(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Pi(n))return Li(e,n,t)}return t}function qc(e,t,n,r,i,a,o,u,s){return(e=Bc(n,r,!0,e,0,a,0,u,s)).context=jc(null),n=e.current,(a=Oa(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Ra(n,a,i),e.current.lanes=i,mt(e,i,r),ic(e,r),e}function Kc(e,t,n,r){var i=t.current,a=tc(),o=nc(i);return n=jc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Oa(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Ra(i,t,o))&&(rc(e,i,o,a),La(e,i,o)),o}function Gc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Qc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wc(e,t){Qc(e,t),(e=e.alternate)&&Qc(e,t)}Ss=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)bu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bu=!1,function(e,t,n){switch(t.tag){case 3:Du(t),da();break;case 5:ao(t);break;case 1:Pi(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ii(ma,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ii(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Vu(e,t,n):(Ii(uo,1&uo.current),null!==(e=Gu(e,t,n))?e.sibling:null);Ii(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ii(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Eu(e,t,n)}return Gu(e,t,n)}(e,t,n);bu=0!==(131072&e.flags)}else bu=!1,ia&&0!==(1048576&t.flags)&&Ji(t,Qi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ku(e,t),e=t.pendingProps;var i=Ai(t,Ci.current);Sa(t,n),i=So(null,t,r,e,i,n);var o=Eo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pi(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Aa(t),i.updater=Ba,t.stateNode=i,i._reactInternals=t,Ga(t,r,e,n),t=Nu(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),wu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ku(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Oc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===A)return 14}return 2}(r),e=ya(r,e),i){case 0:t=Tu(null,t,r,e,n);break e;case 1:t=Cu(null,t,r,e,n);break e;case 11:t=_u(null,t,r,e,n);break e;case 14:t=xu(null,t,r,ya(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Tu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 3:e:{if(Du(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Pa(e,t),Fa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Au(e,t,r,n,i=lu(Error(a(423)),t));break e}if(r!==i){t=Au(e,t,r,n,i=lu(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Za(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Gu(e,t,n);break e}wu(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Iu(e,t),wu(e,t,u,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Vu(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ya(t,null,r,n):wu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_u(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 7:return wu(e,t,t.pendingProps,n),t.child;case 8:case 12:return wu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Ii(ma,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ni.current){t=Gu(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Oa(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),xa(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),xa(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}wu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Sa(t,n),r=r(i=Ea(i)),t.flags|=1,wu(e,t,r,n),t.child;case 14:return i=ya(r=t.type,t.pendingProps),xu(e,t,r,i=ya(r.type,i),n);case 15:return Su(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ya(r,i),Ku(e,t),t.tag=1,Pi(r)?(e=!0,Mi(t)):e=!1,Sa(t,n),qa(t,r,i),Ga(t,r,i,n),Nu(null,t,r,!0,e,n);case 19:return qu(e,t,n);case 22:return Eu(e,t,n)}throw Error(a(156,t.tag))};var Hc="function"===typeof reportError?reportError:function(e){console.error(e)};function $c(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Gc(o);u.call(e)}}Kc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Gc(o);a.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",Jc);return e._reactRootContainer=o,e[vi]=o.current,jr(8===e.nodeType?e.parentNode:e),fc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Gc(s);u.call(e)}}var s=Bc(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=s,e[vi]=s.current,jr(8===e.nodeType?e.parentNode:e),fc((function(){Kc(t,s,n,r)})),s}(n,t,e,i,r);return Gc(o)}Yc.prototype.render=$c.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Kc(e,t,null,null)},Yc.prototype.unmount=$c.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fc((function(){Kc(null,e,null,null)})),t[vi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),ic(t,Ze()),0===(6&Ns)&&(qs=Ze()+500,ji()))}break;case 13:fc((function(){var t=Na(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Wc(e,1)}},_t=function(e){if(13===e.tag){var t=Na(e,134217728);if(null!==t)rc(t,e,134217728,tc());Wc(e,134217728)}},xt=function(e){if(13===e.tag){var t=nc(e),n=Na(e,t);if(null!==n)rc(n,e,t,tc());Wc(e,t)}},St=function(){return kt},Et=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},_e=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));W(r),X(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=lc,Ne=fc;var tl={usingClientEntryPoint:!1,Events:[ki,bi,wi,Ie,Te,lc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Zc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Zc(e))throw Error(a(299));var n=!1,r="",i=Hc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Bc(e,1,!1,null,0,n,0,r,i),e[vi]=t.current,jr(8===e.nodeType?e.parentNode:e),new $c(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return fc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Zc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Hc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,u),e[vi]=t.current,jr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(a(40));return!!e._reactRootContainer&&(fc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[vi]=null}))})),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},739:function(e,t,n){var r=n(168);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},168:function(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(534)},624:function(e,t){var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.server_context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),v=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.for("react.offscreen");function m(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case a:case u:case o:case h:case d:return e;default:switch(e=e&&e.$$typeof){case l:case c:case f:case p:case v:case s:return e;default:return t}}case i:return t}}}n=Symbol.for("react.module.reference"),t.isContextConsumer=function(e){return m(e)===c}},214:function(e,t,n){e.exports=n(624)},918:function(e,t,n){var r=n(313),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.jsx=c,t.jsxs=c},306:function(e,t){var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,y={};function m(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||v}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||v}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var b=k.prototype=new g;b.constructor=k,p(b,m.prototype),b.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,x={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,i)&&!S.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:x.current}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,w(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(I(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=N(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=N(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function D(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},O={transition:null},R={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:O,ReactCurrentOwner:x};t.Children={map:D,forEach:function(e,t,n){D(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return D(e,(function(){t++})),t},toArray:function(e){return D(e,(function(e){return e}))||[]},only:function(e){if(!I(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=p({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)_.call(t,c)&&!S.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.2.0"},313:function(e,t,n){e.exports=n(306)},417:function(e,t,n){e.exports=n(918)},350:function(e,t,n){var r=n(38).qC;t.Uo="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?r:r.apply(null,arguments)},"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__},38:function(e,t,n){n.d(t,{MT:function(){return c},UY:function(){return l},md:function(){return h},qC:function(){return f}});var r=n(413);function i(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var a="function"===typeof Symbol&&Symbol.observable||"@@observable",o=function(){return Math.random().toString(36).substring(7).split("").join(".")},u={INIT:"@@redux/INIT"+o(),REPLACE:"@@redux/REPLACE"+o(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+o()}};function s(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function c(e,t,n){var r;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(i(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(i(1));return n(c)(e,t)}if("function"!==typeof e)throw new Error(i(2));var o=e,l=t,f=[],h=f,d=!1;function v(){h===f&&(h=f.slice())}function p(){if(d)throw new Error(i(3));return l}function y(e){if("function"!==typeof e)throw new Error(i(4));if(d)throw new Error(i(5));var t=!0;return v(),h.push(e),function(){if(t){if(d)throw new Error(i(6));t=!1,v();var n=h.indexOf(e);h.splice(n,1),f=null}}}function m(e){if(!s(e))throw new Error(i(7));if("undefined"===typeof e.type)throw new Error(i(8));if(d)throw new Error(i(9));try{d=!0,l=o(l,e)}finally{d=!1}for(var t=f=h,n=0;n<t.length;n++){(0,t[n])()}return e}return m({type:u.INIT}),(r={dispatch:m,subscribe:y,getState:p,replaceReducer:function(e){if("function"!==typeof e)throw new Error(i(10));o=e,m({type:u.REPLACE})}})[a]=function(){var e,t=y;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(i(11));function n(){e.next&&e.next(p())}return n(),{unsubscribe:t(n)}}})[a]=function(){return this},e},r}function l(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var a=t[r];0,"function"===typeof e[a]&&(n[a]=e[a])}var o,s=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if("undefined"===typeof n(void 0,{type:u.INIT}))throw new Error(i(12));if("undefined"===typeof n(void 0,{type:u.PROBE_UNKNOWN_ACTION()}))throw new Error(i(13))}))}(n)}catch(c){o=c}return function(e,t){if(void 0===e&&(e={}),o)throw o;for(var r=!1,a={},u=0;u<s.length;u++){var c=s[u],l=n[c],f=e[c],h=l(f,t);if("undefined"===typeof h){t&&t.type;throw new Error(i(14))}a[c]=h,r=r||h!==f}return(r=r||s.length!==Object.keys(e).length)?a:e}}function f(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function h(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),a=function(){throw new Error(i(15))},o={getState:n.getState,dispatch:function(){return a.apply(void 0,arguments)}},u=t.map((function(e){return e(o)}));return a=f.apply(void 0,u)(n.dispatch),(0,r.Z)((0,r.Z)({},n),{},{dispatch:a})}}}},95:function(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,v=!1,p=!1,y=!1,m="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(y=!1,b(e),!p)if(null!==r(c))p=!0,O(_);else{var t=r(l);null!==t&&R(w,t.startTime-e)}}function _(e,n){p=!1,y&&(y=!1,g(I),I=-1),v=!0;var a=d;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!N());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&R(w,f.startTime-n),s=!1}return s}finally{h=null,d=a,v=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,S=!1,E=null,I=-1,T=5,C=-1;function N(){return!(t.unstable_now()-C<T)}function D(){if(null!==E){var e=t.unstable_now();C=e;var n=!0;try{n=E(!0,e)}finally{n?x():(S=!1,E=null)}}else S=!1}if("function"===typeof k)x=function(){k(D)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,P=A.port2;A.port1.onmessage=D,x=function(){P.postMessage(null)}}else x=function(){m(D,0)};function O(e){E=e,S||(S=!0,x())}function R(e,n){I=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){p||v||(p=!0,O(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(y?(g(I),I=-1):y=!0,R(w,a-o))):(e.sortIndex=u,n(c,e),p||v||(p=!0,O(_))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},224:function(e,t,n){e.exports=n(95)},531:function(e,t,n){var r=n(313);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},a=r.useState,o=r.useEffect,u=r.useLayoutEffect,s=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(r){return!0}}var l="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=a({inst:{value:n,getSnapshot:t}}),i=r[0].inst,l=r[1];return u((function(){i.value=n,i.getSnapshot=t,c(i)&&l({inst:i})}),[e,n,t]),o((function(){return c(i)&&l({inst:i}),e((function(){c(i)&&l({inst:i})}))}),[e]),s(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:l},778:function(e,t,n){var r=n(313),i=n(239);var a="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},o=i.useSyncExternalStore,u=r.useRef,s=r.useEffect,c=r.useMemo,l=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var f=u(null);if(null===f.current){var h={hasValue:!1,value:null};f.current=h}else h=f.current;f=c((function(){function e(e){if(!s){if(s=!0,o=e,e=r(e),void 0!==i&&h.hasValue){var t=h.value;if(i(t,e))return u=t}return u=e}if(t=u,a(o,e))return t;var n=r(e);return void 0!==i&&i(t,n)?t:(o=e,u=n)}var o,u,s=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,n,r,i]);var d=o(e,f[0],f[1]);return s((function(){h.hasValue=!0,h.value=d}),[d]),l(d),d}},239:function(e,t,n){e.exports=n(531)},58:function(e,t,n){e.exports=n(778)},942:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(142);function i(e,t,n){return(t=(0,r.Z)(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},413:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(942);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},142:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(2);function i(e){var t=function(e,t){if("object"!==(0,r.Z)(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==(0,r.Z)(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===(0,r.Z)(t)?t:String(t)}},2:function(e,t,n){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{Z:function(){return r}})}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e={};n.r(e),n.d(e,{FirebaseError:function(){return Ae},SDK_VERSION:function(){return Mt},_DEFAULT_ENTRY_NAME:function(){return xt},_addComponent:function(){return Tt},_addOrOverwriteComponent:function(){return Ct},_apps:function(){return Et},_clearComponents:function(){return Pt},_components:function(){return It},_getProvider:function(){return Dt},_registerComponent:function(){return Nt},_removeServiceInstance:function(){return At},deleteApp:function(){return Ut},getApp:function(){return Vt},getApps:function(){return zt},initializeApp:function(){return Ft},onLog:function(){return qt},registerVersion:function(){return jt},setLogLevel:function(){return Kt}});var t=n(313),r=n(739),i=n(239),a=n(58),o=n(168);var u=function(e){e()},s=function(){return u},c=n(942),l=Symbol.for("react-redux-context-".concat(t.version)),f=globalThis;var h=new Proxy({},new Proxy({},{get:function(e,n){var r=function(){var e=f[l];return e||(e=(0,t.createContext)(null),f[l]=e),e}();return function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];return Reflect[n].apply(Reflect,[r].concat(i))}}}));function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h;return function(){return(0,t.useContext)(e)}}var v=d(),p=function(){throw new Error("uSES not initialized!")},y=p,m=function(e,t){return e===t};function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,n=e===h?v:d(e);return function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i="function"===typeof r?{equalityFn:r}:r,a=i.equalityFn,o=void 0===a?m:a,u=i.stabilityCheck,s=void 0===u?void 0:u;i.noopCheck;var l=n(),f=l.store,h=l.subscription,d=l.getServerState,v=l.stabilityCheck,p=(l.noopCheck,(0,t.useRef)(!0),(0,t.useCallback)((0,c.Z)({},e.name,(function(t){return e(t)}))[e.name],[e,v,s])),g=y(h.addNestedSub,f.getState,d||f.getState,p,o);return(0,t.useDebugValue)(g),g}}var k=g();function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function w(e,t){if(e){if("string"===typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,u=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(l){c=!0,i=l}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return u}}(e,t)||w(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e){return function(e){if(Array.isArray(e))return b(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||w(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(){return S=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},S.apply(this,arguments)}function E(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var I=n(861),T=n.n(I),C=n(214),N=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function D(e,t,n,r,i){var a,o,u,s,c,l=i.areStatesEqual,f=i.areOwnPropsEqual,h=i.areStatePropsEqual,d=!1;function v(i,d){var v=!f(d,o),p=!l(i,a,d,o);return a=i,o=d,v&&p?(u=e(a,o),t.dependsOnOwnProps&&(s=t(r,o)),c=n(u,s,o)):v?(e.dependsOnOwnProps&&(u=e(a,o)),t.dependsOnOwnProps&&(s=t(r,o)),c=n(u,s,o)):p?function(){var t=e(a,o),r=!h(t,u);return u=t,r&&(c=n(u,s,o)),c}():c}return function(i,l){return d?v(i,l):(u=e(a=i,o=l),s=t(r,o),c=n(u,s,o),d=!0,c)}}function A(e){return function(t){var n=e(t);function r(){return n}return r.dependsOnOwnProps=!1,r}}function P(e){return e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function O(e,t){return function(t,n){n.displayName;var r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e,void 0)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=P(e);var i=r(t,n);return"function"===typeof i&&(r.mapToProps=i,r.dependsOnOwnProps=P(i),i=r(t,n)),i},r}}function R(e,t){return function(n,r){throw new Error("Invalid value of type ".concat(typeof e," for ").concat(t," argument when connecting component ").concat(r.wrappedComponentName,"."))}}function L(e,t,n){return S({},n,e,t)}var M={notify:function(){},get:function(){return[]}};function F(e,t){var n,r=M;function i(){o.onStateChange&&o.onStateChange()}function a(){n||(n=t?t.addNestedSub(i):e.subscribe(i),r=function(){var e=s(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())}var o={addNestedSub:function(e){return a(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(n)},trySubscribe:a,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=M)},getListeners:function(){return r}};return o}var V=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement)?t.useLayoutEffect:t.useEffect;function z(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}function U(e,t){if(z(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(t,n[i])||!z(e[n[i]],t[n[i]]))return!1;return!0}var B=["reactReduxForwardedRef"],j=p,q=[null,null];function K(e,t,n,r,i,a){e.current=r,n.current=!1,i.current&&(i.current=null,a())}function G(e,t){return e===t}var Q=function(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(i.pure,i.areStatesEqual),o=void 0===a?G:a,u=i.areOwnPropsEqual,s=void 0===u?U:u,c=i.areStatePropsEqual,l=void 0===c?U:c,f=i.areMergedPropsEqual,d=void 0===f?U:f,v=i.forwardRef,p=void 0!==v&&v,y=i.context,m=void 0===y?h:y,g=function(e){return e?"function"===typeof e?O(e):R(e,"mapStateToProps"):A((function(){return{}}))}(e),k=function(e){return e&&"object"===typeof e?A((function(t){return function(e,t){var n={},r=function(){var r=e[i];"function"===typeof r&&(n[i]=function(){return t(r.apply(void 0,arguments))})};for(var i in e)r();return n}(e,t)})):e?"function"===typeof e?O(e):R(e,"mapDispatchToProps"):A((function(e){return{dispatch:e}}))}(n),b=function(e){return e?"function"===typeof e?function(e){return function(t,n){n.displayName;var r,i=n.areMergedPropsEqual,a=!1;return function(t,n,o){var u=e(t,n,o);return a?i(u,r)||(r=u):(a=!0,r=u),r}}}(e):R(e,"mergeProps"):function(){return L}}(r),w=Boolean(e);return function(e){var n=e.displayName||e.name||"Component",r="Connect(".concat(n,")"),i={shouldHandleStateChanges:w,displayName:r,wrappedComponentName:n,WrappedComponent:e,initMapStateToProps:g,initMapDispatchToProps:k,initMergeProps:b,areStatesEqual:o,areStatePropsEqual:l,areOwnPropsEqual:s,areMergedPropsEqual:d};function a(n){var r=(0,t.useMemo)((function(){var e=n.reactReduxForwardedRef,t=E(n,B);return[n.context,e,t]}),[n]),a=_(r,3),o=a[0],u=a[1],s=a[2],c=(0,t.useMemo)((function(){return o&&o.Consumer&&(0,C.isContextConsumer)(t.createElement(o.Consumer,null))?o:m}),[o,m]),l=(0,t.useContext)(c),f=Boolean(n.store)&&Boolean(n.store.getState)&&Boolean(n.store.dispatch),h=Boolean(l)&&Boolean(l.store);var d=f?n.store:l.store,v=h?l.getServerState:d.getState,p=(0,t.useMemo)((function(){return function(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,i=t.initMergeProps,a=E(t,N);return D(n(e,a),r(e,a),i(e,a),e,a)}(d.dispatch,i)}),[d]),y=(0,t.useMemo)((function(){if(!w)return q;var e=F(d,f?void 0:l.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]}),[d,f,l]),g=_(y,2),k=g[0],b=g[1],I=(0,t.useMemo)((function(){return f?l:S({},l,{subscription:k})}),[f,l,k]),T=(0,t.useRef)(),A=(0,t.useRef)(s),P=(0,t.useRef)(),O=(0,t.useRef)(!1),R=((0,t.useRef)(!1),(0,t.useRef)(!1)),L=(0,t.useRef)();V((function(){return R.current=!0,function(){R.current=!1}}),[]);var M,z,U,G,Q=(0,t.useMemo)((function(){return function(){return P.current&&s===A.current?P.current:p(d.getState(),s)}}),[d,s]),W=(0,t.useMemo)((function(){return function(e){return k?function(e,t,n,r,i,a,o,u,s,c,l){if(!e)return function(){};var f=!1,h=null,d=function(){if(!f&&u.current){var e,n,d=t.getState();try{e=r(d,i.current)}catch(v){n=v,h=v}n||(h=null),e===a.current?o.current||c():(a.current=e,s.current=e,o.current=!0,l())}};return n.onStateChange=d,n.trySubscribe(),d(),function(){if(f=!0,n.tryUnsubscribe(),n.onStateChange=null,h)throw h}}(w,d,k,p,A,T,O,R,P,b,e):function(){}}}),[k]);M=K,z=[A,T,O,s,P,b],V((function(){return M.apply(void 0,x(z))}),U);try{G=j(W,Q,v?function(){return p(v(),s)}:Q)}catch($){throw L.current&&($.message+="\nThe error may be correlated with this previous error:\n".concat(L.current.stack,"\n\n")),$}V((function(){L.current=void 0,P.current=void 0,T.current=G}));var H=(0,t.useMemo)((function(){return t.createElement(e,S({},G,{ref:u}))}),[u,e,G]);return(0,t.useMemo)((function(){return w?t.createElement(c.Provider,{value:I},H):H}),[c,H,I])}var u=t.memo(a);if(u.WrappedComponent=e,u.displayName=a.displayName=r,p){var c=t.forwardRef((function(e,n){return t.createElement(u,S({},e,{reactReduxForwardedRef:n}))}));return c.displayName=r,c.WrappedComponent=e,T()(c,e)}return T()(u,e)}};var W=function(e){var n=e.store,r=e.context,i=e.children,a=e.serverState,o=e.stabilityCheck,u=void 0===o?"once":o,s=e.noopCheck,c=void 0===s?"once":s,l=(0,t.useMemo)((function(){var e=F(n);return{store:n,subscription:e,getServerState:a?function(){return a}:void 0,stabilityCheck:u,noopCheck:c}}),[n,a,u,c]),f=(0,t.useMemo)((function(){return n.getState()}),[n]);V((function(){var e=l.subscription;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),f!==n.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=void 0}}),[l,f]);var d=r||h;return t.createElement(d.Provider,{value:l},i)};function H(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=e===h?v:d(e);return function(){return t().store}}var $=H();function Y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=e===h?$:H(e);return function(){return t().dispatch}}var Z,X,J=Y();Z=a.useSyncExternalStoreWithSelector,y=Z,function(e){j=e}(i.useSyncExternalStore),X=o.unstable_batchedUpdates,u=X;var ee=n(2);function te(){te=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(C){s=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var a=t&&t.prototype instanceof h?t:h,o=Object.create(a.prototype),u=new E(i||[]);return r(o,"_invoke",{value:w(e,n,u)}),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=c;var f={};function h(){}function d(){}function v(){}var p={};s(p,a,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(I([])));m&&m!==t&&n.call(m,a)&&(p=m);var g=v.prototype=h.prototype=Object.create(p);function k(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function i(r,a,o,u){var s=l(e[r],e,a);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==(0,ee.Z)(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,o,u)}),(function(e){i("throw",e,o,u)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,u)}))}u(s.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return T()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=_(o,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===f)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function _(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=l(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,f;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function I(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:T}}function T(){return{value:void 0,done:!0}}return d.prototype=v,r(g,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:d,configurable:!0}),d.displayName=s(v,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,s(e,u,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},k(b.prototype),s(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new b(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},k(g),s(g,u,"Generator"),s(g,a,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=I,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function ne(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function re(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){ne(a,r,i,o,u,"next",e)}function u(e){ne(a,r,i,o,u,"throw",e)}o(void 0)}))}}function ie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var ae=n(142);function oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(0,ae.Z)(r.key),r)}}function ue(e,t,n){return t&&oe(e.prototype,t),n&&oe(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function se(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=w(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function ce(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function le(e,t){return le=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},le(e,t)}function fe(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&le(e,t)}function he(e){return he=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},he(e)}function de(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function ve(e){var t=de();return function(){var n,r=he(e);if(t){var i=he(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===(0,ee.Z)(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ce(e)}(this,n)}}function pe(e,t,n){return pe=de()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&le(i,n.prototype),i},pe.apply(null,arguments)}function ye(e){var t="function"===typeof Map?new Map:void 0;return ye=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return pe(e,arguments,he(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),le(n,e)},ye(e)}var me=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},ge={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(me(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw new ke;var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},ke=function(e){fe(n,e);var t=ve(n);function n(){var e;return ie(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return ue(n)}(ye(Error)),be=function(e){return function(e){var t=me(e);return ge.encodeByteArray(t,!0)}(e).replace(/\./g,"")},we=function(e){try{return ge.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function _e(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=_e(e[n],t[n]));return e}var xe=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},Se=function(){try{return xe()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"/Note_WebApp_ReactRedux",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&we(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},Ee=function(){var e;return null===(e=Se())||void 0===e?void 0:e.config},Ie=function(){function e(){var t=this;ie(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return ue(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function Te(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Ce(){return!function(){var e,t=null===(e=Se())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ne(){try{return"object"===typeof indexedDB}catch(e){return!1}}var De="FirebaseError",Ae=function(e){fe(n,e);var t=ve(n);function n(e,r,i){var a;return ie(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name=De,Object.setPrototypeOf(ce(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(ce(a),Pe.prototype.create),a}return ue(n)}(ye(Error)),Pe=function(){function e(t,n,r){ie(this,e),this.service=t,this.serviceName=n,this.errors=r}return ue(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Oe,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Ae(n,a,t)}}]),e}();var Oe=/\{\$([^}]+)}/g;function Re(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Le(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(Me(u)&&Me(s)){if(!Le(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function Me(e){return null!==e&&"object"===typeof e}function Fe(e,t){var n=new Ve(e,t);return n.subscribe.bind(n)}var Ve=function(){function e(t,n){var r=this;ie(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return ue(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=se(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=ze),void 0===r.error&&(r.error=ze),void 0===r.complete&&(r.complete=ze);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function ze(){}function Ue(e){return e&&e._delegate?e._delegate:e}var Be=function(){function e(t,n,r){ie(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return ue(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),je="[DEFAULT]",qe=function(){function e(t,n){ie(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return ue(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new Ie;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:je})}catch(s){}var t,n=se(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=_(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=re(te().mark((function e(){var t;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(x(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),x(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=se(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=_(i.value,2),s=u[0],c=u[1];r===this.normalizeInstanceIdentifier(s)&&c.resolve(a)}}catch(l){o.e(l)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=se(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(o){}}}catch(u){i.e(u)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===je?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(o){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je;return this.component?this.component.multipleInstances?e:je:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var Ke,Ge,Qe=function(){function e(t){ie(this,e),this.name=t,this.providers=new Map}return ue(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new qe(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),We=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Ge||(Ge={}));var He={debug:Ge.DEBUG,verbose:Ge.VERBOSE,info:Ge.INFO,warn:Ge.WARN,error:Ge.ERROR,silent:Ge.SILENT},$e=Ge.INFO,Ye=(Ke={},(0,c.Z)(Ke,Ge.DEBUG,"log"),(0,c.Z)(Ke,Ge.VERBOSE,"log"),(0,c.Z)(Ke,Ge.INFO,"info"),(0,c.Z)(Ke,Ge.WARN,"warn"),(0,c.Z)(Ke,Ge.ERROR,"error"),Ke),Ze=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=Ye[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},Xe=function(){function e(t){ie(this,e),this.name=t,this._logLevel=$e,this._logHandler=Ze,this._userLogHandler=null,We.push(this)}return ue(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Ge))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?He[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ge.DEBUG].concat(t)),this._logHandler.apply(this,[this,Ge.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ge.VERBOSE].concat(t)),this._logHandler.apply(this,[this,Ge.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ge.INFO].concat(t)),this._logHandler.apply(this,[this,Ge.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ge.WARN].concat(t)),this._logHandler.apply(this,[this,Ge.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ge.ERROR].concat(t)),this._logHandler.apply(this,[this,Ge.ERROR].concat(t))}}]),e}();var Je,et,tt=n(413),nt=function(e,t){return t.some((function(t){return e instanceof t}))};var rt=new WeakMap,it=new WeakMap,at=new WeakMap,ot=new WeakMap,ut=new WeakMap;var st={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return it.get(e);if("objectStoreNames"===t)return e.objectStoreNames||at.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ft(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function ct(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(et||(et=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(ht(this),n),ft(rt.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ft(e.apply(ht(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[ht(this),t].concat(r));return at.set(a,t.sort?t.sort():[t]),ft(a)}}function lt(e){return"function"===typeof e?ct(e):(e instanceof IDBTransaction&&function(e){if(!it.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));it.set(e,t)}}(e),nt(e,Je||(Je=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,st):e)}function ft(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(ft(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&rt.set(t,e)})).catch((function(){})),ut.set(t,e),t}(e);if(ot.has(e))return ot.get(e);var t=lt(e);return t!==e&&(ot.set(e,t),ut.set(t,e)),t}var ht=function(e){return ut.get(e)};var dt,vt,pt=["get","getKey","getAll","getAllKeys","count"],yt=["put","add","delete","clear"],mt=new Map;function gt(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(mt.get(t))return mt.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=yt.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||pt.includes(n))){var a=function(){var e=re(te().mark((function e(t){var a,o,u,s,c,l,f=arguments;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return mt.set(t,a),a}}}st=function(e){return(0,tt.Z)((0,tt.Z)({},e),{},{get:function(t,n,r){return gt(t,n)||e.get(t,n,r)},has:function(t,n){return!!gt(t,n)||e.has(t,n)}})}(st);var kt=function(){function e(t){ie(this,e),this.container=t}return ue(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var bt="@firebase/app",wt="0.9.14",_t=new Xe("@firebase/app"),xt="[DEFAULT]",St=(dt={},(0,c.Z)(dt,bt,"fire-core"),(0,c.Z)(dt,"@firebase/app-compat","fire-core-compat"),(0,c.Z)(dt,"@firebase/analytics","fire-analytics"),(0,c.Z)(dt,"@firebase/analytics-compat","fire-analytics-compat"),(0,c.Z)(dt,"@firebase/app-check","fire-app-check"),(0,c.Z)(dt,"@firebase/app-check-compat","fire-app-check-compat"),(0,c.Z)(dt,"@firebase/auth","fire-auth"),(0,c.Z)(dt,"@firebase/auth-compat","fire-auth-compat"),(0,c.Z)(dt,"@firebase/database","fire-rtdb"),(0,c.Z)(dt,"@firebase/database-compat","fire-rtdb-compat"),(0,c.Z)(dt,"@firebase/functions","fire-fn"),(0,c.Z)(dt,"@firebase/functions-compat","fire-fn-compat"),(0,c.Z)(dt,"@firebase/installations","fire-iid"),(0,c.Z)(dt,"@firebase/installations-compat","fire-iid-compat"),(0,c.Z)(dt,"@firebase/messaging","fire-fcm"),(0,c.Z)(dt,"@firebase/messaging-compat","fire-fcm-compat"),(0,c.Z)(dt,"@firebase/performance","fire-perf"),(0,c.Z)(dt,"@firebase/performance-compat","fire-perf-compat"),(0,c.Z)(dt,"@firebase/remote-config","fire-rc"),(0,c.Z)(dt,"@firebase/remote-config-compat","fire-rc-compat"),(0,c.Z)(dt,"@firebase/storage","fire-gcs"),(0,c.Z)(dt,"@firebase/storage-compat","fire-gcs-compat"),(0,c.Z)(dt,"@firebase/firestore","fire-fst"),(0,c.Z)(dt,"@firebase/firestore-compat","fire-fst-compat"),(0,c.Z)(dt,"fire-js","fire-js"),(0,c.Z)(dt,"firebase","fire-js-all"),dt),Et=new Map,It=new Map;function Tt(e,t){try{e.container.addComponent(t)}catch(n){_t.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Ct(e,t){e.container.addOrOverwriteComponent(t)}function Nt(e){var t=e.name;if(It.has(t))return _t.debug("There were multiple attempts to register component ".concat(t,".")),!1;It.set(t,e);var n,r=se(Et.values());try{for(r.s();!(n=r.n()).done;){Tt(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Dt(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function At(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:xt;Dt(e,t).clearInstance(n)}function Pt(){It.clear()}var Ot=(vt={},(0,c.Z)(vt,"no-app","No Firebase App '{$appName}' has been created - call initializeApp() first"),(0,c.Z)(vt,"bad-app-name","Illegal App name: '{$appName}"),(0,c.Z)(vt,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),(0,c.Z)(vt,"app-deleted","Firebase App named '{$appName}' already deleted"),(0,c.Z)(vt,"no-options","Need to provide options, when not being deployed to hosting via source."),(0,c.Z)(vt,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),(0,c.Z)(vt,"invalid-log-argument","First argument to `onLog` must be null or a function."),(0,c.Z)(vt,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),(0,c.Z)(vt,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),(0,c.Z)(vt,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),(0,c.Z)(vt,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),vt),Rt=new Pe("app","Firebase",Ot),Lt=function(){function e(t,n,r){var i=this;ie(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Be("app",(function(){return i}),"PUBLIC"))}return ue(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Rt.create("app-deleted",{appName:this._name})}}]),e}(),Mt="10.0.0";function Ft(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:xt,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Rt.create("bad-app-name",{appName:String(i)});if(n||(n=Ee()),!n)throw Rt.create("no-options");var a=Et.get(i);if(a){if(Le(n,a.options)&&Le(r,a.config))return a;throw Rt.create("duplicate-app",{appName:i})}var o,u=new Qe(i),s=se(It.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new Lt(n,r,u);return Et.set(i,l),l}function Vt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xt,t=Et.get(e);if(!t&&e===xt&&Ee())return Ft();if(!t)throw Rt.create("no-app",{appName:e});return t}function zt(){return Array.from(Et.values())}function Ut(e){return Bt.apply(this,arguments)}function Bt(){return(Bt=re(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Et.has(n)){e.next=6;break}return Et.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jt(e,t,n){var r,i=null!==(r=St[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void _t.warn(u.join(" "))}Nt(new Be("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function qt(e,t){if(null!==e&&"function"!==typeof e)throw Rt.create("invalid-log-argument");!function(e,t){var n,r=se(We);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=He[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:Ge[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function Kt(e){var t;t=e,We.forEach((function(e){e.setLogLevel(t)}))}var Gt="firebase-heartbeat-database",Qt=1,Wt="firebase-heartbeat-store",Ht=null;function $t(){return Ht||(Ht=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=ft(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(ft(u.result),e.oldVersion,e.newVersion,ft(u.transaction),e)})),r&&u.addEventListener("blocked",(function(e){return r(e.oldVersion,e.newVersion,e)})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(e){return a(e.oldVersion,e.newVersion,e)}))})).catch((function(){})),s}(Gt,Qt,{upgrade:function(e,t){if(0===t)e.createObjectStore(Wt)}}).catch((function(e){throw Rt.create("idb-open",{originalErrorMessage:e.message})}))),Ht}function Yt(e){return Zt.apply(this,arguments)}function Zt(){return Zt=re(te().mark((function e(t){var n,r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$t();case 3:return n=e.sent,e.next=6,n.transaction(Wt).objectStore(Wt).get(en(t));case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),e.t0 instanceof Ae?_t.warn(e.t0.message):(i=Rt.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),_t.warn(i.message));case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),Zt.apply(this,arguments)}function Xt(e,t){return Jt.apply(this,arguments)}function Jt(){return Jt=re(te().mark((function e(t,n){var r,i,a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$t();case 3:return r=e.sent,i=r.transaction(Wt,"readwrite"),a=i.objectStore(Wt),e.next=8,a.put(n,en(t));case 8:return e.next=10,i.done;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0 instanceof Ae?_t.warn(e.t0.message):(o=Rt.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),_t.warn(o.message));case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),Jt.apply(this,arguments)}function en(e){return"".concat(e.name,"!").concat(e.options.appId)}var tn=1024,nn=function(){function e(t){var n=this;ie(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new sn(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return ue(e,[{key:"triggerHeartbeat",value:function(){var e=re(te().mark((function e(){var t,n,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=rn(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=re(te().mark((function e(){var t,n,r,i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=rn(),n=an(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=be(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function rn(){return(new Date).toISOString().substring(0,10)}function an(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tn,r=[],i=e.slice(),a=se(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),cn(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),cn(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){if("break"===o())break}}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var on,un,sn=function(){function e(t){ie(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return ue(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=re(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ne()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=re(te().mark((function e(){var t;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,Yt(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=re(te().mark((function e(t){var n,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Xt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=re(te().mark((function e(t){var n,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Xt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(x(r.heartbeats),x(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function cn(e){return be(JSON.stringify({version:2,heartbeats:e})).length}on="",Nt(new Be("platform-logger",(function(e){return new kt(e)}),"PRIVATE")),Nt(new Be("heartbeat",(function(e){return new nn(e)}),"PRIVATE")),jt(bt,wt,on),jt(bt,wt,"esm2017"),jt("fire-js","");var ln=function(){function e(t,n){var r=this;ie(this,e),this._delegate=t,this.firebase=n,Tt(t,new Be("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return ue(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),Ut(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xt;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xt;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Tt(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Ct(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),fn=(un={},(0,c.Z)(un,"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),(0,c.Z)(un,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),un),hn=new Pe("app-compat","Firebase",fn);var dn=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=Ft(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Re(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:jt,setLogLevel:Kt,onLog:qt,apps:null,SDK_VERSION:Mt,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(Nt(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw hn.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&_e(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Re(n,e=e||xt))throw hn.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(ln);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){_e(n,e)},createSubscribe:Fe,ErrorFactory:Pe,deepExtend:_e}),n}(),vn=new Xe("@firebase/app-compat"),pn="@firebase/app-compat",yn="0.2.14";if("object"===typeof self&&self.self===self&&void 0!==self.firebase){vn.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var mn=self.firebase.SDK_VERSION;mn&&mn.indexOf("LITE")>=0&&vn.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var gn=dn;!function(e){jt(pn,yn,e)}();function kn(){return kn="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=he(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},kn.apply(this,arguments)}gn.registerVersion("firebase","10.0.0","app-compat");var bn,wn="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},_n={},xn=xn||{},Sn=wn||self;function En(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function In(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Tn="closure_uid_"+(1e9*Math.random()>>>0),Cn=0;function Nn(e,t,n){return e.call.apply(e.bind,arguments)}function Dn(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function An(e,t,n){return(An=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Nn:Dn).apply(null,arguments)}function Pn(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function On(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Rn(){this.s=this.s,this.o=this.o}Rn.prototype.s=!1,Rn.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,Tn)&&e[Tn]||(e[Tn]=++Cn))},Rn.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Ln=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Mn(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Fn(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(En(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function Vn(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Vn.prototype.h=function(){this.defaultPrevented=!0};var zn=function(){if(!Sn.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Sn.addEventListener("test",(function(){}),t),Sn.removeEventListener("test",(function(){}),t)}catch(n){}return e}();function Un(e){return/^[\s\xa0]*$/.test(e)}function Bn(){var e=Sn.navigator;return e&&(e=e.userAgent)?e:""}function jn(e){return-1!=Bn().indexOf(e)}function qn(e){return qn[" "](e),e}qn[" "]=function(){};var Kn,Gn,Qn=jn("Opera"),Wn=jn("Trident")||jn("MSIE"),Hn=jn("Edge"),$n=Hn||Wn,Yn=jn("Gecko")&&!(-1!=Bn().toLowerCase().indexOf("webkit")&&!jn("Edge"))&&!(jn("Trident")||jn("MSIE"))&&!jn("Edge"),Zn=-1!=Bn().toLowerCase().indexOf("webkit")&&!jn("Edge");function Xn(){var e=Sn.document;return e?e.documentMode:void 0}e:{var Jn="",er=function(){var e=Bn();return Yn?/rv:([^\);]+)(\)|;)/.exec(e):Hn?/Edge\/([\d\.]+)/.exec(e):Wn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Zn?/WebKit\/(\S+)/.exec(e):Qn?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(er&&(Jn=er?er[1]:""),Wn){var tr=Xn();if(null!=tr&&tr>parseFloat(Jn)){Kn=String(tr);break e}}Kn=Jn}if(Sn.document&&Wn){var nr=Xn();Gn=nr||(parseInt(Kn,10)||void 0)}else Gn=void 0;var rr=Gn;function ir(e,t){if(Vn.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Yn){e:{try{qn(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:ar[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&ir.$.h.call(this)}}On(ir,Vn);var ar={2:"touch",3:"pen",4:"mouse"};ir.prototype.h=function(){ir.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var or="closure_listenable_"+(1e6*Math.random()|0),ur=0;function sr(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++ur,this.fa=this.ia=!1}function cr(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function lr(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function fr(e){var t={};for(var n in e)t[n]=e[n];return t}var hr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function dr(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<hr.length;a++)n=hr[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function vr(e){this.src=e,this.g={},this.h=0}function pr(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Ln(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(cr(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function yr(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.fa&&a.listener==t&&a.capture==!!n&&a.la==r)return i}return-1}vr.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=yr(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new sr(t,this.src,a,!!r,i)).ia=n,e.push(t)),t};var mr="closure_lm_"+(1e6*Math.random()|0),gr={};function kr(e,t,n,r,i){if(r&&r.once)return wr(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)kr(e,t[a],n,r,i);return null}return n=Cr(n),e&&e[or]?e.O(t,n,In(r)?!!r.capture:!!r,i):br(e,t,n,!1,r,i)}function br(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=In(i)?!!i.capture:!!i,u=Ir(e);if(u||(e[mr]=u=new vr(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Er;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)zn||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Sr(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function wr(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)wr(e,t[a],n,r,i);return null}return n=Cr(n),e&&e[or]?e.P(t,n,In(r)?!!r.capture:!!r,i):br(e,t,n,!0,r,i)}function _r(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)_r(e,t[a],n,r,i);else r=In(r)?!!r.capture:!!r,n=Cr(n),e&&e[or]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=yr(a=e.g[t],n,r,i))&&(cr(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Ir(e))&&(t=e.g[t.toString()],e=-1,t&&(e=yr(t,n,r,i)),(n=-1<e?t[e]:null)&&xr(n))}function xr(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[or])pr(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Sr(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Ir(t))?(pr(n,e),0==n.h&&(n.src=null,t[mr]=null)):cr(e)}}}function Sr(e){return e in gr?gr[e]:gr[e]="on"+e}function Er(e,t){if(e.fa)e=!0;else{t=new ir(t,this);var n=e.listener,r=e.la||e.src;e.ia&&xr(e),e=n.call(r,t)}return e}function Ir(e){return(e=e[mr])instanceof vr?e:null}var Tr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Cr(e){return"function"===typeof e?e:(e[Tr]||(e[Tr]=function(t){return e.handleEvent(t)}),e[Tr])}function Nr(){Rn.call(this),this.i=new vr(this),this.S=this,this.J=null}function Dr(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new Vn(t,e);else if(t instanceof Vn)t.target=t.target||e;else{var i=t;dr(t=new Vn(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Ar(o,r,!0,t)&&i}if(i=Ar(o=t.g=e,r,!0,t)&&i,i=Ar(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Ar(o=t.g=n[a],r,!1,t)&&i}function Ar(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.fa&&o.capture==n){var u=o.listener,s=o.la||o.src;o.ia&&pr(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}On(Nr,Rn),Nr.prototype[or]=!0,Nr.prototype.removeEventListener=function(e,t,n,r){_r(this,e,t,n,r)},Nr.prototype.N=function(){if(Nr.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)cr(n[r]);delete t.g[e],t.h--}}this.J=null},Nr.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Nr.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Pr=Sn.JSON.stringify,Or=function(){function e(t,n){ie(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return ue(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}();function Rr(){var e=jr,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Lr=function(){function e(){ie(this,e),this.h=this.g=null}return ue(e,[{key:"add",value:function(e,t){var n=Mr.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Mr=new Or((function(){return new Fr}),(function(e){return e.reset()})),Fr=function(){function e(){ie(this,e),this.next=this.g=this.h=null}return ue(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Vr(e){var t=1;e=e.split(":");for(var n=[];0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function zr(e){Sn.setTimeout((function(){throw e}),0)}var Ur,Br=!1,jr=new Lr,qr=function(){var e=Sn.Promise.resolve(void 0);Ur=function(){e.then(Kr)}},Kr=function(){for(var e;e=Rr();){try{e.h.call(e.g)}catch(n){zr(n)}var t=Mr;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Br=!1};function Gr(e,t){Nr.call(this),this.h=e||1,this.g=t||Sn,this.j=An(this.qb,this),this.l=Date.now()}function Qr(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Wr(e,t,n){if("function"===typeof e)n&&(e=An(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=An(e.handleEvent,e)}return 2147483647<Number(t)?-1:Sn.setTimeout(e,t||0)}function Hr(e){e.g=Wr((function(){e.g=null,e.i&&(e.i=!1,Hr(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}On(Gr,Nr),(bn=Gr.prototype).ga=!1,bn.T=null,bn.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Dr(this,"tick"),this.ga&&(Qr(this),this.start()))}},bn.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},bn.N=function(){Gr.$.N.call(this),Qr(this),delete this.g};var $r=function(e){fe(n,e);var t=ve(n);function n(e,r){var i;return ie(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return ue(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Hr(this)}},{key:"N",value:function(){kn(he(n.prototype),"N",this).call(this),this.g&&(Sn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Rn);function Yr(e){Rn.call(this),this.h=e,this.g={}}On(Yr,Rn);var Zr=[];function Xr(e,t,n,r){Array.isArray(n)||(n&&(Zr[0]=n.toString()),n=Zr);for(var i=0;i<n.length;i++){var a=kr(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Jr(e){lr(e.g,(function(e,t){this.g.hasOwnProperty(t)&&xr(e)}),e),e.g={}}function ei(){this.g=!0}function ti(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Pr(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}Yr.prototype.N=function(){Yr.$.N.call(this),Jr(this)},Yr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ei.prototype.Ea=function(){this.g=!1},ei.prototype.info=function(){};var ni={},ri=null;function ii(){return ri=ri||new Nr}function ai(e){Vn.call(this,ni.Ta,e)}function oi(e){var t=ii();Dr(t,new ai(t))}function ui(e,t){Vn.call(this,ni.STAT_EVENT,e),this.stat=t}function si(e){var t=ii();Dr(t,new ui(t,e))}function ci(e,t){Vn.call(this,ni.Ua,e),this.size=t}function li(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Sn.setTimeout((function(){e()}),t)}ni.Ta="serverreachability",On(ai,Vn),ni.STAT_EVENT="statevent",On(ui,Vn),ni.Ua="timingevent",On(ci,Vn);var fi={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},hi={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function di(){}function vi(e){return e.h||(e.h=e.i())}function pi(){}di.prototype.h=null;var yi,mi={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function gi(){Vn.call(this,"d")}function ki(){Vn.call(this,"c")}function bi(){}function wi(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Yr(this),this.P=xi,e=$n?125:void 0,this.V=new Gr(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new _i}function _i(){this.i=null,this.g="",this.h=!1}On(gi,Vn),On(ki,Vn),On(bi,di),bi.prototype.g=function(){return new XMLHttpRequest},bi.prototype.i=function(){return{}},yi=new bi;var xi=45e3,Si={},Ei={};function Ii(e,t,n){e.L=1,e.v=Gi(Ui(t)),e.s=n,e.S=!0,Ti(e,null)}function Ti(e,t){e.G=Date.now(),Ai(e),e.A=Ui(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),ia(n.i,"t",r),e.C=0,n=e.l.J,e.h=new _i,e.g=ao(e.l,n?t:null,!e.s),0<e.O&&(e.M=new $r(An(e.Pa,e,e.g),e.O)),Xr(e.U,e.g,"readystatechange",e.nb),t=e.I?fr(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),oi(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function Ci(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function Ni(e,t,n){for(var r,i=!0;!e.J&&e.C<n.length;){if((r=Di(e,n))==Ei){4==t&&(e.o=4,si(14),i=!1),ti(e.j,e.m,null,"[Incomplete Response]");break}if(r==Si){e.o=4,si(15),ti(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}ti(e.j,e.m,r,null),Mi(e,r)}Ci(e)&&r!=Ei&&r!=Si&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,si(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Za(t),t.M=!0,si(11))):(ti(e.j,e.m,n,"[Invalid Chunked Response]"),Li(e),Ri(e))}function Di(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ei:(n=Number(t.substring(n,r)),isNaN(n)?Si:(r+=1)+n>t.length?Ei:(t=t.slice(r,r+n),e.C=r+n,t))}function Ai(e){e.Y=Date.now()+e.P,Pi(e,e.P)}function Pi(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=li(An(e.lb,e),t)}function Oi(e){e.B&&(Sn.clearTimeout(e.B),e.B=null)}function Ri(e){0==e.l.H||e.J||eo(e.l,e)}function Li(e){Oi(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,Qr(e.V),Jr(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function Mi(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||fa(n.i,e)))if(!e.K&&fa(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Ja(n),qa(n)}Ya(n),si(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=li(An(n.ib,n),6e3));if(1>=la(n.i)&&n.oa){try{n.oa()}catch(a){}n.oa=void 0}}else no(n,11)}else if((e.K||n.g==e)&&Ja(n),!Un(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.V=a[0],a=a[1],2==n.H)if("c"==a[0]){n.K=a[1],n.pa=a[2];var o=a[3];null!=o&&(n.ra=o,n.l.info("VER="+n.ra));var u=a[4];null!=u&&(n.Ga=u,n.l.info("SVER="+n.Ga));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(ha(f,f.h),f.h=null))}if(r.F){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.Da=h,Ki(r.I,r.F,h))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var d=e;if((r=n).wa=io(r,r.J?r.pa:null,r.Y),d.K){da(r.i,d);var v=d,p=r.L;p&&v.setTimeout(p),v.B&&(Oi(v),Ai(v)),r.g=d}else $a(r);0<n.j.length&&Ga(n)}else"stop"!=a[0]&&"close"!=a[0]||no(n,7);else 3==n.H&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?no(n,7):ja(n):"noop"!=a[0]&&n.h&&n.h.Aa(a),n.A=0)}oi()}catch(a){}}function Fi(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(En(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(En(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(En(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(bn=wi.prototype).setTimeout=function(e){this.P=e},bn.nb=function(e){e=e.target;var t=this.M;t&&3==Ma(e)?t.l():this.Pa(e)},bn.Pa=function(e){try{if(e==this.g)e:{var t=Ma(this.g),n=this.g.Ia();this.g.da();if(!(3>t)&&(3!=t||$n||this.g&&(this.h.h||this.g.ja()||Fa(this.g)))){this.J||4!=t||7==n||oi(),Oi(this);var r=this.g.da();this.ca=r;t:if(Ci(this)){var i=Fa(this.g);e="";var a=i.length,o=4==Ma(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Li(this),Ri(this);var u="";break t}this.h.i=new Sn.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ja();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.W,t,r),this.i){if(this.aa&&!this.K){t:{if(this.g){var s,c=this.g;if((s=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Un(s)){var l=s;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,si(12),Li(this),Ri(this);break e}ti(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Mi(this,r)}this.S?(Ni(this,t,u),$n&&this.i&&3==t&&(Xr(this.U,this.V,"tick",this.mb),this.V.start())):(ti(this.j,this.m,u,null),Mi(this,u)),4==t&&Li(this),this.i&&!this.J&&(4==t?eo(this.l,this):(this.i=!1,Ai(this)))}else(function(e){var t={};e=(e.g&&2<=Ma(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(var n=0;n<e.length;n++)if(!Un(e[n])){var r=Vr(e[n]),i=r[0];if("string"===typeof(r=r[1])){r=r.trim();var a=t[i]||[];t[i]=a,a.push(r)}}!function(e,t){for(var n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==r&&0<u.indexOf("Unknown SID")?(this.o=3,si(12)):(this.o=0,si(13)),Li(this),Ri(this)}}}catch(t){}},bn.mb=function(){if(this.g){var e=Ma(this.g),t=this.g.ja();this.C<t.length&&(Oi(this),Ni(this,e,t),this.i&&4!=e&&Ai(this))}},bn.cancel=function(){this.J=!0,Li(this)},bn.lb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(oi(),si(17)),Li(this),this.o=2,Ri(this)):Pi(this,this.Y-e)};var Vi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zi(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof zi){this.h=e.h,Bi(this,e.j),this.s=e.s,this.g=e.g,ji(this,e.m),this.l=e.l;var t=e.i,n=new ea;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),qi(this,n),this.o=e.o}else e&&(t=String(e).match(Vi))?(this.h=!1,Bi(this,t[1]||"",!0),this.s=Qi(t[2]||""),this.g=Qi(t[3]||"",!0),ji(this,t[4]),this.l=Qi(t[5]||"",!0),qi(this,t[6]||"",!0),this.o=Qi(t[7]||"")):(this.h=!1,this.i=new ea(null,this.h))}function Ui(e){return new zi(e)}function Bi(e,t,n){e.j=n?Qi(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function ji(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function qi(e,t,n){t instanceof ea?(e.i=t,function(e,t){t&&!e.j&&(ta(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(na(this,t),ia(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Wi(t,Xi)),e.i=new ea(t,e.h))}function Ki(e,t,n){e.i.set(t,n)}function Gi(e){return Ki(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Qi(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Wi(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Hi),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Hi(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}zi.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Wi(t,$i,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Wi(t,$i,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Wi(n,"/"==n.charAt(0)?Zi:Yi,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Wi(n,Ji)),e.join("")};var $i=/[#\/\?@]/g,Yi=/[#\?:]/g,Zi=/[#\?]/g,Xi=/[#\?@]/g,Ji=/#/g;function ea(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function ta(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function na(e,t){ta(e),t=aa(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function ra(e,t){return ta(e),t=aa(e,t),e.g.has(t)}function ia(e,t,n){na(e,t),0<n.length&&(e.i=null,e.g.set(aa(e,t),Mn(n)),e.h+=n.length)}function aa(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(bn=ea.prototype).add=function(e,t){ta(this),this.i=null,e=aa(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},bn.forEach=function(e,t){ta(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},bn.ta=function(){ta(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},bn.Z=function(e){ta(this);var t=[];if("string"===typeof e)ra(this,e)&&(t=t.concat(this.g.get(aa(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},bn.set=function(e,t){return ta(this),this.i=null,ra(this,e=aa(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},bn.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},bn.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var oa=ue((function e(t,n){ie(this,e),this.g=t,this.map=n}));function ua(e){this.l=e||sa,Sn.PerformanceNavigationTiming?e=0<(e=Sn.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Sn.g&&Sn.g.Ka&&Sn.g.Ka()&&Sn.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var sa=10;function ca(e){return!!e.h||!!e.g&&e.g.size>=e.j}function la(e){return e.h?1:e.g?e.g.size:0}function fa(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function ha(e,t){e.g?e.g.add(t):e.h=t}function da(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function va(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=se(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.F)}}catch(a){r.e(a)}finally{r.f()}return n}return Mn(e.i)}ua.prototype.cancel=function(){if(this.i=va(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=se(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}};var pa,ya=function(){function e(){ie(this,e)}return ue(e,[{key:"stringify",value:function(e){return Sn.JSON.stringify(e,void 0)}},{key:"parse",value:function(e){return Sn.JSON.parse(e,void 0)}}]),e}();function ma(){this.g=new ya}function ga(e,t,n){var r=n||"";try{Fi(e,(function(e,n){var i=e;In(e)&&(i=Pr(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function ka(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function ba(e){this.l=e.fc||null,this.j=e.ob||!1}function wa(e,t){Nr.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=_a,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}On(ba,di),ba.prototype.g=function(){return new wa(this.l,this.j)},ba.prototype.i=(pa={},function(){return pa}),On(wa,Nr);var _a=0;function xa(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function Sa(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Ea(e)}function Ea(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(bn=wa.prototype).open=function(e,t){if(this.readyState!=_a)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Ea(this)},bn.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Sn).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},bn.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Sa(this)),this.readyState=_a},bn.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ea(this)),this.g&&(this.readyState=3,Ea(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof Sn.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;xa(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},bn.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Sa(this):Ea(this),3==this.readyState&&xa(this)}},bn.Za=function(e){this.g&&(this.response=this.responseText=e,Sa(this))},bn.Ya=function(e){this.g&&(this.response=e,Sa(this))},bn.ka=function(){this.g&&Sa(this)},bn.setRequestHeader=function(e,t){this.v.append(e,t)},bn.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},bn.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(wa.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Ia=Sn.JSON.parse;function Ta(e){Nr.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Ca,this.L=this.M=!1}On(Ta,Nr);var Ca="",Na=/^https?$/i,Da=["POST","PUT"];function Aa(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Pa(e),Ra(e)}function Pa(e){e.F||(e.F=!0,Dr(e,"complete"),Dr(e,"error"))}function Oa(e){if(e.h&&"undefined"!=typeof xn&&(!e.C[1]||4!=Ma(e)||2!=e.da()))if(e.v&&4==Ma(e))Wr(e.La,0,e);else if(Dr(e,"readystatechange"),4==Ma(e)){e.h=!1;try{var t,n=e.da();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.I).match(Vi)[1]||null;!a&&Sn.self&&Sn.self.location&&(a=Sn.self.location.protocol.slice(0,-1)),i=!Na.test(a?a.toLowerCase():"")}t=i}if(t)Dr(e,"complete"),Dr(e,"success");else{e.m=6;try{var o=2<Ma(e)?e.g.statusText:""}catch(u){o=""}e.j=o+" ["+e.da()+"]",Pa(e)}}finally{Ra(e)}}}function Ra(e,t){if(e.g){La(e);var n=e.g,r=e.C[0]?function(){}:null;e.g=null,e.C=null,t||Dr(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function La(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Sn.clearTimeout(e.A),e.A=null)}function Ma(e){return e.g?e.g.readyState:0}function Fa(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case Ca:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Go){return null}}function Va(e){var t="";return lr(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function za(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Va(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Ki(e,t,n))}function Ua(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Ba(e){this.Ga=0,this.j=[],this.l=new ei,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Ua("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Ua("baseRetryDelayMs",5e3,e),this.hb=Ua("retryDelaySeedMs",1e4,e),this.eb=Ua("forwardChannelMaxRetries",2,e),this.xa=Ua("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new ua(e&&e.concurrentRequestLimit),this.Ja=new ma,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function ja(e){if(Ka(e),3==e.H){var t=e.W++,n=Ui(e.I);if(Ki(n,"SID",e.K),Ki(n,"RID",t),Ki(n,"TYPE","terminate"),Wa(e,n),(t=new wi(e,e.l,t)).L=2,t.v=Gi(Ui(n)),n=!1,Sn.navigator&&Sn.navigator.sendBeacon)try{n=Sn.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&Sn.Image&&((new Image).src=t.v,n=!0),n||(t.g=ao(t.l,null),t.g.ha(t.v)),t.G=Date.now(),Ai(t)}ro(e)}function qa(e){e.g&&(Za(e),e.g.cancel(),e.g=null)}function Ka(e){qa(e),e.u&&(Sn.clearTimeout(e.u),e.u=null),Ja(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Sn.clearTimeout(e.m),e.m=null)}function Ga(e){if(!ca(e.i)&&!e.m){e.m=!0;var t=e.Na;Ur||qr(),Br||(Ur(),Br=!0),jr.add(t,e),e.C=0}}function Qa(e,t){var n;n=t?t.m:e.W++;var r=Ui(e.I);Ki(r,"SID",e.K),Ki(r,"RID",n),Ki(r,"AID",e.V),Wa(e,r),e.o&&e.s&&za(r,e.o,e.s),n=new wi(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Ha(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),ha(e.i,n),Ii(n,r,t)}function Wa(e,t){e.na&&lr(e.na,(function(e,n){Ki(t,n,e)})),e.h&&Fi({},(function(e,n){Ki(t,n,e)}))}function Ha(e,t,n){n=Math.min(e.j.length,n);var r=e.h?An(e.h.Va,e.h,e):null;e:for(var i=e.j,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].g,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].g,l=i[s].map;if(0>(c-=a))a=Math.max(0,i[s].g-100),u=!1;else try{ga(l,o,"req"+c+"_")}catch(cs){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.j.splice(0,n),t.F=e,r}function $a(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Ur||qr(),Br||(Ur(),Br=!0),jr.add(t,e),e.A=0}}function Ya(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=li(An(e.Ma,e),to(e,e.A)),e.A++,!0)}function Za(e){null!=e.B&&(Sn.clearTimeout(e.B),e.B=null)}function Xa(e){e.g=new wi(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Ui(e.wa);Ki(t,"RID","rpc"),Ki(t,"SID",e.K),Ki(t,"AID",e.V),Ki(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Ki(t,"TO",e.qa),Ki(t,"TYPE","xmlhttp"),Wa(e,t),e.o&&e.s&&za(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=Gi(Ui(t)),n.s=null,n.S=!0,Ti(n,e)}function Ja(e){null!=e.v&&(Sn.clearTimeout(e.v),e.v=null)}function eo(e,t){var n=null;if(e.g==t){Ja(e),Za(e),e.g=null;var r=2}else{if(!fa(e.i,t))return;n=t.F,da(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;Dr(r=ii(),new ci(r,n)),Ga(e)}else $a(e);else if(3==(i=t.o)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(la(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=li(An(e.Na,e,t),to(e,e.C)),e.C++,!0))}(e,t)||2==r&&Ya(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:no(e,5);break;case 4:no(e,10);break;case 3:no(e,6);break;default:no(e,2)}}function to(e,t){var n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function no(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=An(e.pb,e);n||(n=new zi("//www.google.com/images/cleardot.gif"),Sn.location&&"http"==Sn.location.protocol||Bi(n,"https"),Gi(n)),function(e,t){var n=new ei;if(Sn.Image){var r=new Image;r.onload=Pn(ka,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Pn(ka,n,r,"TestLoadImage: error",!1,t),r.onabort=Pn(ka,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Pn(ka,n,r,"TestLoadImage: timeout",!1,t),Sn.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else si(2);e.H=0,e.h&&e.h.za(t),ro(e),Ka(e)}function ro(e){if(e.H=0,e.ma=[],e.h){var t=va(e.i);0==t.length&&0==e.j.length||(Fn(e.ma,t),Fn(e.ma,e.j),e.i.i.length=0,Mn(e.j),e.j.length=0),e.h.ya()}}function io(e,t,n){var r=n instanceof zi?Ui(n):new zi(n);if(""!=r.g)t&&(r.g=t+"."+r.g),ji(r,r.m);else{var i=Sn.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new zi(null);r&&Bi(a,r),t&&(a.g=t),i&&ji(a,i),n&&(a.l=n),r=a}return n=e.F,t=e.Da,n&&t&&Ki(r,n,t),Ki(r,"VER",e.ra),Wa(e,r),r}function ao(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new Ta(new ba({ob:!0})):new Ta(e.va)).Oa(e.J),t}function oo(){}function uo(){if(Wn&&!(10<=Number(rr)))throw Error("Environmental error: no available transport.")}function so(e,t){Nr.call(this),this.g=new Ba(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Un(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Un(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new fo(this)}function co(e){gi.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function lo(){ki.call(this),this.status=1}function fo(e){this.g=e}function ho(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function vo(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var a=e.g[3],o=t+(a^n&(i^a))+r[0]+3614090360&4294967295;o=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=n+(o<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^a&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~a))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((a=(t=n+((o=t+(i^(n|~a))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=a+((o=i+(t^(a|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function po(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var a=0|e[i];r&&a==t||(n[i]=a,r=!1)}this.g=n}(bn=Ta.prototype).Oa=function(e){this.M=e},bn.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():yi.g(),this.C=this.u?vi(this.u):vi(yi),this.g.onreadystatechange=An(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(u){return void Aa(this,u)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=se(r.keys());try{for(o.s();!(a=o.n()).done;){var u=a.value;n.set(u,r.get(u))}}catch(d){o.e(d)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=Sn.FormData&&e instanceof Sn.FormData,!(0<=Ln(Da,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var s,c=se(n);try{for(c.s();!(s=c.n()).done;){var l=_(s.value,2),f=l[0],h=l[1];this.g.setRequestHeader(f,h)}}catch(d){c.e(d)}finally{c.f()}this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{La(this),0<this.B&&((this.L=function(e){return Wn&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=An(this.ua,this)):this.A=Wr(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(u){Aa(this,u)}},bn.ua=function(){"undefined"!=typeof xn&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Dr(this,"timeout"),this.abort(8))},bn.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Dr(this,"complete"),Dr(this,"abort"),Ra(this))},bn.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ra(this,!0)),Ta.$.N.call(this)},bn.La=function(){this.s||(this.G||this.v||this.l?Oa(this):this.kb())},bn.kb=function(){Oa(this)},bn.isActive=function(){return!!this.g},bn.da=function(){try{return 2<Ma(this)?this.g.status:-1}catch(pa){return-1}},bn.ja=function(){try{return this.g?this.g.responseText:""}catch(pa){return""}},bn.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Ia(t)}},bn.Ia=function(){return this.m},bn.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(bn=Ba.prototype).ra=8,bn.H=1,bn.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;var t=new wi(this,this.l,e),n=this.s;if(this.U&&(n?dr(n=fr(n),this.U):n=this.U),null!==this.o||this.O||(t.I=n,n=null),this.P)e:{for(var r=0,i=0;i<this.j.length;i++){var a=this.j[i];if(void 0===(a="__data__"in a.map&&"string"===typeof(a=a.map.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.j.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Ha(this,t,r),Ki(i=Ui(this.I),"RID",e),Ki(i,"CVER",22),this.F&&Ki(i,"X-HTTP-Session-Id",this.F),Wa(this,i),n&&(this.O?r="headers="+encodeURIComponent(String(Va(n)))+"&"+r:this.o&&za(i,this.o,n)),ha(this.i,t),this.bb&&Ki(i,"TYPE","init"),this.P?(Ki(i,"$req",r),Ki(i,"SID","null"),t.aa=!0,Ii(t,i,null)):Ii(t,i,r),this.H=2}}else 3==this.H&&(e?Qa(this,e):0==this.j.length||ca(this.i)||Qa(this))},bn.Ma=function(){if(this.u=null,Xa(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=li(An(this.jb,this),e)}},bn.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,si(10),qa(this),Xa(this))},bn.ib=function(){null!=this.v&&(this.v=null,qa(this),Ya(this),si(19))},bn.pb=function(e){e?(this.l.info("Successfully pinged google.com"),si(2)):(this.l.info("Failed to ping google.com"),si(1))},bn.isActive=function(){return!!this.h&&this.h.isActive(this)},(bn=oo.prototype).Ba=function(){},bn.Aa=function(){},bn.za=function(){},bn.ya=function(){},bn.isActive=function(){return!0},bn.Va=function(){},uo.prototype.g=function(e,t){return new so(e,t)},On(so,Nr),so.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;si(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=io(e,null,e.Y),Ga(e)},so.prototype.close=function(){ja(this.g)},so.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Pr(e),e=n);t.j.push(new oa(t.fb++,e)),3==t.H&&Ga(t)},so.prototype.N=function(){this.g.h=null,delete this.j,ja(this.g),delete this.g,so.$.N.call(this)},On(co,gi),On(lo,ki),On(fo,oo),fo.prototype.Ba=function(){Dr(this.g,"a")},fo.prototype.Aa=function(e){Dr(this.g,new co(e))},fo.prototype.za=function(e){Dr(this.g,new lo)},fo.prototype.ya=function(){Dr(this.g,"b")},On(ho,(function(){this.blockSize=-1})),ho.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},ho.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,a=0;a<t;){if(0==i)for(;a<=n;)vo(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(r[i++]=e.charCodeAt(a++),i==this.blockSize){vo(this,r),i=0;break}}else for(;a<t;)if(r[i++]=e[a++],i==this.blockSize){vo(this,r),i=0;break}}this.h=i,this.i+=t},ho.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var yo={};function mo(e){return-128<=e&&128>e?function(e,t){var n=yo;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new po([0|e],0>e?-1:0)})):new po([0|e],0>e?-1:0)}function go(e){if(isNaN(e)||!isFinite(e))return bo;if(0>e)return Eo(go(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=ko;return new po(t,0)}var ko=4294967296,bo=mo(0),wo=mo(1),_o=mo(16777216);function xo(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function So(e){return-1==e.h}function Eo(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new po(n,~e.h).add(wo)}function Io(e,t){return e.add(Eo(t))}function To(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Co(e,t){this.g=e,this.h=t}function No(e,t){if(xo(t))throw Error("division by zero");if(xo(e))return new Co(bo,bo);if(So(e))return t=No(Eo(e),t),new Co(Eo(t.g),Eo(t.h));if(So(t))return t=No(e,Eo(t)),new Co(Eo(t.g),t.h);if(30<e.g.length){if(So(e)||So(t))throw Error("slowDivide_ only works with positive integers.");for(var n=wo,r=t;0>=r.X(e);)n=Do(n),r=Do(r);var i=Ao(n,1),a=Ao(r,1);for(r=Ao(r,2),n=Ao(n,2);!xo(r);){var o=a.add(r);0>=o.X(e)&&(i=i.add(n),a=o),r=Ao(r,1),n=Ao(n,1)}return t=Io(e,i.R(t)),new Co(i,t)}for(i=bo;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(a=go(n)).R(t);So(o)||0<o.X(e);)o=(a=go(n-=r)).R(t);xo(a)&&(a=wo),i=i.add(a),e=Io(e,o)}return new Co(i,e)}function Do(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new po(n,e.h)}function Ao(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],a=0;a<r;a++)i[a]=0<t?e.D(a+n)>>>t|e.D(a+n+1)<<32-t:e.D(a+n);return new po(i,e.h)}(bn=po.prototype).ea=function(){if(So(this))return-Eo(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:ko+r)*t,t*=ko}return e},bn.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(xo(this))return"0";if(So(this))return"-"+Eo(this).toString(e);for(var t=go(Math.pow(e,6)),n=this,r="";;){var i=No(n,t).g,a=((0<(n=Io(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(xo(n=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},bn.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},bn.X=function(e){return So(e=Io(this,e))?-1:xo(e)?0:1},bn.abs=function(){return So(this)?Eo(this):this},bn.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var a=r+(65535&this.D(i))+(65535&e.D(i)),o=(a>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new po(n,-2147483648&n[n.length-1]?-1:0)},bn.R=function(e){if(xo(this)||xo(e))return bo;if(So(this))return So(e)?Eo(this).R(Eo(e)):Eo(Eo(this).R(e));if(So(e))return Eo(this.R(Eo(e)));if(0>this.X(_o)&&0>e.X(_o))return go(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var a=this.D(r)>>>16,o=65535&this.D(r),u=e.D(i)>>>16,s=65535&e.D(i);n[2*r+2*i]+=o*s,To(n,2*r+2*i),n[2*r+2*i+1]+=a*s,To(n,2*r+2*i+1),n[2*r+2*i+1]+=o*u,To(n,2*r+2*i+1),n[2*r+2*i+2]+=a*u,To(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new po(n,0)},bn.gb=function(e){return No(this,e).h},bn.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new po(n,this.h&e.h)},bn.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new po(n,this.h|e.h)},bn.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new po(n,this.h^e.h)},uo.prototype.createWebChannel=uo.prototype.g,so.prototype.send=so.prototype.u,so.prototype.open=so.prototype.m,so.prototype.close=so.prototype.close,fi.NO_ERROR=0,fi.TIMEOUT=8,fi.HTTP_ERROR=6,hi.COMPLETE="complete",pi.EventType=mi,mi.OPEN="a",mi.CLOSE="b",mi.ERROR="c",mi.MESSAGE="d",Nr.prototype.listen=Nr.prototype.O,Ta.prototype.listenOnce=Ta.prototype.P,Ta.prototype.getLastError=Ta.prototype.Sa,Ta.prototype.getLastErrorCode=Ta.prototype.Ia,Ta.prototype.getStatus=Ta.prototype.da,Ta.prototype.getResponseJson=Ta.prototype.Wa,Ta.prototype.getResponseText=Ta.prototype.ja,Ta.prototype.send=Ta.prototype.ha,Ta.prototype.setWithCredentials=Ta.prototype.Oa,ho.prototype.digest=ho.prototype.l,ho.prototype.reset=ho.prototype.reset,ho.prototype.update=ho.prototype.j,po.prototype.add=po.prototype.add,po.prototype.multiply=po.prototype.R,po.prototype.modulo=po.prototype.gb,po.prototype.compare=po.prototype.X,po.prototype.toNumber=po.prototype.ea,po.prototype.toString=po.prototype.toString,po.prototype.getBits=po.prototype.D,po.fromNumber=go,po.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return Eo(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=go(Math.pow(n,8)),i=bo,a=0;a<t.length;a+=8){var o=Math.min(8,t.length-a),u=parseInt(t.substring(a,a+o),n);8>o?(o=go(Math.pow(n,o)),i=i.R(o).add(go(u))):i=(i=i.R(r)).add(go(u))}return i};var Po=_n.createWebChannelTransport=function(){return new uo},Oo=_n.getStatEventTarget=function(){return ii()},Ro=_n.ErrorCode=fi,Lo=_n.EventType=hi,Mo=_n.Event=ni,Fo=_n.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Vo=_n.FetchXmlHttpFactory=ba,zo=_n.WebChannel=pi,Uo=_n.XhrIo=Ta,Bo=_n.Md5=ho,jo=_n.Integer=po,qo="@firebase/firestore",Ko=function(){function e(t){ie(this,e),this.uid=t}return ue(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Ko.UNAUTHENTICATED=new Ko(null),Ko.GOOGLE_CREDENTIALS=new Ko("google-credentials-uid"),Ko.FIRST_PARTY=new Ko("first-party-uid"),Ko.MOCK_USER=new Ko("mock-user");var Go="10.0.0",Qo=new Xe("@firebase/firestore");function Wo(){return Qo.logLevel}function Ho(e){if(Qo.logLevel<=Ge.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Zo);Qo.debug.apply(Qo,["Firestore (".concat(Go,"): ").concat(e)].concat(x(i)))}}function $o(e){if(Qo.logLevel<=Ge.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Zo);Qo.error.apply(Qo,["Firestore (".concat(Go,"): ").concat(e)].concat(x(i)))}}function Yo(e){if(Qo.logLevel<=Ge.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Zo);Qo.warn.apply(Qo,["Firestore (".concat(Go,"): ").concat(e)].concat(x(i)))}}function Zo(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Xo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Go,") INTERNAL ASSERTION FAILED: ")+e;throw $o(t),new Error(t)}function Jo(e,t){e||Xo()}function eu(e,t){return e}var tu={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},nu=function(e){fe(n,e);var t=ve(n);function n(e,r){var i;return ie(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return ue(n)}(Ae),ru=ue((function e(){var t=this;ie(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),iu=ue((function e(t,n){ie(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),au=function(){function e(){ie(this,e)}return ue(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Ko.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),ou=function(){function e(t){ie(this,e),this.token=t,this.changeListener=null}return ue(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),uu=function(){function e(t){ie(this,e),this.t=t,this.currentUser=Ko.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return ue(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new ru;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new ru,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(re(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){Ho("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(Ho("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new ru)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Ho("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Jo("string"==typeof n.accessToken),new iu(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Jo(null===e||"string"==typeof e),new Ko(e)}}]),e}(),su=function(){function e(t,n,r){ie(this,e),this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=Ko.FIRST_PARTY,this.I=new Map}return ue(e,[{key:"T",value:function(){return this.P?this.P():null}},{key:"headers",get:function(){this.I.set("X-Goog-AuthUser",this.l);var e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}]),e}(),cu=function(){function e(t,n,r){ie(this,e),this.l=t,this.h=n,this.P=r}return ue(e,[{key:"getToken",value:function(){return Promise.resolve(new su(this.l,this.h,this.P))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Ko.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),lu=ue((function e(t){ie(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),fu=function(){function e(t){ie(this,e),this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}return ue(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&Ho("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.R;return n.R=e.token,Ho("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){Ho("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.A.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.A.getImmediate({optional:!0});e?i(e):Ho("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Jo("string"==typeof t.token),e.R=t.token,new lu(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function hu(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var du=function(){function e(){ie(this,e)}return ue(e,null,[{key:"V",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=hu(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function vu(e,t){return e<t?-1:e>t?1:0}function pu(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function yu(e){return e+"\0"}var mu=function(){function e(t,n){if(ie(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new nu(tu.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new nu(tu.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new nu(tu.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new nu(tu.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return ue(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?vu(this.nanoseconds,e.nanoseconds):vu(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),gu=function(){function e(t){ie(this,e),this.timestamp=t}return ue(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new mu(0,0))}},{key:"max",value:function(){return new e(new mu(253402300799,999999999))}}]),e}(),ku=function(){function e(t,n,r){ie(this,e),void 0===n?n=0:n>t.length&&Xo(),void 0===r?r=t.length-n:r>t.length-n&&Xo(),this.segments=t,this.offset=n,this.len=r}return ue(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),bu=function(e){fe(n,e);var t=ve(n);function n(){return ie(this,n),t.apply(this,arguments)}return ue(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new nu(tu.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,x(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(ku),wu=/^[_a-zA-Z][_a-zA-Z0-9]*$/,_u=function(e){fe(n,e);var t=ve(n);function n(){return ie(this,n),t.apply(this,arguments)}return ue(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return wu.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new nu(tu.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new nu(tu.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new nu(tu.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new nu(tu.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(ku),xu=function(){function e(t){ie(this,e),this.path=t}return ue(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===bu.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(bu.fromString(t))}},{key:"fromName",value:function(t){return new e(bu.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(bu.emptyPath())}},{key:"comparator",value:function(e,t){return bu.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new bu(t.slice()))}}]),e}(),Su=ue((function e(t,n,r,i){ie(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function Eu(e){return e.fields.find((function(e){return 2===e.kind}))}function Iu(e){return e.fields.filter((function(e){return 2!==e.kind}))}Su.UNKNOWN_ID=-1;var Tu=ue((function e(t,n){ie(this,e),this.fieldPath=t,this.kind=n}));var Cu=function(){function e(t,n){ie(this,e),this.sequenceNumber=t,this.offset=n}return ue(e,null,[{key:"empty",value:function(){return new e(0,Au.min())}}]),e}();function Nu(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=gu.fromTimestamp(1e9===r?new mu(n+1,0):new mu(n,r));return new Au(i,xu.empty(),t)}function Du(e){return new Au(e.readTime,e.key,-1)}var Au=function(){function e(t,n,r){ie(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return ue(e,null,[{key:"min",value:function(){return new e(gu.min(),xu.empty(),-1)}},{key:"max",value:function(){return new e(gu.max(),xu.empty(),-1)}}]),e}();function Pu(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=xu.comparator(e.documentKey,t.documentKey))?n:vu(e.largestBatchId,t.largestBatchId)}var Ou="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ru=function(){function e(){ie(this,e),this.onCommittedListeners=[]}return ue(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function Lu(e){return Mu.apply(this,arguments)}function Mu(){return(Mu=re(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===tu.FAILED_PRECONDITION&&t.message===Ou){e.next=2;break}throw t;case 2:Ho("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Fu=function(){function e(t){var n=this;ie(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return ue(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Xo(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=se(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(){var u=s;n(t[u]).next((function(t){a[u]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),Vu=function(){function e(t,n){var r=this;ie(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.m=new ru,this.transaction.oncomplete=function(){r.m.resolve()},this.transaction.onabort=function(){n.error?r.m.reject(new Bu(t,n.error)):r.m.resolve()},this.transaction.onerror=function(e){var n=Qu(e.target.error);r.m.reject(new Bu(t,n))}}return ue(e,[{key:"g",get:function(){return this.m.promise}},{key:"abort",value:function(e){e&&this.m.reject(e),this.aborted||(Ho("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"p",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new qu(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Bu(n,t)}}}]),e}(),zu=function(){function e(t,n,r){ie(this,e),this.name=t,this.version=n,this.S=r,12.2===e.D(Te())&&$o("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return ue(e,[{key:"N",value:function(){var e=re(te().mark((function e(t){var n=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return Ho("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Bu(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new nu(tu.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new nu(tu.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Bu(t,n))},i.onupgradeneeded=function(e){Ho("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.S.B(t,i.transaction,e.oldVersion,n.version).next((function(){Ho("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.L&&(this.db.onversionchange=function(e){return n.L(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"k",value:function(e){this.L=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=re(te().mark((function e(t,n,r,i){var a,o,u,s,c=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0,u=te().mark((function e(){var n,u,s,l;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return++o,e.prev=1,e.next=4,c.N(t);case 4:return c.db=e.sent,n=Vu.open(c.db,t,a?"readonly":"readwrite",r),u=i(n).next((function(e){return n.p(),e})).catch((function(e){return n.abort(e),Fu.reject(e)})).toPromise(),u.catch((function(){})),e.next=9,n.g;case 9:return e.t0=u,e.abrupt("return",{v:e.t0});case 13:if(e.prev=13,e.t1=e.catch(1),s=e.t1,l="FirebaseError"!==s.name&&o<3,Ho("SimpleDb","Transaction failed with error:",s.message,"Retrying:",l),c.close(),l){e.next=18;break}return e.abrupt("return",{v:Promise.reject(s)});case 18:case"end":return e.stop()}}),e,null,[[1,13]])}));case 3:return e.delegateYield(u(),"t0",4);case 4:if("object"!==typeof(s=e.t0)){e.next=7;break}return e.abrupt("return",s.v);case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return Ho("SimpleDb","Removing database:",e),Ku(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"v",value:function(){if(!Ne())return!1;if(e.C())return!0;var t=Te(),n=e.D(t),r=0<n&&n<10,i=e.F(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"C",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/Note_WebApp_ReactRedux",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.M)}},{key:"O",value:function(e,t){return e.store(t)}},{key:"D",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"F",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Uu=function(){function e(t){ie(this,e),this.q=t,this.K=!1,this.$=null}return ue(e,[{key:"isDone",get:function(){return this.K}},{key:"U",get:function(){return this.$}},{key:"cursor",set:function(e){this.q=e}},{key:"done",value:function(){this.K=!0}},{key:"W",value:function(e){this.$=e}},{key:"delete",value:function(){return Ku(this.q.delete())}}]),e}(),Bu=function(e){fe(n,e);var t=ve(n);function n(e,r){var i;return ie(this,n),(i=t.call(this,tu.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return ue(n)}(nu);function ju(e){return"IndexedDbTransactionError"===e.name}var qu=function(){function e(t){ie(this,e),this.store=t}return ue(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(Ho("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Ho("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Ku(n)}},{key:"add",value:function(e){return Ho("SimpleDb","ADD",this.store.name,e,e),Ku(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Ku(this.store.get(e)).next((function(n){return void 0===n&&(n=null),Ho("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return Ho("SimpleDb","DELETE",this.store.name,e),Ku(this.store.delete(e))}},{key:"count",value:function(){return Ho("SimpleDb","COUNT",this.store.name),Ku(this.store.count())}},{key:"G",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.j(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new Fu((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"H",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new Fu((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){Ho("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Y=!1;var r=this.cursor(n);return this.j(r,(function(e,t,n){return n.delete()}))}},{key:"Z",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.j(r,t)}},{key:"X",value:function(e){var t=this.cursor({});return new Fu((function(n,r){t.onerror=function(e){var t=Qu(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"j",value:function(e,t){var n=[];return new Fu((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Uu(i),o=t(i.primaryKey,i.value,a);if(o instanceof Fu){var u=o.catch((function(e){return a.done(),Fu.reject(e)}));n.push(u)}a.isDone?r():null===a.U?i.continue():i.continue(a.U)}else r()}})).next((function(){return Fu.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Ku(e){return new Fu((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Qu(e.target.error);n(t)}}))}var Gu=!1;function Qu(e){var t=zu.D(Te());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new nu("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Gu||(Gu=!0,setTimeout((function(){throw r}),0)),r}}return e}var Wu=function(){function e(t,n){ie(this,e),this.asyncQueue=t,this.ee=n,this.task=null}return ue(e,[{key:"start",value:function(){this.te(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"te",value:function(e){var t=this;Ho("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,re(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=Ho,e.t1="Documents written: ",e.next=6,t.ee.ne();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!ju(e.t4)){e.next=17;break}Ho("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,Lu(e.t4);case 19:return e.next=21,t.te(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),Hu=function(){function e(t,n){ie(this,e),this.localStore=t,this.persistence=n}return ue(e,[{key:"ne",value:function(){var e=re(te().mark((function e(){var t,n=this,r=arguments;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.re(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"re",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return Fu.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return Ho("IndexBackiller","Processing collection: ".concat(t)),n.ie(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"ie",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.se(i,n)})).next((function(n){return Ho("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"se",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=Du(t);Pu(r,n)>0&&(n=r)})),new Au(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),$u=function(){function e(t,n){var r=this;ie(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.oe(e)},this._e=function(e){return n.writeSequenceNumber(e)})}return ue(e,[{key:"oe",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this._e&&this._e(e),e}}]),e}();function Yu(e){return null==e}function Zu(e){return 0===e&&1/e==-1/0}function Xu(e){return"number"==typeof e&&Number.isInteger(e)&&!Zu(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function Ju(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=ts(t)),t=es(e.get(n),t);return ts(t)}function es(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function ts(e){return e+"\x01\x01"}function ns(e){var t=e.length;if(Jo(t>=2),2===t)return Jo("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),bu.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&Xo(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:Xo()}a=o+2}return new bu(r)}$u.ae=-1;var rs=["userId","batchId"];function is(e,t){return[e,Ju(t)]}function as(e,t,n){return[e,Ju(t),n]}var os={},us=["prefixPath","collectionGroup","readTime","documentId"],ss=["prefixPath","collectionGroup","documentId"],cs=["collectionGroup","readTime","prefixPath","documentId"],ls=["canonicalId","targetId"],fs=["targetId","path"],hs=["path","targetId"],ds=["collectionId","parent"],vs=["indexId","uid"],ps=["uid","sequenceNumber"],ys=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],ms=["indexId","uid","orderedDocumentKey"],gs=["userId","collectionPath","documentId"],ks=["userId","collectionPath","largestBatchId"],bs=["userId","collectionGroup","largestBatchId"],ws=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),_s=[].concat(x(ws),["documentOverlays"]),xs=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ss=xs,Es=[].concat(Ss,["indexConfiguration","indexState","indexEntries"]),Is=function(e){fe(n,e);var t=ve(n);function n(e,r){var i;return ie(this,n),(i=t.call(this)).ue=e,i.currentSequenceNumber=r,i}return ue(n)}(Ru);function Ts(e,t){var n=eu(e);return zu.O(n.ue,t)}function Cs(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ns(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Ds(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var As=function(){function e(t,n){ie(this,e),this.comparator=t,this.root=n||Os.EMPTY}return ue(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Os.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Os.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Ps(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Ps(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Ps(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Ps(this.root,e,this.comparator,!0)}}]),e}(),Ps=function(){function e(t,n,r,i){ie(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return ue(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Os=function(){function e(t,n,r,i,a){ie(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return ue(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Xo();if(this.right.isRed())throw Xo();var e=this.left.check();if(e!==this.right.check())throw Xo();return e+(this.isRed()?0:1)}}]),e}();Os.EMPTY=null,Os.RED=!0,Os.BLACK=!1,Os.EMPTY=new(function(){function e(){ie(this,e),this.size=0}return ue(e,[{key:"key",get:function(){throw Xo()}},{key:"value",get:function(){throw Xo()}},{key:"color",get:function(){throw Xo()}},{key:"left",get:function(){throw Xo()}},{key:"right",get:function(){throw Xo()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Os(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Rs=function(){function e(t){ie(this,e),this.comparator=t,this.data=new As(this.comparator)}return ue(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Ls(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Ls(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Ls=function(){function e(t){ie(this,e),this.iter=t}return ue(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function Ms(e){return e.hasNext()?e.getNext():void 0}var Fs=function(){function e(t){ie(this,e),this.fields=t,t.sort(_u.comparator)}return ue(e,[{key:"unionWith",value:function(t){var n,r=new Rs(_u.comparator),i=se(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=se(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=se(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return pu(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),Vs=function(e){fe(n,e);var t=ve(n);function n(){var e;return ie(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return ue(n)}(ye(Error));var zs=function(e){function t(e){ie(this,t),this.binaryString=e}return ue(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return vu(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Vs("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();zs.EMPTY_BYTE_STRING=new zs("");var Us=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bs(e){if(Jo(!!e),"string"==typeof e){var t=0,n=Us.exec(e);if(Jo(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:js(e.seconds),nanos:js(e.nanos)}}function js(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function qs(e){return"string"==typeof e?zs.fromBase64String(e):zs.fromUint8Array(e)}function Ks(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Gs(e){var t=e.mapValue.fields.__previous_value__;return Ks(t)?Gs(t):t}function Qs(e){var t=Bs(e.mapValue.fields.__local_write_time__.timestampValue);return new mu(t.seconds,t.nanos)}var Ws=ue((function e(t,n,r,i,a,o,u,s,c){ie(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=s,this.useFetchStreams=c})),Hs=function(){function e(t,n){ie(this,e),this.projectId=t,this.database=n||"(default)"}return ue(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}(),$s={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ys={nullValue:"NULL_VALUE"};function Zs(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Ks(e)?4:fc(e)?9007199254740991:10:Xo()}function Xs(e,t){if(e===t)return!0;var n=Zs(e);if(n!==Zs(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Qs(e).isEqual(Qs(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Bs(e.timestampValue),r=Bs(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return qs(e.bytesValue).isEqual(qs(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return js(e.geoPointValue.latitude)===js(t.geoPointValue.latitude)&&js(e.geoPointValue.longitude)===js(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return js(e.integerValue)===js(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=js(e.doubleValue),r=js(t.doubleValue);return n===r?Zu(n)===Zu(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return pu(e.arrayValue.values||[],t.arrayValue.values||[],Xs);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Cs(n)!==Cs(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Xs(n[i],r[i])))return!1;return!0}(e,t);default:return Xo()}}function Js(e,t){return void 0!==(e.values||[]).find((function(e){return Xs(e,t)}))}function ec(e,t){if(e===t)return 0;var n=Zs(e),r=Zs(t);if(n!==r)return vu(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return vu(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=js(e.integerValue||e.doubleValue),r=js(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return tc(e.timestampValue,t.timestampValue);case 4:return tc(Qs(e),Qs(t));case 5:return vu(e.stringValue,t.stringValue);case 6:return function(e,t){var n=qs(e),r=qs(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=vu(n[i],r[i]);if(0!==a)return a}return vu(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=vu(js(e.latitude),js(t.latitude));return 0!==n?n:vu(js(e.longitude),js(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=ec(n[i],r[i]);if(a)return a}return vu(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===$s.mapValue&&t===$s.mapValue)return 0;if(e===$s.mapValue)return 1;if(t===$s.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=vu(r[o],a[o]);if(0!==u)return u;var s=ec(n[r[o]],i[a[o]]);if(0!==s)return s}return vu(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Xo()}}function tc(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return vu(e,t);var n=Bs(e),r=Bs(t),i=vu(n.seconds,r.seconds);return 0!==i?i:vu(n.nanos,r.nanos)}function nc(e){return rc(e)}function rc(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Bs(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return qs(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return xu.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){var t,n="[",r=!0,i=se(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=rc(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=se(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(rc(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):Xo()}function ic(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function ac(e){return!!e&&"integerValue"in e}function oc(e){return!!e&&"arrayValue"in e}function uc(e){return!!e&&"nullValue"in e}function sc(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function cc(e){return!!e&&"mapValue"in e}function lc(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Ns(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=lc(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=lc(e.arrayValue.values[r]);return n}return Object.assign({},e)}function fc(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function hc(e){return"nullValue"in e?Ys:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?ic(Hs.empty(),xu.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Xo()}function dc(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?ic(Hs.empty(),xu.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?$s:Xo()}function vc(e,t){var n=ec(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function pc(e,t){var n=ec(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var yc=function(){function e(t){ie(this,e),this.value=t}return ue(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!cc(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=lc(t)}},{key:"setAll",value:function(e){var t=this,n=_u.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=lc(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());cc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Xs(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];cc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Ns(t,(function(t,n){return e[t]=n}));var r,i=se(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(lc(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function mc(e){var t=[];return Ns(e.fields,(function(e,n){var r=new _u([e]);if(cc(n)){var i=mc(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=se(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new Fs(t)}var gc=function(){function e(t,n,r,i,a,o,u){ie(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=u}return ue(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(gu.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=yc.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=yc.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=gu.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,gu.min(),gu.min(),gu.min(),yc.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,gu.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,gu.min(),gu.min(),yc.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,gu.min(),gu.min(),yc.empty(),2)}}]),e}(),kc=ue((function e(t,n){ie(this,e),this.position=t,this.inclusive=n}));function bc(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?xu.comparator(xu.fromName(o.referenceValue),n.key):ec(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function wc(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Xs(e.position[n],t.position[n]))return!1;return!0}var _c=ue((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";ie(this,e),this.field=t,this.dir=n}));function xc(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var Sc=ue((function e(){ie(this,e)})),Ec=function(e){fe(n,e);var t=ve(n);function n(e,r,i){var a;return ie(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return ue(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(ec(t,this.value)):null!==t&&Zs(this.value)===Zs(t)&&this.matchesComparison(ec(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Xo()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Lc(e,t,r):"array-contains"===t?new zc(e,r):"in"===t?new Uc(e,r):"not-in"===t?new Bc(e,r):"array-contains-any"===t?new jc(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new Mc(e,n):new Fc(e,n)}}]),n}(Sc),Ic=function(e){fe(n,e);var t=ve(n);function n(e,r){var i;return ie(this,n),(i=t.call(this)).filters=e,i.op=r,i.ce=null,i}return ue(n,[{key:"matches",value:function(e){return Tc(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.ce||(this.ce=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.ce}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.le((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"le",value:function(e){var t,n=se(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(Sc);function Tc(e){return"and"===e.op}function Cc(e){return"or"===e.op}function Nc(e){return Dc(e)&&Tc(e)}function Dc(e){var t,n=se(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof Ic)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function Ac(e){if(e instanceof Ec)return e.field.canonicalString()+e.op.toString()+nc(e.value);if(Nc(e))return e.filters.map((function(e){return Ac(e)})).join(",");var t=e.filters.map((function(e){return Ac(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function Pc(e,t){return e instanceof Ec?function(e,t){return t instanceof Ec&&e.op===t.op&&e.field.isEqual(t.field)&&Xs(e.value,t.value)}(e,t):e instanceof Ic?function(e,t){return t instanceof Ic&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&Pc(n,t.filters[r])}),!0)}(e,t):void Xo()}function Oc(e,t){var n=e.filters.concat(t);return Ic.create(n,e.op)}function Rc(e){return e instanceof Ec?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(nc(e.value))}(e):e instanceof Ic?function(e){return e.op.toString()+" {"+e.getFilters().map(Rc).join(" ,")+"}"}(e):"Filter"}var Lc=function(e){fe(n,e);var t=ve(n);function n(e,r,i){var a;return ie(this,n),(a=t.call(this,e,r,i)).key=xu.fromName(i.referenceValue),a}return ue(n,[{key:"matches",value:function(e){var t=xu.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(Ec),Mc=function(e){fe(n,e);var t=ve(n);function n(e,r){var i;return ie(this,n),(i=t.call(this,e,"in",r)).keys=Vc("in",r),i}return ue(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Ec),Fc=function(e){fe(n,e);var t=ve(n);function n(e,r){var i;return ie(this,n),(i=t.call(this,e,"not-in",r)).keys=Vc("not-in",r),i}return ue(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Ec);function Vc(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return xu.fromName(e.referenceValue)}))}var zc=function(e){fe(n,e);var t=ve(n);function n(e,r){return ie(this,n),t.call(this,e,"array-contains",r)}return ue(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return oc(t)&&Js(t.arrayValue,this.value)}}]),n}(Ec),Uc=function(e){fe(n,e);var t=ve(n);function n(e,r){return ie(this,n),t.call(this,e,"in",r)}return ue(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Js(this.value.arrayValue,t)}}]),n}(Ec),Bc=function(e){fe(n,e);var t=ve(n);function n(e,r){return ie(this,n),t.call(this,e,"not-in",r)}return ue(n,[{key:"matches",value:function(e){if(Js(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Js(this.value.arrayValue,t)}}]),n}(Ec),jc=function(e){fe(n,e);var t=ve(n);function n(e,r){return ie(this,n),t.call(this,e,"array-contains-any",r)}return ue(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!oc(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Js(t.value.arrayValue,e)}))}}]),n}(Ec),qc=ue((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;ie(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.he=null}));function Kc(e){return new qc(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Gc(e){var t=eu(e);if(null===t.he){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return Ac(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Yu(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return nc(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return nc(e)})).join(",")),t.he=n}return t.he}function Qc(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!xc(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!Pc(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!wc(e.startAt,t.startAt)&&wc(e.endAt,t.endAt)}function Wc(e){return xu.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Hc(e,t){return e.filters.filter((function(e){return e instanceof Ec&&e.field.isEqual(t)}))}function $c(e,t,n){var r,i=Ys,a=!0,o=se(Hc(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Ys,c=!0;switch(u.op){case"<":case"<=":s=hc(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=Ys}vc({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];vc({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function Yc(e,t,n){var r,i=$s,a=!0,o=se(Hc(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=$s,c=!0;switch(u.op){case">=":case">":s=dc(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=$s}pc({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];pc({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var Zc=ue((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;ie(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.Pe=null,this.Ie=null,this.startAt,this.endAt}));function Xc(e,t,n,r,i,a,o,u){return new Zc(e,t,n,r,i,a,o,u)}function Jc(e){return new Zc(e)}function el(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function tl(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function nl(e){var t,n=se(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function rl(e){return null!==e.collectionGroup}function il(e){var t=eu(e);if(null===t.Pe){t.Pe=[];var n=nl(t),r=tl(t);if(null!==n&&null===r)n.isKeyField()||t.Pe.push(new _c(n)),t.Pe.push(new _c(_u.keyField(),"asc"));else{var i,a=!1,o=se(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.Pe.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.Pe.push(new _c(_u.keyField(),s))}}}return t.Pe}function al(e){var t=eu(e);if(!t.Ie)if("F"===t.limitType)t.Ie=Kc(t.path,t.collectionGroup,il(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=se(il(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new _c(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new kc(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new kc(t.startAt.position,t.startAt.inclusive):null;t.Ie=Kc(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.Ie}function ol(e,t){t.getFirstInequalityField(),nl(e);var n=e.filters.concat([t]);return new Zc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function ul(e,t,n){return new Zc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function sl(e,t){return Qc(al(e),al(t))&&e.limitType===t.limitType}function cl(e){return"".concat(Gc(al(e)),"|lt:").concat(e.limitType)}function ll(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return Rc(e)})).join(", "),"]")),Yu(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return nc(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return nc(e)})).join(",")),"Target(".concat(t,")")}(al(e)),"; limitType=").concat(e.limitType,")")}function fl(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):xu.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=se(il(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=se(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=bc(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,il(e),t))&&!(e.endAt&&!function(e,t,n){var r=bc(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,il(e),t))}(e,t)}function hl(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function dl(e){return function(t,n){var r,i=!1,a=se(il(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=vl(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function vl(e,t,n){var r=e.field.isKeyField()?xu.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?ec(r,i):Xo()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Xo()}}var pl=function(){function e(t,n){ie(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return ue(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=se(n);try{for(i.s();!(r=i.n()).done;){var a=_(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Ns(this.inner,(function(t,n){var r,i=se(n);try{for(i.s();!(r=i.n()).done;){var a=_(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Ds(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),yl=new As(xu.comparator);function ml(){return yl}var gl=new As(xu.comparator);function kl(){for(var e=gl,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function bl(e){var t=gl;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function wl(){return xl()}function _l(){return xl()}function xl(){return new pl((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var Sl=new As(xu.comparator),El=new Rs(xu.comparator);function Il(){for(var e=El,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var Tl=new Rs(vu);function Cl(){return Tl}function Nl(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zu(t)?"-0":t}}function Dl(e){return{integerValue:""+e}}function Al(e,t){return Xu(t)?Dl(t):Nl(e,t)}var Pl=ue((function e(){ie(this,e),this._=void 0}));function Ol(e,t,n){return e instanceof Ml?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Ks(t)&&(t=Gs(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Fl?Vl(e,t):e instanceof zl?Ul(e,t):function(e,t){var n=Ll(e,t),r=jl(n)+jl(e.Te);return ac(n)&&ac(e.Te)?Dl(r):Nl(e.serializer,r)}(e,t)}function Rl(e,t,n){return e instanceof Fl?Vl(e,t):e instanceof zl?Ul(e,t):n}function Ll(e,t){return e instanceof Bl?function(e){return ac(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}var Ml=function(e){fe(n,e);var t=ve(n);function n(){return ie(this,n),t.apply(this,arguments)}return ue(n)}(Pl),Fl=function(e){fe(n,e);var t=ve(n);function n(e){var r;return ie(this,n),(r=t.call(this)).elements=e,r}return ue(n)}(Pl);function Vl(e,t){var n,r=ql(t),i=se(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return Xs(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var zl=function(e){fe(n,e);var t=ve(n);function n(e){var r;return ie(this,n),(r=t.call(this)).elements=e,r}return ue(n)}(Pl);function Ul(e,t){var n,r=ql(t),i=se(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!Xs(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Bl=function(e){fe(n,e);var t=ve(n);function n(e,r){var i;return ie(this,n),(i=t.call(this)).serializer=e,i.Te=r,i}return ue(n)}(Pl);function jl(e){return js(e.integerValue||e.doubleValue)}function ql(e){return oc(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Kl=ue((function e(t,n){ie(this,e),this.field=t,this.transform=n}));var Gl=ue((function e(t,n){ie(this,e),this.version=t,this.transformResults=n})),Ql=function(){function e(t,n){ie(this,e),this.updateTime=t,this.exists=n}return ue(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Wl(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Hl=ue((function e(){ie(this,e)}));function $l(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new sf(e.key,Ql.none()):new ef(e.key,e.data,Ql.none());var n,r=e.data,i=yc.empty(),a=new Rs(_u.comparator),o=se(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new tf(e.key,i,new Fs(a.toArray()),Ql.none())}function Yl(e,t,n){e instanceof ef?function(e,t,n){var r=e.value.clone(),i=rf(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof tf?function(e,t,n){if(Wl(e.precondition,t)){var r=rf(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(nf(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Zl(e,t,n,r){return e instanceof ef?function(e,t,n,r){if(!Wl(e.precondition,t))return n;var i=e.value.clone(),a=af(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof tf?function(e,t,n,r){if(!Wl(e.precondition,t))return n;var i=af(e.fieldTransforms,r,t),a=t.data;return a.setAll(nf(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return Wl(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Xl(e,t){var n,r=null,i=se(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=Ll(a.transform,o||null);null!=u&&(null===r&&(r=yc.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function Jl(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&pu(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Fl&&t instanceof Fl||e instanceof zl&&t instanceof zl?pu(e.elements,t.elements,Xs):e instanceof Bl&&t instanceof Bl?Xs(e.Te,t.Te):e instanceof Ml&&t instanceof Ml}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var ef=function(e){fe(n,e);var t=ve(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return ie(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return ue(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Hl),tf=function(e){fe(n,e);var t=ve(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return ie(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return ue(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(Hl);function nf(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function rf(e,t,n){var r=new Map;Jo(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,Rl(o,u,n[i]))}return r}function af(e,t,n){var r,i=new Map,a=se(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,Ol(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var of,uf,sf=function(e){fe(n,e);var t=ve(n);function n(e,r){var i;return ie(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return ue(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Hl),cf=function(e){fe(n,e);var t=ve(n);function n(e,r){var i;return ie(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return ue(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Hl),lf=function(){function e(t,n,r,i){ie(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return ue(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Yl(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=se(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=Zl(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=se(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=Zl(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=_l();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=$l(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(gu.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Il())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&pu(this.mutations,e.mutations,(function(e,t){return Jl(e,t)}))&&pu(this.baseMutations,e.baseMutations,(function(e,t){return Jl(e,t)}))}}]),e}(),ff=function(){function e(t,n,r,i){ie(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return ue(e,null,[{key:"from",value:function(t,n,r){Jo(t.mutations.length===r.length);for(var i=Sl,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),hf=function(){function e(t,n){ie(this,e),this.largestBatchId=t,this.mutation=n}return ue(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),df=ue((function e(t,n){ie(this,e),this.count=t,this.unchangedNames=n}));function vf(e){switch(e){default:return Xo();case tu.CANCELLED:case tu.UNKNOWN:case tu.DEADLINE_EXCEEDED:case tu.RESOURCE_EXHAUSTED:case tu.INTERNAL:case tu.UNAVAILABLE:case tu.UNAUTHENTICATED:return!1;case tu.INVALID_ARGUMENT:case tu.NOT_FOUND:case tu.ALREADY_EXISTS:case tu.PERMISSION_DENIED:case tu.FAILED_PRECONDITION:case tu.ABORTED:case tu.OUT_OF_RANGE:case tu.UNIMPLEMENTED:case tu.DATA_LOSS:return!0}}function pf(e){if(void 0===e)return $o("GRPC error has no .code"),tu.UNKNOWN;switch(e){case of.OK:return tu.OK;case of.CANCELLED:return tu.CANCELLED;case of.UNKNOWN:return tu.UNKNOWN;case of.DEADLINE_EXCEEDED:return tu.DEADLINE_EXCEEDED;case of.RESOURCE_EXHAUSTED:return tu.RESOURCE_EXHAUSTED;case of.INTERNAL:return tu.INTERNAL;case of.UNAVAILABLE:return tu.UNAVAILABLE;case of.UNAUTHENTICATED:return tu.UNAUTHENTICATED;case of.INVALID_ARGUMENT:return tu.INVALID_ARGUMENT;case of.NOT_FOUND:return tu.NOT_FOUND;case of.ALREADY_EXISTS:return tu.ALREADY_EXISTS;case of.PERMISSION_DENIED:return tu.PERMISSION_DENIED;case of.FAILED_PRECONDITION:return tu.FAILED_PRECONDITION;case of.ABORTED:return tu.ABORTED;case of.OUT_OF_RANGE:return tu.OUT_OF_RANGE;case of.UNIMPLEMENTED:return tu.UNIMPLEMENTED;case of.DATA_LOSS:return tu.DATA_LOSS;default:return Xo()}}(uf=of||(of={}))[uf.OK=0]="OK",uf[uf.CANCELLED=1]="CANCELLED",uf[uf.UNKNOWN=2]="UNKNOWN",uf[uf.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",uf[uf.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",uf[uf.NOT_FOUND=5]="NOT_FOUND",uf[uf.ALREADY_EXISTS=6]="ALREADY_EXISTS",uf[uf.PERMISSION_DENIED=7]="PERMISSION_DENIED",uf[uf.UNAUTHENTICATED=16]="UNAUTHENTICATED",uf[uf.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",uf[uf.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",uf[uf.ABORTED=10]="ABORTED",uf[uf.OUT_OF_RANGE=11]="OUT_OF_RANGE",uf[uf.UNIMPLEMENTED=12]="UNIMPLEMENTED",uf[uf.INTERNAL=13]="INTERNAL",uf[uf.UNAVAILABLE=14]="UNAVAILABLE",uf[uf.DATA_LOSS=15]="DATA_LOSS";var yf=function(){function e(){ie(this,e),this.onExistenceFilterMismatchCallbacks=new Map}return ue(e,[{key:"onExistenceFilterMismatch",value:function(e){var t=this,n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),function(){return t.onExistenceFilterMismatchCallbacks.delete(n)}}},{key:"notifyOnExistenceFilterMismatch",value:function(e){this.onExistenceFilterMismatchCallbacks.forEach((function(t){return t(e)}))}}],[{key:"instance",get:function(){return mf}},{key:"getOrCreateInstance",value:function(){return null===mf&&(mf=new e),mf}}]),e}(),mf=null;function gf(){return new TextEncoder}var kf=new jo([4294967295,4294967295],0);function bf(e){var t=gf().encode(e),n=new Bo;return n.update(t),new Uint8Array(n.digest())}function wf(e){var t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new jo([n,r],0),new jo([i,a],0)]}var _f=function(){function e(t,n,r){if(ie(this,e),this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new xf("Invalid padding: ".concat(n));if(r<0)throw new xf("Invalid hash count: ".concat(r));if(t.length>0&&0===this.hashCount)throw new xf("Invalid hash count: ".concat(r));if(0===t.length&&0!==n)throw new xf("Invalid padding when bitmap length is 0: ".concat(n));this.de=8*t.length-n,this.Ae=jo.fromNumber(this.de)}return ue(e,[{key:"Re",value:function(e,t,n){var r=e.add(t.multiply(jo.fromNumber(n)));return 1===r.compare(kf)&&(r=new jo([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ae).toNumber()}},{key:"Ve",value:function(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}},{key:"mightContain",value:function(e){if(0===this.de)return!1;for(var t=_(wf(bf(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Re(n,r,i);if(!this.Ve(a))return!1}return!0}},{key:"insert",value:function(e){if(0!==this.de)for(var t=_(wf(bf(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Re(n,r,i);this.me(a)}}},{key:"me",value:function(e){var t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}],[{key:"create",value:function(t,n,r){var i=t%8==0?0:8-t%8,a=new e(new Uint8Array(Math.ceil(t/8)),i,n);return r.forEach((function(e){return a.insert(e)})),a}}]),e}(),xf=function(e){fe(n,e);var t=ve(n);function n(){var e;return ie(this,n),(e=t.apply(this,arguments)).name="BloomFilterError",e}return ue(n)}(ye(Error)),Sf=function(){function e(t,n,r,i,a){ie(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return ue(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,Ef.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(gu.min(),i,new As(vu),ml(),Il())}}]),e}(),Ef=function(){function e(t,n,r,i,a){ie(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return ue(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,Il(),Il(),Il())}}]),e}(),If=ue((function e(t,n,r,i){ie(this,e),this.fe=t,this.removedTargetIds=n,this.key=r,this.ge=i})),Tf=ue((function e(t,n){ie(this,e),this.targetId=t,this.pe=n})),Cf=ue((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:zs.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;ie(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),Nf=function(){function e(){ie(this,e),this.ye=0,this.we=Pf(),this.Se=zs.EMPTY_BYTE_STRING,this.be=!1,this.De=!0}return ue(e,[{key:"current",get:function(){return this.be}},{key:"resumeToken",get:function(){return this.Se}},{key:"ve",get:function(){return 0!==this.ye}},{key:"Ce",get:function(){return this.De}},{key:"Fe",value:function(e){e.approximateByteSize()>0&&(this.De=!0,this.Se=e)}},{key:"Me",value:function(){var e=Il(),t=Il(),n=Il();return this.we.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Xo()}})),new Ef(this.Se,this.be,e,t,n)}},{key:"xe",value:function(){this.De=!1,this.we=Pf()}},{key:"Oe",value:function(e,t){this.De=!0,this.we=this.we.insert(e,t)}},{key:"Ne",value:function(e){this.De=!0,this.we=this.we.remove(e)}},{key:"Be",value:function(){this.ye+=1}},{key:"Le",value:function(){this.ye-=1}},{key:"ke",value:function(){this.De=!0,this.be=!0}}]),e}(),Df=function(){function e(t){ie(this,e),this.qe=t,this.Qe=new Map,this.Ke=ml(),this.$e=Af(),this.Ue=new As(vu)}return ue(e,[{key:"We",value:function(e){var t,n=se(e.fe);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.ge&&e.ge.isFoundDocument()?this.Ge(r,e.ge):this.ze(r,e.key,e.ge)}}catch(u){n.e(u)}finally{n.f()}var i,a=se(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.ze(o,e.key,e.ge)}}catch(u){a.e(u)}finally{a.f()}}},{key:"je",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.He(n);switch(e.state){case 0:t.Je(n)&&r.Fe(e.resumeToken);break;case 1:r.Le(),r.ve||r.xe(),r.Fe(e.resumeToken);break;case 2:r.Le(),r.ve||t.removeTarget(n);break;case 3:t.Je(n)&&(r.ke(),r.Fe(e.resumeToken));break;case 4:t.Je(n)&&(t.Ye(n),r.Fe(e.resumeToken));break;default:Xo()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Qe.forEach((function(e,r){n.Je(r)&&t(r)}))}},{key:"Ze",value:function(e){var t,n,r=e.targetId,i=e.pe.count,a=this.Xe(r);if(a){var o=a.target;if(Wc(o))if(0===i){var u=new xu(o.path);this.ze(r,u,gc.newNoDocument(u,gu.min()))}else Jo(1===i);else{var s=this.et(r);if(s!==i){var c=this.tt(e,s);if(0!==c.status){this.Ye(r);var l=2===c.status?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(r,l)}null===(t=yf.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n,r){var i,a,o,u,s,c,l={localCacheCount:n,existenceFilterCount:r.count},f=r.unchangedNames;return f&&(l.bloomFilter={applied:0===e,hashCount:null!==(i=null==f?void 0:f.hashCount)&&void 0!==i?i:0,bitmapLength:null!==(u=null===(o=null===(a=null==f?void 0:f.bits)||void 0===a?void 0:a.bitmap)||void 0===o?void 0:o.length)&&void 0!==u?u:0,padding:null!==(c=null===(s=null==f?void 0:f.bits)||void 0===s?void 0:s.padding)&&void 0!==c?c:0},t&&(l.bloomFilter.mightContain=t)),l}(c.status,null!==(n=c.nt)&&void 0!==n?n:null,s,e.pe))}}}}},{key:"tt",value:function(e,t){var n=this,r=e.pe,i=r.unchangedNames,a=r.count;if(!i||!i.bits)return{status:1};var o,u,s=i.bits,c=s.bitmap,l=void 0===c?"":c,f=s.padding,h=void 0===f?0:f,d=i.hashCount,v=void 0===d?0:d;try{o=qs(l).toUint8Array()}catch(e){if(e instanceof Vs)return Yo("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),{status:1};throw e}try{u=new _f(o,h,v)}catch(e){return Yo(e instanceof xf?"BloomFilter error: ":"Applying bloom filter failed: ",e),{status:1}}var p=function(e){var t=n.qe.rt();return u.mightContain("projects/".concat(t.projectId,"/databases/").concat(t.database,"/documents/").concat(e))};return 0===u.de?{status:1}:{status:a===t-this.it(e.targetId,p)?0:2,nt:p}}},{key:"it",value:function(e,t){var n=this,r=this.qe.getRemoteKeysForTarget(e),i=0;return r.forEach((function(r){t(r.path.canonicalString())||(n.ze(e,r,null),i++)})),i}},{key:"st",value:function(e){var t=this,n=new Map;this.Qe.forEach((function(r,i){var a=t.Xe(i);if(a){if(r.current&&Wc(a.target)){var o=new xu(a.target.path);null!==t.Ke.get(o)||t.ot(i,o)||t.ze(i,o,gc.newNoDocument(o,e))}r.Ce&&(n.set(i,r.Me()),r.xe())}}));var r=Il();this.$e.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Xe(e);return!n||"TargetPurposeLimboResolution"===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.Ke.forEach((function(t,n){return n.setReadTime(e)}));var i=new Sf(e,n,this.Ue,this.Ke,r);return this.Ke=ml(),this.$e=Af(),this.Ue=new As(vu),i}},{key:"Ge",value:function(e,t){if(this.Je(e)){var n=this.ot(e,t.key)?2:0;this.He(e).Oe(t.key,n),this.Ke=this.Ke.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e))}}},{key:"ze",value:function(e,t,n){if(this.Je(e)){var r=this.He(e);this.ot(e,t)?r.Oe(t,1):r.Ne(t),this.$e=this.$e.insert(t,this._t(t).delete(e)),n&&(this.Ke=this.Ke.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Qe.delete(e)}},{key:"et",value:function(e){var t=this.He(e).Me();return this.qe.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Be",value:function(e){this.He(e).Be()}},{key:"He",value:function(e){var t=this.Qe.get(e);return t||(t=new Nf,this.Qe.set(e,t)),t}},{key:"_t",value:function(e){var t=this.$e.get(e);return t||(t=new Rs(vu),this.$e=this.$e.insert(e,t)),t}},{key:"Je",value:function(e){var t=null!==this.Xe(e);return t||Ho("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Xe",value:function(e){var t=this.Qe.get(e);return t&&t.ve?null:this.qe.ut(e)}},{key:"Ye",value:function(e){var t=this;this.Qe.set(e,new Nf),this.qe.getRemoteKeysForTarget(e).forEach((function(n){t.ze(e,n,null)}))}},{key:"ot",value:function(e,t){return this.qe.getRemoteKeysForTarget(e).has(t)}}]),e}();function Af(){return new As(xu.comparator)}function Pf(){return new As(xu.comparator)}var Of={asc:"ASCENDING",desc:"DESCENDING"},Rf={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Lf={and:"AND",or:"OR"},Mf=ue((function e(t,n){ie(this,e),this.databaseId=t,this.useProto3Json=n}));function Ff(e,t){return e.useProto3Json||Yu(t)?t:{value:t}}function Vf(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function zf(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Uf(e,t){return Vf(e,t.toTimestamp())}function Bf(e){return Jo(!!e),gu.fromTimestamp(function(e){var t=Bs(e);return new mu(t.seconds,t.nanos)}(e))}function jf(e,t){return function(e){return new bu(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function qf(e){var t=bu.fromString(e);return Jo(hh(t)),t}function Kf(e,t){return jf(e.databaseId,t.path)}function Gf(e,t){var n=qf(t);if(n.get(1)!==e.databaseId.projectId)throw new nu(tu.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new nu(tu.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new xu($f(n))}function Qf(e,t){return jf(e.databaseId,t)}function Wf(e){var t=qf(e);return 4===t.length?bu.emptyPath():$f(t)}function Hf(e){return new bu(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function $f(e){return Jo(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Yf(e,t,n){return{name:Kf(e,t),fields:n.value.mapValue.fields}}function Zf(e,t,n){var r=Gf(e,t.name),i=Bf(t.updateTime),a=t.createTime?Bf(t.createTime):gu.min(),o=new yc({mapValue:{fields:t.fields}}),u=gc.newFoundDocument(r,i,a,o);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function Xf(e,t){return"found"in t?function(e,t){Jo(!!t.found),t.found.name,t.found.updateTime;var n=Gf(e,t.found.name),r=Bf(t.found.updateTime),i=t.found.createTime?Bf(t.found.createTime):gu.min(),a=new yc({mapValue:{fields:t.found.fields}});return gc.newFoundDocument(n,r,i,a)}(e,t):"missing"in t?function(e,t){Jo(!!t.missing),Jo(!!t.readTime);var n=Gf(e,t.missing),r=Bf(t.readTime);return gc.newNoDocument(n,r)}(e,t):Xo()}function Jf(e,t){var n;if(t instanceof ef)n={update:Yf(e,t.key,t.value)};else if(t instanceof sf)n={delete:Kf(e,t.key)};else if(t instanceof tf)n={update:Yf(e,t.key,t.data),updateMask:fh(t.fieldMask)};else{if(!(t instanceof cf))return Xo();n={verify:Kf(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Ml)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Fl)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof zl)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Bl)return{fieldPath:t.field.canonicalString(),increment:n.Te};throw Xo()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Uf(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Xo()}(e,t.precondition)),n}function eh(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Ql.updateTime(Bf(e.updateTime)):void 0!==e.exists?Ql.exists(e.exists):Ql.none()}(t.currentDocument):Ql.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)Jo("REQUEST_TIME"===t.setToServerValue),n=new Ml;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Fl(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new zl(i)}else"increment"in t?n=new Bl(e,t.increment):Xo();var a=_u.fromServerFormat(t.fieldPath);return new Kl(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=Gf(e,t.update.name),a=new yc({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new Fs(t.map((function(e){return _u.fromServerFormat(e)})))}(t.updateMask);return new tf(i,a,o,n,r)}return new ef(i,a,n,r)}if(t.delete){var u=Gf(e,t.delete);return new sf(u,n)}if(t.verify){var s=Gf(e,t.verify);return new cf(s,n)}return Xo()}function th(e,t){return{documents:[Qf(e,t.path)]}}function nh(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Qf(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Qf(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return lh(Ic.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:sh(e.field),direction:ah(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o=Ff(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function rh(e){var t=Wf(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Jo(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=ih(e);return t instanceof Ic&&Nc(t)?t.getFilters():[t]}(n.where));var u=[];n.orderBy&&(u=function(e){return e.map((function(e){return function(e){return new _c(ch(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)}))}(n.orderBy));var s=null;n.limit&&(s=function(e){var t;return Yu(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new kc(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new kc(n,t)}(n.endAt)),Xc(t,i,u,o,s,"F",c,l)}function ih(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=ch(e.unaryFilter.field);return Ec.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=ch(e.unaryFilter.field);return Ec.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=ch(e.unaryFilter.field);return Ec.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=ch(e.unaryFilter.field);return Ec.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Xo()}}(e):void 0!==e.fieldFilter?function(e){return Ec.create(ch(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Xo()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Ic.create(e.compositeFilter.filters.map((function(e){return ih(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Xo()}}(e.compositeFilter.op))}(e):Xo()}function ah(e){return Of[e]}function oh(e){return Rf[e]}function uh(e){return Lf[e]}function sh(e){return{fieldPath:e.canonicalString()}}function ch(e){return _u.fromServerFormat(e.fieldPath)}function lh(e){return e instanceof Ec?function(e){if("=="===e.op){if(sc(e.value))return{unaryFilter:{field:sh(e.field),op:"IS_NAN"}};if(uc(e.value))return{unaryFilter:{field:sh(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(sc(e.value))return{unaryFilter:{field:sh(e.field),op:"IS_NOT_NAN"}};if(uc(e.value))return{unaryFilter:{field:sh(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:sh(e.field),op:oh(e.op),value:e.value}}}(e):e instanceof Ic?function(e){var t=e.getFilters().map((function(e){return lh(e)}));return 1===t.length?t[0]:{compositeFilter:{op:uh(e.op),filters:t}}}(e):Xo()}function fh(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function hh(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var dh=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:gu.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:gu.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:zs.EMPTY_BYTE_STRING,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;ie(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=s}return ue(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}},{key:"withExpectedCount",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}]),e}(),vh=ue((function e(t){ie(this,e),this.ct=t}));function ph(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:yh(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Kf(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Vf(e,t.version.toTimestamp()),createTime:Vf(e,t.createTime.toTimestamp())}}(e.ct,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:mh(t.version)};else{if(!t.isUnknownDocument())return Xo();r.unknownDocument={path:n.path.toArray(),version:mh(t.version)}}return r}function yh(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function mh(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function gh(e){var t=new mu(e.seconds,e.nanoseconds);return gu.fromTimestamp(t)}function kh(e,t){for(var n=(t.baseMutations||[]).map((function(t){return eh(e.ct,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return eh(e.ct,t)})),u=mu.fromMillis(t.localWriteTimeMs);return new lf(t.batchId,u,n,o)}function bh(e){var t,n=gh(e.readTime),r=void 0!==e.lastLimboFreeSnapshotVersion?gh(e.lastLimboFreeSnapshotVersion):gu.min();return t=function(e){return void 0!==e.documents}(e.query)?function(e){return Jo(1===e.documents.length),al(Jc(Wf(e.documents[0])))}(e.query):function(e){return al(rh(e))}(e.query),new dh(t,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,n,r,zs.fromBase64String(e.resumeToken))}function wh(e,t){var n,r=mh(t.snapshotVersion),i=mh(t.lastLimboFreeSnapshotVersion);n=Wc(t.target)?th(e.ct,t.target):nh(e.ct,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Gc(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function _h(e){var t=rh({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?ul(t,t.limit,"L"):t}function xh(e,t){return new hf(t.largestBatchId,eh(e.ct,t.overlayMutation))}function Sh(e,t){var n=t.path.lastSegment();return[e,Ju(t.path.popLast()),n]}function Eh(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:mh(r.readTime),documentKey:Ju(r.documentKey.path),largestBatchId:r.largestBatchId}}var Ih=function(){function e(){ie(this,e)}return ue(e,[{key:"getBundleMetadata",value:function(e,t){return Th(e).get(t).next((function(e){if(e)return function(e){return{id:e.bundleId,createTime:gh(e.createTime),version:e.version}}(e)}))}},{key:"saveBundleMetadata",value:function(e,t){return Th(e).put(function(e){return{bundleId:e.id,createTime:mh(Bf(e.createTime)),version:e.version}}(t))}},{key:"getNamedQuery",value:function(e,t){return Ch(e).get(t).next((function(e){if(e)return function(e){return{name:e.name,query:_h(e.bundledQuery),readTime:gh(e.readTime)}}(e)}))}},{key:"saveNamedQuery",value:function(e,t){return Ch(e).put(function(e){return{name:e.name,readTime:mh(Bf(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function Th(e){return Ts(e,"bundles")}function Ch(e){return Ts(e,"namedQueries")}var Nh=function(){function e(t,n){ie(this,e),this.serializer=t,this.userId=n}return ue(e,[{key:"getOverlay",value:function(e,t){var n=this;return Dh(e).get(Sh(this.userId,t)).next((function(e){return e?xh(n.serializer,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=wl();return Fu.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new hf(t,a);i.push(r.ht(e,o))})),Fu.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(Ju(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(Dh(e).J("collectionPathOverlayIndex",i))})),Fu.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=wl(),a=Ju(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Dh(e).G("collectionPathOverlayIndex",o).next((function(e){var t,n=se(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=xh(r.serializer,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=wl(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Dh(e).Z({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=xh(a.serializer,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"ht",value:function(e,t){return Dh(e).put(function(e,t,n){var r=_(Sh(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Jf(e.ct,n.mutation)}}(this.serializer,this.userId,t))}}],[{key:"lt",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function Dh(e){return Ts(e,"documentOverlays")}var Ah=function(){function e(){ie(this,e)}return ue(e,[{key:"Pt",value:function(e,t){this.It(e,t),t.Tt()}},{key:"It",value:function(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(js(e.integerValue));else if("doubleValue"in e){var n=js(e.doubleValue);isNaN(n)?this.Et(t,13):(this.Et(t,15),Zu(n)?t.dt(0):t.dt(n))}else if("timestampValue"in e){var r=e.timestampValue;this.Et(t,20),"string"==typeof r?t.At(r):(t.At("".concat(r.seconds||"")),t.dt(r.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(qs(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.Et(t,45),t.dt(i.latitude||0),t.dt(i.longitude||0)}else"mapValue"in e?fc(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):Xo()}},{key:"Rt",value:function(e,t){this.Et(t,25),this.St(e,t)}},{key:"St",value:function(e,t){t.At(e)}},{key:"yt",value:function(e,t){var n=e.fields||{};this.Et(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.Rt(a,t),this.It(n[a],t)}}},{key:"wt",value:function(e,t){var n=e.values||[];this.Et(t,50);var r,i=se(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.It(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"gt",value:function(e,t){var n=this;this.Et(t,37),xu.fromName(e).path.forEach((function(e){n.Et(t,60),n.St(e,t)}))}},{key:"Et",value:function(e,t){e.dt(t)}},{key:"Vt",value:function(e){e.dt(2)}}]),e}();function Ph(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Oh(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=Ph(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Ah.bt=new Ah;var Rh=function(){function e(){ie(this,e),this.buffer=new Uint8Array(1024),this.position=0}return ue(e,[{key:"Dt",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.vt(n.value),n=t.next();this.Ct()}},{key:"Ft",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Mt(n.value),n=t.next();this.xt()}},{key:"Ot",value:function(e){var t,n=se(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.vt(i);else if(i<2048)this.vt(960|i>>>6),this.vt(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.vt(480|i>>>12),this.vt(128|63&i>>>6),this.vt(128|63&i);else{var a=r.codePointAt(0);this.vt(240|a>>>18),this.vt(128|63&a>>>12),this.vt(128|63&a>>>6),this.vt(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Ct()}},{key:"Nt",value:function(e){var t,n=se(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Mt(i);else if(i<2048)this.Mt(960|i>>>6),this.Mt(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Mt(480|i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i);else{var a=r.codePointAt(0);this.Mt(240|a>>>18),this.Mt(128|63&a>>>12),this.Mt(128|63&a>>>6),this.Mt(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.xt()}},{key:"Bt",value:function(e){var t=this.Lt(e),n=Oh(t);this.kt(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"qt",value:function(e){var t=this.Lt(e),n=Oh(t);this.kt(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"Qt",value:function(){this.Kt(255),this.Kt(255)}},{key:"$t",value:function(){this.Ut(255),this.Ut(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Wt",value:function(){return this.buffer.slice(0,this.position)}},{key:"Lt",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"vt",value:function(e){var t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}},{key:"Mt",value:function(e){var t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}},{key:"Ct",value:function(){this.Kt(0),this.Kt(1)}},{key:"xt",value:function(){this.Ut(0),this.Ut(1)}},{key:"Kt",value:function(e){this.kt(1),this.buffer[this.position++]=e}},{key:"Ut",value:function(e){this.kt(1),this.buffer[this.position++]=~e}},{key:"kt",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),Lh=function(){function e(t){ie(this,e),this.Gt=t}return ue(e,[{key:"ft",value:function(e){this.Gt.Dt(e)}},{key:"At",value:function(e){this.Gt.Ot(e)}},{key:"dt",value:function(e){this.Gt.Bt(e)}},{key:"Tt",value:function(){this.Gt.Qt()}}]),e}(),Mh=function(){function e(t){ie(this,e),this.Gt=t}return ue(e,[{key:"ft",value:function(e){this.Gt.Ft(e)}},{key:"At",value:function(e){this.Gt.Nt(e)}},{key:"dt",value:function(e){this.Gt.qt(e)}},{key:"Tt",value:function(){this.Gt.$t()}}]),e}(),Fh=function(){function e(){ie(this,e),this.Gt=new Rh,this.zt=new Lh(this.Gt),this.jt=new Mh(this.Gt)}return ue(e,[{key:"seed",value:function(e){this.Gt.seed(e)}},{key:"Ht",value:function(e){return 0===e?this.zt:this.jt}},{key:"Wt",value:function(){return this.Gt.Wt()}},{key:"reset",value:function(){this.Gt.reset()}}]),e}(),Vh=function(){function e(t,n,r,i){ie(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return ue(e,[{key:"Jt",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function zh(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=Uh(e.arrayValue,t.arrayValue))?n:0!==(n=Uh(e.directionalValue,t.directionalValue))?n:xu.comparator(e.documentKey,t.documentKey)}function Uh(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var Bh=function(){function e(t){ie(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Yt=t.orderBy,this.Zt=[];var n,r=se(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.isInequality()?this.Xt=i:this.Zt.push(i)}}catch(a){r.e(a)}finally{r.f()}}return ue(e,[{key:"en",value:function(e){Jo(e.collectionGroup===this.collectionId);var t=Eu(e);if(void 0!==t&&!this.tn(t))return!1;for(var n=Iu(e),r=new Set,i=0,a=0;i<n.length&&this.tn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(void 0!==this.Xt){if(!r.has(this.Xt.field.canonicalString())){var o=n[i];if(!this.nn(this.Xt,o)||!this.rn(this.Yt[a++],o))return!1}++i}for(;i<n.length;++i){var u=n[i];if(a>=this.Yt.length||!this.rn(this.Yt[a++],u))return!1}return!0}},{key:"tn",value:function(e){var t,n=se(this.Zt);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.nn(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"nn",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"rn",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}();function jh(e){var t,n;if(Jo(e instanceof Ec||e instanceof Ic),e instanceof Ec){if(e instanceof Uc){var r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((function(t){return Ec.create(e.field,"==",t)})))||[];return Ic.create(r,"or")}return e}var i=e.filters.map((function(e){return jh(e)}));return Ic.create(i,e.op)}function qh(e){if(0===e.getFilters().length)return[];var t=Wh(jh(e));return Jo(Qh(t)),Kh(t)||Gh(t)?[t]:t.getFilters()}function Kh(e){return e instanceof Ec}function Gh(e){return e instanceof Ic&&Nc(e)}function Qh(e){return Kh(e)||Gh(e)||function(e){if(e instanceof Ic&&Cc(e)){var t,n=se(e.getFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!Kh(r)&&!Gh(r))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}return!1}(e)}function Wh(e){if(Jo(e instanceof Ec||e instanceof Ic),e instanceof Ec)return e;if(1===e.filters.length)return Wh(e.filters[0]);var t=e.filters.map((function(e){return Wh(e)})),n=Ic.create(t,e.op);return Qh(n=Yh(n))?n:(Jo(n instanceof Ic),Jo(Tc(n)),Jo(n.filters.length>1),n.filters.reduce((function(e,t){return Hh(e,t)})))}function Hh(e,t){var n;return Jo(e instanceof Ec||e instanceof Ic),Jo(t instanceof Ec||t instanceof Ic),n=e instanceof Ec?t instanceof Ec?function(e,t){return Ic.create([e,t],"and")}(e,t):$h(e,t):t instanceof Ec?$h(t,e):function(e,t){if(Jo(e.filters.length>0&&t.filters.length>0),Tc(e)&&Tc(t))return Oc(e,t.getFilters());var n=Cc(e)?e:t,r=Cc(e)?t:e,i=n.filters.map((function(e){return Hh(e,r)}));return Ic.create(i,"or")}(e,t),Yh(n)}function $h(e,t){if(Tc(t))return Oc(t,e.getFilters());var n=t.filters.map((function(t){return Hh(e,t)}));return Ic.create(n,"or")}function Yh(e){if(Jo(e instanceof Ec||e instanceof Ic),e instanceof Ec)return e;var t=e.getFilters();if(1===t.length)return Yh(t[0]);if(Dc(e))return e;var n=t.map((function(e){return Yh(e)})),r=[];return n.forEach((function(t){t instanceof Ec?r.push(t):t instanceof Ic&&(t.op===e.op?r.push.apply(r,x(t.filters)):r.push(t))})),1===r.length?r[0]:Ic.create(r,e.op)}var Zh=function(){function e(){ie(this,e),this.sn=new Xh}return ue(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.sn.add(t),Fu.resolve()}},{key:"getCollectionParents",value:function(e,t){return Fu.resolve(this.sn.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Fu.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Fu.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Fu.resolve(null)}},{key:"getIndexType",value:function(e,t){return Fu.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Fu.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Fu.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Fu.resolve(Au.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return Fu.resolve(Au.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Fu.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Fu.resolve()}}]),e}(),Xh=function(){function e(){ie(this,e),this.index={}}return ue(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Rs(bu.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Rs(bu.comparator)).toArray()}}]),e}(),Jh=new Uint8Array(0),ed=function(){function e(t,n){ie(this,e),this.user=t,this.databaseId=n,this.on=new Xh,this._n=new pl((function(e){return Gc(e)}),(function(e,t){return Qc(e,t)})),this.uid=t.uid||""}return ue(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.on.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.on.add(t)}));var a={collectionId:r,parent:Ju(i)};return td(e).put(a)}return Fu.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[yu(t),""],!1,!0);return td(e).G(r).next((function(e){var r,i=se(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(ns(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=rd(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=id(e);return a.next((function(e){o.put(Eh(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=rd(e),r=id(e),i=nd(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=nd(e),i=!0,a=new Map;return Fu.forEach(this.an(t),(function(t){return n.un(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=Il(),o=[];return Fu.forEach(a,(function(i,a){Ho("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(","))}(i)," to execute ").concat(Gc(t)));var u=function(e,t){var n=Eu(t);if(void 0===n)return null;var r,i=se(Hc(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),s=function(e,t){var n,r=new Map,i=se(Iu(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=se(Hc(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=[],i=!0,a=se(Iu(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?$c(e,o.fieldPath,e.startAt):Yc(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new kc(r,i)}(a,i),l=function(e,t){var n,r=[],i=!0,a=se(Iu(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Yc(e,o.fieldPath,e.endAt):$c(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new kc(r,i)}(a,i),f=n.cn(i,a,c),h=n.cn(i,a,l),d=n.ln(i,a,s),v=n.hn(i.indexId,u,f,c.inclusive,h,l.inclusive,d);return Fu.forEach(v,(function(n){return r.H(n,t.limit).next((function(t){t.forEach((function(t){var n=xu.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return Fu.resolve(null)}))}},{key:"an",value:function(e){var t=this._n.get(e);return t||(t=0===e.filters.length?[e]:qh(Ic.create(e.filters,"and")).map((function(t){return Kc(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)})),this._n.set(e,t),t)}},{key:"hn",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(){var s=t?u.Pn(t[h/c]):Jh,f=u.In(e,s,n[h%c],r),d=u.Tn(e,s,i[h%c],a),v=o.map((function(t){return u.In(e,s,t,!0)}));l.push.apply(l,x(u.createRange(f,d,v)))},h=0;h<s;++h)f();return l}},{key:"In",value:function(e,t,n,r){var i=new Vh(e,xu.empty(),t,n);return r?i:i.Jt()}},{key:"Tn",value:function(e,t,n,r){var i=new Vh(e,xu.empty(),t,n);return r?i.Jt():i}},{key:"un",value:function(e,t){var n=new Bh(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=se(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.en(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2,i=this.an(t);return Fu.forEach(i,(function(t){return n.un(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new Rs(_u.comparator),r=!1,i=se(e.filters);try{for(i.s();!(t=i.n()).done;){var a,o=se(t.value.getFlattenedFilters());try{for(o.s();!(a=o.n()).done;){var u=a.value;u.field.isKeyField()||("array-contains"===u.op||"array-contains-any"===u.op?r=!0:n=n.add(u.field))}}catch(f){o.e(f)}finally{o.f()}}}catch(f){i.e(f)}finally{i.f()}var s,c=se(e.orderBy);try{for(c.s();!(s=c.n()).done;){var l=s.value;l.field.isKeyField()||(n=n.add(l.field))}}catch(f){c.e(f)}finally{c.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return function(e){return null!==e.limit}(t)&&i.length>1&&2===r?1:r}))}},{key:"En",value:function(e,t){var n,r=new Fh,i=se(Iu(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Ht(a.kind);Ah.bt.Pt(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Wt()}},{key:"Pn",value:function(e){var t=new Fh;return Ah.bt.Pt(e,t.Ht(0)),t.Wt()}},{key:"dn",value:function(e,t){var n=new Fh;return Ah.bt.Pt(ic(this.databaseId,t),n.Ht(function(e){var t=Iu(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Wt()}},{key:"ln",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new Fh);var i,a=0,o=se(Iu(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=se(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.An(t,s.fieldPath)&&oc(c))r=this.Rn(r,s,c);else{var h=f.Ht(s.kind);Ah.bt.Pt(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.Vn(r)}},{key:"cn",value:function(e,t,n){return this.ln(e,t,n.position)}},{key:"Vn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Wt();return t}},{key:"Rn",value:function(e,t,n){var r,i=x(e),a=[],o=se(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=se(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new Fh;f.seed(l.Wt()),Ah.bt.Pt(s,f.Ht(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"An",value:function(e,t){return!!e.filters.find((function(e){return e instanceof Ec&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=rd(e),i=id(e);return(t?r.G("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.G()).next((function(e){var t=[];return Fu.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new Cu(t.sequenceNumber,new Au(gh(t.readTime),new xu(ns(t.documentKey)),t.largestBatchId)):Cu.empty(),r=e.fields.map((function(e){var t=_(e,2),n=t[0],r=t[1];return new Tu(_u.fromServerFormat(n),r)}));return new Su(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:vu(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=rd(e),a=id(e);return this.mn(e).next((function(e){return i.G("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return Fu.forEach(t,(function(t){return a.put(Eh(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return Fu.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?Fu.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),Fu.forEach(a,(function(r){return n.fn(e,t,r).next((function(t){var a=n.gn(i,r);return t.isEqual(a)?Fu.resolve():n.pn(e,i,r,t,a)}))}))}))}))}},{key:"yn",value:function(e,t,n,r){return nd(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.dn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"wn",value:function(e,t,n,r){return nd(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.dn(n,t.key),t.key.path.toArray()])}},{key:"fn",value:function(e,t,n){var r=nd(e),i=new Rs(zh);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.dn(n,t)])},(function(e,r){i=i.add(new Vh(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"gn",value:function(e,t){var n=new Rs(zh),r=this.En(t,e);if(null==r)return n;var i=Eu(t);if(null!=i){var a=e.data.field(i.fieldPath);if(oc(a)){var o,u=se(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new Vh(t.indexId,e.key,this.Pn(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new Vh(t.indexId,e.key,Jh,r));return n}},{key:"pn",value:function(e,t,n,r,i){var a=this;Ho("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=Ms(a),s=Ms(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=Ms(o)):l?(i(u),u=Ms(a)):(u=Ms(a),s=Ms(o))}}(r,i,zh,(function(r){o.push(a.yn(e,t,n,r))}),(function(r){o.push(a.wn(e,t,n,r))})),Fu.waitFor(o)}},{key:"mn",value:function(e){var t=1;return id(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return zh(e,t)})).filter((function(e,t,n){return!t||0!==zh(e,n[t-1])}));var r=[];r.push(e);var i,a=se(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=zh(o,e),s=zh(o,t);if(0===u)r[0]=e.Jt();else if(u>0&&s<0)r.push(o),r.push(o.Jt());else if(s>0)break}}catch(d){a.e(d)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2){if(this.Sn(r[l],r[l+1]))return[];var f=[r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,Jh,[]],h=[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,Jh,[]];c.push(IDBKeyRange.bound(f,h))}return c}},{key:"Sn",value:function(e,t){return zh(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(ad)}},{key:"getMinOffset",value:function(e,t){var n=this;return Fu.mapArray(this.an(t),(function(t){return n.un(e,t).next((function(e){return e||Xo()}))})).next(ad)}}]),e}();function td(e){return Ts(e,"collectionParents")}function nd(e){return Ts(e,"indexEntries")}function rd(e){return Ts(e,"indexConfiguration")}function id(e){return Ts(e,"indexState")}function ad(e){Jo(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;Pu(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Au(t.readTime,t.documentKey,n)}var od={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ud=function(){function e(t,n,r){ie(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return ue(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function sd(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Z({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){Jo(1===u)})));var c,l=[],f=se(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=as(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(v){f.e(v)}finally{f.f()}return Fu.waitFor(a).next((function(){return l}))}function cd(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Xo();t=e.noDocument}return JSON.stringify(t).length}ud.DEFAULT_COLLECTION_PERCENTILE=10,ud.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ud.DEFAULT=new ud(41943040,ud.DEFAULT_COLLECTION_PERCENTILE,ud.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ud.DISABLED=new ud(-1,0,0);var ld=function(){function e(t,n,r,i){ie(this,e),this.userId=t,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.bn={}}return ue(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return hd(e).Z({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=dd(e),o=hd(e);return o.add({}).next((function(u){Jo("number"==typeof u);var s,c=new lf(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return Jf(e.ct,t)})),i=n.mutations.map((function(t){return Jf(e.ct,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.serializer,i.userId,c),f=[],h=new Rs((function(e,t){return vu(e.canonicalString(),t.canonicalString())})),d=se(r);try{for(d.s();!(s=d.n()).done;){var v=s.value,p=as(i.userId,v.key.path,u);h=h.add(v.key.path.popLast()),f.push(o.put(l)),f.push(a.put(p,os))}}catch(y){d.e(y)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.bn[u]=c.keys()})),Fu.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return hd(e).get(t).next((function(e){return e?(Jo(e.userId===n.userId),kh(n.serializer,e)):null}))}},{key:"Dn",value:function(e,t){var n=this;return this.bn[t]?Fu.resolve(this.bn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.bn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return hd(e).Z({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(Jo(t.batchId>=r),a=kh(n.serializer,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return hd(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return hd(e).G("userMutationsIndex",n).next((function(e){return e.map((function(e){return kh(t.serializer,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=is(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return dd(e).Z({range:i},(function(r,i,o){var u=_(r,3),s=u[0],c=u[1],l=u[2],f=ns(c);if(s===n.userId&&t.path.isEqual(f))return hd(e).get(l).next((function(e){if(!e)throw Xo();Jo(e.userId===n.userId),a.push(kh(n.serializer,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Rs(vu),i=[];return t.forEach((function(t){var a=is(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=dd(e).Z({range:o},(function(e,i,a){var o=_(e,3),u=o[0],s=o[1],c=o[2],l=ns(s);u===n.userId&&t.path.isEqual(l)?r=r.add(c):a.done()}));i.push(u)})),Fu.waitFor(i).next((function(){return n.vn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=is(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new Rs(vu);return dd(e).Z({range:o},(function(e,t,a){var o=_(e,3),s=o[0],c=o[1],l=o[2],f=ns(c);s===n.userId&&r.isPrefixOf(f)?f.length===i&&(u=u.add(l)):a.done()})).next((function(){return n.vn(e,u)}))}},{key:"vn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(hd(e).get(t).next((function(e){if(null===e)throw Xo();Jo(e.userId===n.userId),r.push(kh(n.serializer,e))})))})),Fu.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return sd(e.ue,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.Cn(t.batchId)})),Fu.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"Cn",value:function(e){delete this.bn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Fu.resolve();var r=IDBKeyRange.lowerBound(function(e){return[e]}(t.userId)),i=[];return dd(e).Z({range:r},(function(e,n,r){if(e[0]===t.userId){var a=ns(e[1]);i.push(a)}else r.done()})).next((function(){Jo(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return fd(e,this.userId,t)}},{key:"Fn",value:function(e){var t=this;return vd(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"lt",value:function(t,n,r,i){return Jo(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function fd(e,t,n){var r=is(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return dd(e).Z({range:a,Y:!0},(function(e,n,r){var a=_(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function hd(e){return Ts(e,"mutations")}function dd(e){return Ts(e,"documentMutations")}function vd(e){return Ts(e,"mutationQueues")}var pd=function(){function e(t){ie(this,e),this.Mn=t}return ue(e,[{key:"next",value:function(){return this.Mn+=2,this.Mn}}],[{key:"xn",value:function(){return new e(0)}},{key:"On",value:function(){return new e(-1)}}]),e}(),yd=function(){function e(t,n){ie(this,e),this.referenceDelegate=t,this.serializer=n}return ue(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.Nn(e).next((function(n){var r=new pd(n.highestTargetId);return n.highestTargetId=r.next(),t.Bn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.Nn(e).next((function(e){return gu.fromTimestamp(new mu(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.Nn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.Nn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Bn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Ln(e,t).next((function(){return n.Nn(e).next((function(r){return r.targetCount+=1,n.kn(t,r),n.Bn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Ln(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return md(e).delete(t.targetId)})).next((function(){return n.Nn(e)})).next((function(t){return Jo(t.targetCount>0),t.targetCount-=1,n.Bn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return md(e).Z((function(o,u){var s=bh(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return Fu.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return md(e).Z((function(e,n){var r=bh(n);t(r)}))}},{key:"Nn",value:function(e){return gd(e).get("targetGlobalKey").next((function(e){return Jo(null!==e),e}))}},{key:"Bn",value:function(e,t){return gd(e).put("targetGlobalKey",t)}},{key:"Ln",value:function(e,t){return md(e).put(wh(this.serializer,t))}},{key:"kn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.Nn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=Gc(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return md(e).Z({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=bh(n);Qc(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=kd(e);return t.forEach((function(t){var o=Ju(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),Fu.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=kd(e);return Fu.forEach(t,(function(t){var a=Ju(t.path);return Fu.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=kd(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=kd(e),i=Il();return r.Z({range:n,Y:!0},(function(e,t,n){var r=ns(e[1]),a=new xu(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=Ju(t.path),r=IDBKeyRange.bound([n],[yu(n)],!1,!0),i=0;return kd(e).Z({index:"documentTargetsIndex",Y:!0,range:r},(function(e,t,n){var r=_(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"ut",value:function(e,t){return md(e).get(t).next((function(e){return e?bh(e):null}))}}]),e}();function md(e){return Ts(e,"targets")}function gd(e){return Ts(e,"targetGlobal")}function kd(e){return Ts(e,"targetDocuments")}function bd(e,t){var n=_(e,2),r=n[0],i=n[1],a=_(t,2),o=a[0],u=a[1],s=vu(r,o);return 0===s?vu(i,u):s}var wd=function(){function e(t){ie(this,e),this.qn=t,this.buffer=new Rs(bd),this.Qn=0}return ue(e,[{key:"Kn",value:function(){return++this.Qn}},{key:"$n",value:function(e){var t=[e,this.Kn()];if(this.buffer.size<this.qn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();bd(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),_d=function(){function e(t,n,r){ie(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Un=null}return ue(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Wn(6e4)}},{key:"stop",value:function(){this.Un&&(this.Un.cancel(),this.Un=null)}},{key:"started",get:function(){return null!==this.Un}},{key:"Wn",value:function(e){var t=this;Ho("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Un=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,re(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Un=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!ju(e.t0)){e.next=12;break}Ho("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,Lu(e.t0);case 14:return e.next=16,t.Wn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),xd=function(){function e(t,n){ie(this,e),this.Gn=t,this.params=n}return ue(e,[{key:"calculateTargetCount",value:function(e,t){return this.Gn.zn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Fu.resolve($u.ae);var r=new wd(t);return this.Gn.forEachTarget(e,(function(e){return r.$n(e.sequenceNumber)})).next((function(){return n.Gn.jn(e,(function(e){return r.$n(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Gn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Gn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Ho("LruGarbageCollector","Garbage collection skipped; disabled"),Fu.resolve(od)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Ho("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),od):n.Hn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Gn.getCacheSize(e)}},{key:"Hn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(Ho("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),Wo()<=Ge.DEBUG&&Ho("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),Fu.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}();function Sd(e,t){return new xd(e,t)}var Ed=function(){function e(t,n){ie(this,e),this.db=t,this.garbageCollector=Sd(this,n)}return ue(e,[{key:"zn",value:function(e){var t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Jn",value:function(e){var t=0;return this.jn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"jn",value:function(e,t){return this.Yn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return Id(e,n)}},{key:"removeReference",value:function(e,t,n){return Id(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return Id(e,t)}},{key:"Zn",value:function(e,t){return function(e,t){var n=!1;return vd(e).X((function(r){return fd(e,r,t).next((function(e){return e&&(n=!0),Fu.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Yn(e,(function(o,u){if(u<=t){var s=n.Zn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,gu.min()),kd(e).delete(function(e){return[0,Ju(e.path)]}(o))}))}));i.push(s)}})).next((function(){return Fu.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return Id(e,t)}},{key:"Yn",value:function(e,t){var n,r=kd(e),i=$u.ae;return r.Z({index:"documentTargetsIndex"},(function(e,r){var a=_(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==$u.ae&&t(new xu(ns(n)),i),i=s,n=u):i=$u.ae})).next((function(){i!==$u.ae&&t(new xu(ns(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function Id(e,t){return kd(e).put(function(e,t){return{targetId:0,path:Ju(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var Td=function(){function e(){ie(this,e),this.changes=new pl((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return ue(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,gc.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Fu.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),Cd=function(){function e(t){ie(this,e),this.serializer=t}return ue(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return Pd(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return Pd(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],yh(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Xn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=gc.newInvalidDocument(t);return Pd(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Od(t))},(function(e,i){r=n.er(t,i)})).next((function(){return r}))}},{key:"tr",value:function(e,t){var n=this,r={size:0,document:gc.newInvalidDocument(t)};return Pd(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Od(t))},(function(e,i){r={document:n.er(t,i),size:cd(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=ml();return this.nr(e,t,(function(e,t){var i=n.er(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"rr",value:function(e,t){var n=this,r=ml(),i=new As(xu.comparator);return this.nr(e,t,(function(e,t){var a=n.er(e,t);r=r.insert(e,a),i=i.insert(e,cd(t))})).next((function(){return{documents:r,ir:i}}))}},{key:"nr",value:function(e,t,n){if(t.isEmpty())return Fu.resolve();var r=new Rs(Ld);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(Od(r.first()),Od(r.last())),a=r.getIterator(),o=a.getNext();return Pd(e).Z({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=xu.fromSegments([].concat(x(t.prefixPath),[t.collectionGroup,t.documentId]));o&&Ld(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.W(Od(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this,a=t.path,o=[a.popLast().toArray(),a.lastSegment(),yh(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],u=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Pd(e).G(IDBKeyRange.bound(o,u,!0)).next((function(e){var n,a=ml(),o=se(e);try{for(o.s();!(n=o.n()).done;){var u=n.value,s=i.er(xu.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s.isFoundDocument()&&(fl(t,s)||r.has(s.key))&&(a=a.insert(s.key,s))}}catch(c){o.e(c)}finally{o.f()}return a}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=ml(),o=Rd(t,n),u=Rd(t,Au.max());return Pd(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.er(xu.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new Dd(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return Ad(e).get("remoteDocumentGlobalKey").next((function(e){return Jo(!!e),e}))}},{key:"Xn",value:function(e,t){return Ad(e).put("remoteDocumentGlobalKey",t)}},{key:"er",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=Zf(e.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=xu.fromSegments(t.noDocument.path),i=gh(t.noDocument.readTime);n=gc.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Xo();var a=xu.fromSegments(t.unknownDocument.path),o=gh(t.unknownDocument.version);n=gc.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new mu(e[0],e[1]);return gu.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!n.isNoDocument()||!n.version.isEqual(gu.min()))return n}return gc.newInvalidDocument(e)}}]),e}();function Nd(e){return new Cd(e)}var Dd=function(e){fe(n,e);var t=ve(n);function n(e,r){var i;return ie(this,n),(i=t.call(this)).sr=e,i.trackRemovals=r,i._r=new pl((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return ue(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Rs((function(e,t){return vu(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t._r.get(a);if(n.push(t.sr.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=ph(t.sr.serializer,o);i=i.add(a.path.popLast());var c=cd(s);r+=c-u.size,n.push(t.sr.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=ph(t.sr.serializer,o.convertToNoDocument(gu.min()));n.push(t.sr.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.sr.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.sr.updateMetadata(e,r)),Fu.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.sr.tr(e,t).next((function(e){return n._r.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.sr.rr(e,t).next((function(e){var t=e.documents;return e.ir.forEach((function(e,r){n._r.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(Td);function Ad(e){return Ts(e,"remoteDocumentGlobal")}function Pd(e){return Ts(e,"remoteDocumentsV14")}function Od(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Rd(e,t){var n=t.documentKey.path.toArray();return[e,yh(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Ld(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=vu(n[a],r[a]))return i;return(i=vu(n.length,r.length))||((i=vu(n[n.length-2],r[r.length-2]))||vu(n[n.length-1],r[r.length-1]))}var Md=ue((function e(t,n){ie(this,e),this.overlayedDocument=t,this.mutatedFields=n})),Fd=function(){function e(t,n,r,i){ie(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return ue(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&Zl(r.mutation,e,Fs.empty(),mu.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,Il()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Il(),i=wl();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=kl();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=wl();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,Il())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=ml(),a=xl(),o=xl();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof tf)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),Zl(o.mutation,t,o.mutation.getFieldMask(),mu.now())):a.set(t.key,Fs.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new Md(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=xl(),i=new As((function(e,t){return e-t})),a=Il();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=se(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||Fs.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||Il()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=_l();c.forEach((function(e){if(!a.has(e)){var n=$l(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return Fu.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return xu.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):rl(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):Fu.resolve(wl()),u=-1,s=a;return o.next((function(t){return Fu.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?Fu.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,Il())})).next((function(e){return{batchId:u,changes:bl(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new xu(t)).next((function(e){var t=kl();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=kl();return this.indexManager.getCollectionParents(e,i).next((function(o){return Fu.forEach(o,(function(o){var u=function(e,t){return new Zc(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(a){return r=a,i.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)})).next((function(e){r.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,gc.newInvalidDocument(r)))}));var n=kl();return e.forEach((function(e,i){var a=r.get(e);void 0!==a&&Zl(a.mutation,i,Fs.empty(),mu.now()),fl(t,i)&&(n=n.insert(e,i))})),n}))}}]),e}(),Vd=function(){function e(t){ie(this,e),this.serializer=t,this.ar=new Map,this.ur=new Map}return ue(e,[{key:"getBundleMetadata",value:function(e,t){return Fu.resolve(this.ar.get(t))}},{key:"saveBundleMetadata",value:function(e,t){return this.ar.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Bf(e.createTime)}}(t)),Fu.resolve()}},{key:"getNamedQuery",value:function(e,t){return Fu.resolve(this.ur.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.ur.set(t.name,function(e){return{name:e.name,query:_h(e.bundledQuery),readTime:Bf(e.readTime)}}(t)),Fu.resolve()}}]),e}(),zd=function(){function e(){ie(this,e),this.overlays=new As(xu.comparator),this.cr=new Map}return ue(e,[{key:"getOverlay",value:function(e,t){return Fu.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=wl();return Fu.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.ht(e,t,i)})),Fu.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.cr.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.cr.delete(n)),Fu.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=wl(),i=t.length+1,a=new xu(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return Fu.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new As((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=wl(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=wl(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return Fu.resolve(s)}},{key:"ht",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.cr.get(r.largestBatchId).delete(n.key);this.cr.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new hf(t,n));var a=this.cr.get(t);void 0===a&&(a=Il(),this.cr.set(t,a)),this.cr.set(t,a.add(n.key))}}]),e}(),Ud=function(){function e(){ie(this,e),this.lr=new Rs(Bd.hr),this.Pr=new Rs(Bd.Ir)}return ue(e,[{key:"isEmpty",value:function(){return this.lr.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Bd(e,t);this.lr=this.lr.add(n),this.Pr=this.Pr.add(n)}},{key:"Tr",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.Er(new Bd(e,t))}},{key:"dr",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"Ar",value:function(e){var t=this,n=new xu(new bu([])),r=new Bd(n,e),i=new Bd(n,e+1),a=[];return this.Pr.forEachInRange([r,i],(function(e){t.Er(e),a.push(e.key)})),a}},{key:"Rr",value:function(){var e=this;this.lr.forEach((function(t){return e.Er(t)}))}},{key:"Er",value:function(e){this.lr=this.lr.delete(e),this.Pr=this.Pr.delete(e)}},{key:"Vr",value:function(e){var t=new xu(new bu([])),n=new Bd(t,e),r=new Bd(t,e+1),i=Il();return this.Pr.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Bd(e,0),n=this.lr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Bd=function(){function e(t,n){ie(this,e),this.key=t,this.mr=n}return ue(e,null,[{key:"hr",value:function(e,t){return xu.comparator(e.key,t.key)||vu(e.mr,t.mr)}},{key:"Ir",value:function(e,t){return vu(e.mr,t.mr)||xu.comparator(e.key,t.key)}}]),e}(),jd=function(){function e(t,n){ie(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.gr=1,this.pr=new Rs(Bd.hr)}return ue(e,[{key:"checkEmpty",value:function(e){return Fu.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.gr;this.gr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new lf(i,t,n,r);this.mutationQueue.push(a);var o,u=se(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.pr=this.pr.add(new Bd(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return Fu.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Fu.resolve(this.yr(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.wr(n),i=r<0?0:r;return Fu.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Fu.resolve(0===this.mutationQueue.length?-1:this.gr-1)}},{key:"getAllMutationBatches",value:function(e){return Fu.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Bd(t,0),i=new Bd(t,Number.POSITIVE_INFINITY),a=[];return this.pr.forEachInRange([r,i],(function(e){var t=n.yr(e.mr);a.push(t)})),Fu.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Rs(vu);return t.forEach((function(e){var t=new Bd(e,0),i=new Bd(e,Number.POSITIVE_INFINITY);n.pr.forEachInRange([t,i],(function(e){r=r.add(e.mr)}))})),Fu.resolve(this.Sr(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;xu.isDocumentKey(i)||(i=i.child(""));var a=new Bd(new xu(i),0),o=new Rs(vu);return this.pr.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.mr)),!0)}),a),Fu.resolve(this.Sr(o))}},{key:"Sr",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.yr(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Jo(0===this.br(t.batchId,"removed")),this.mutationQueue.shift();var r=this.pr;return Fu.forEach(t.mutations,(function(i){var a=new Bd(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.pr=r}))}},{key:"Cn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Bd(t,0),r=this.pr.firstAfterOrEqual(n);return Fu.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,Fu.resolve()}},{key:"br",value:function(e,t){return this.wr(e)}},{key:"wr",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"yr",value:function(e){var t=this.wr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),qd=function(){function e(t){ie(this,e),this.Dr=t,this.docs=new As(xu.comparator),this.size=0}return ue(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Dr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Fu.resolve(n?n.document.mutableCopy():gc.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=ml();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():gc.newInvalidDocument(e))})),Fu.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=ml(),a=t.path,o=new xu(a.child("")),u=this.docs.getIteratorFrom(o);u.hasNext();){var s=u.getNext(),c=s.key,l=s.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||Pu(Du(l),n)<=0||(r.has(l.key)||fl(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return Fu.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){Xo()}},{key:"vr",value:function(e,t){return Fu.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Kd(this)}},{key:"getSize",value:function(e){return Fu.resolve(this.size)}}]),e}(),Kd=function(e){fe(n,e);var t=ve(n);function n(e){var r;return ie(this,n),(r=t.call(this)).sr=e,r}return ue(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.sr.addEntry(e,i)):t.sr.removeEntry(r)})),Fu.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.sr.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.sr.getEntries(e,t)}}]),n}(Td),Gd=function(){function e(t){ie(this,e),this.persistence=t,this.Cr=new pl((function(e){return Gc(e)}),Qc),this.lastRemoteSnapshotVersion=gu.min(),this.highestTargetId=0,this.Fr=0,this.Mr=new Ud,this.targetCount=0,this.Or=pd.xn()}return ue(e,[{key:"forEachTarget",value:function(e,t){return this.Cr.forEach((function(e,n){return t(n)})),Fu.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Fu.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Fu.resolve(this.Fr)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Or.next(),Fu.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Fr&&(this.Fr=t),Fu.resolve()}},{key:"Ln",value:function(e){this.Cr.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Or=new pd(t),this.highestTargetId=t),e.sequenceNumber>this.Fr&&(this.Fr=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Ln(t),this.targetCount+=1,Fu.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Ln(t),Fu.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Cr.delete(t.target),this.Mr.Ar(t.targetId),this.targetCount-=1,Fu.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Cr.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Cr.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),Fu.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Fu.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Cr.get(t)||null;return Fu.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Mr.Tr(t,n),Fu.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Mr.dr(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Fu.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Mr.Ar(t),Fu.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Mr.Vr(t);return Fu.resolve(n)}},{key:"containsKey",value:function(e,t){return Fu.resolve(this.Mr.containsKey(t))}}]),e}(),Qd=function(){function e(t,n){var r=this;ie(this,e),this.Nr={},this.overlays={},this.Br=new $u(0),this.Lr=!1,this.Lr=!0,this.referenceDelegate=t(this),this.kr=new Gd(this),this.indexManager=new Zh,this.remoteDocumentCache=function(e){return new qd(e)}((function(e){return r.referenceDelegate.qr(e)})),this.serializer=new vh(n),this.Qr=new Vd(this.serializer)}return ue(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Lr=!1,Promise.resolve()}},{key:"started",get:function(){return this.Lr}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new zd,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Nr[e.toKey()];return n||(n=new jd(t,this.referenceDelegate),this.Nr[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.kr}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Qr}},{key:"runTransaction",value:function(e,t,n){var r=this;Ho("MemoryPersistence","Starting transaction:",e);var i=new Wd(this.Br.next());return this.referenceDelegate.Kr(),n(i).next((function(e){return r.referenceDelegate.$r(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ur",value:function(e,t){return Fu.or(Object.values(this.Nr).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Wd=function(e){fe(n,e);var t=ve(n);function n(e){var r;return ie(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return ue(n)}(Ru),Hd=function(){function e(t){ie(this,e),this.persistence=t,this.Wr=new Ud,this.Gr=null}return ue(e,[{key:"jr",get:function(){if(this.Gr)return this.Gr;throw Xo()}},{key:"addReference",value:function(e,t,n){return this.Wr.addReference(n,t),this.jr.delete(n.toString()),Fu.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Wr.removeReference(n,t),this.jr.add(n.toString()),Fu.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.jr.add(t.toString()),Fu.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Wr.Ar(t.targetId).forEach((function(e){return n.jr.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.jr.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Kr",value:function(){this.Gr=new Set}},{key:"$r",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Fu.forEach(this.jr,(function(r){var i=xu.fromPath(r);return t.Hr(e,i).next((function(e){e||n.removeEntry(i,gu.min())}))})).next((function(){return t.Gr=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Hr(e,t).next((function(e){e?n.jr.delete(t.toString()):n.jr.add(t.toString())}))}},{key:"qr",value:function(e){return 0}},{key:"Hr",value:function(e,t){var n=this;return Fu.or([function(){return Fu.resolve(n.Wr.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ur(e,t)}])}}],[{key:"zr",value:function(t){return new e(t)}}]),e}(),$d=function(){function e(t){ie(this,e),this.serializer=t}return ue(e,[{key:"B",value:function(e,t,n,r){var i=this,a=new Vu("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",rs,{unique:!0}),e.createObjectStore("documentMutations")}(e),Yd(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=Fu.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Yd(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:gu.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").G().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",rs,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return Fu.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Yr(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Zr(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Xr(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.ei(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.ti(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:gs});t.createIndex("collectionPathOverlayIndex",ks,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",bs,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:us});t.createIndex("documentKeyIndex",ss),t.createIndex("collectionGroupIndex",cs)}(e)})).next((function(){return i.ni(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.ri(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:vs}).createIndex("sequenceNumberIndex",ps,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:ys}).createIndex("documentKeyIndex",ms,{unique:!1})}(e)}))),o}},{key:"Zr",value:function(e){var t=0;return e.store("remoteDocuments").Z((function(e,n){t+=cd(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Yr",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.G().next((function(n){return Fu.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.G("userMutationsIndex",i).next((function(r){return Fu.forEach(r,(function(r){Jo(r.userId===n.userId);var i=kh(t.serializer,r);return sd(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Xr",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Z((function(n,i){var a=new bu(n),o=function(e){return[0,Ju(e)]}(a);r.push(t.get(o).next((function(n){return n?Fu.resolve():function(n){return t.put({targetId:0,path:Ju(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return Fu.waitFor(r)}))}))}},{key:"ei",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:ds});var n=t.store("collectionParents"),r=new Xh,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Ju(i)})}};return t.store("remoteDocuments").Z({Y:!0},(function(e,t){var n=new bu(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Z({Y:!0},(function(e,t){var n=_(e,3),r=(n[0],n[1]),a=(n[2],ns(r));return i(a.popLast())}))}))}},{key:"ti",value:function(e){var t=this,n=e.store("targets");return n.Z((function(e,r){var i=bh(r),a=wh(t.serializer,i);return n.put(a)}))}},{key:"ni",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Z((function(e,n){var i=t.store("remoteDocumentsV14"),a=function(e){return e.document?new xu(bu.fromString(e.document.name).popFirst(5)):e.noDocument?xu.fromSegments(e.noDocument.path):e.unknownDocument?xu.fromSegments(e.unknownDocument.path):Xo()}(n).path.toArray(),o={prefixPath:a.slice(0,a.length-2),collectionGroup:a[a.length-2],documentId:a[a.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))})).next((function(){return Fu.waitFor(r)}))}},{key:"ri",value:function(e,t){var n=this,r=t.store("mutations"),i=Nd(this.serializer),a=new Qd(Hd.zr,this.serializer.ct);return r.G().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:Il();kh(n.serializer,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),Fu.forEach(r,(function(e,r){var o=new Ko(r),u=Nh.lt(n.serializer,o),s=a.getIndexManager(o),c=ld.lt(o,n.serializer,s,a.referenceDelegate);return new Fd(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new Is(t,$u.ae),e).next()}))}))}}]),e}();function Yd(e){e.createObjectStore("targetDocuments",{keyPath:fs}).createIndex("documentTargetsIndex",hs,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",ls,{unique:!0}),e.createObjectStore("targetGlobal")}var Zd="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Xd=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(ie(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.ii=a,this.window=o,this.document=u,this.si=c,this.oi=l,this._i=f,this.Br=null,this.Lr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ai=null,this.inForeground=!1,this.ui=null,this.ci=null,this.li=Number.NEGATIVE_INFINITY,this.hi=function(e){return Promise.resolve()},!e.v())throw new nu(tu.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Ed(this,i),this.Pi=n+"main",this.serializer=new vh(s),this.Ii=new zu(this.Pi,this._i,new $d(this.serializer)),this.kr=new yd(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Nd(this.serializer),this.Qr=new Ih,this.window&&this.window.localStorage?this.Ti=this.window.localStorage:(this.Ti=null,!1===l&&$o("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return ue(e,[{key:"start",value:function(){var e=this;return this.Ei().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new nu(tu.FAILED_PRECONDITION,Zd);return e.di(),e.Ai(),e.Ri(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.kr.getHighestSequenceNumber(t)}))})).then((function(t){e.Br=new $u(t,e.si)})).then((function(){e.Lr=!0})).catch((function(t){return e.Ii&&e.Ii.close(),Promise.reject(t)}))}},{key:"Vi",value:function(e){var t=this;return this.hi=function(){var n=re(te().mark((function n(r){return te().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.Ii.k(function(){var t=re(te().mark((function t(n){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget(re(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.Ei();case 4:case"end":return e.stop()}}),e)})))))}},{key:"Ei",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return ev(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.mi(t).next((function(t){t||(e.isPrimary=!1,e.ii.enqueueRetryable((function(){return e.hi(!1)})))}))})).next((function(){return e.fi(t)})).next((function(n){return e.isPrimary&&!n?e.gi(t).next((function(){return!1})):!!n&&e.pi(t).next((function(){return!0}))}))})).catch((function(t){if(ju(t))return Ho("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return Ho("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.ii.enqueueRetryable((function(){return e.hi(t)})),e.isPrimary=t}))}},{key:"mi",value:function(e){var t=this;return Jd(e).get("owner").next((function(e){return Fu.resolve(t.yi(e))}))}},{key:"wi",value:function(e){return ev(e).delete(this.clientId)}},{key:"Si",value:function(){var e=re(te().mark((function e(){var t,n,r,i,a=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.bi(this.li,18e5)){e.next=6;break}return this.li=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Ts(e,"clientMetadata");return t.G().next((function(e){var n=a.Di(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Fu.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.Ti){n=se(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.Ti.removeItem(this.vi(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ri",value:function(){var e=this;this.ci=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.Ei().then((function(){return e.Si()})).then((function(){return e.Ri()}))}))}},{key:"yi",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"fi",value:function(e){var t=this;return this.oi?Fu.resolve(!0):Jd(e).get("owner").next((function(n){if(null!==n&&t.bi(n.leaseTimestampMs,5e3)&&!t.Ci(n.ownerId)){if(t.yi(n)&&t.networkEnabled)return!0;if(!t.yi(n)){if(!n.allowTabSynchronization)throw new nu(tu.FAILED_PRECONDITION,Zd);return!1}}return!(!t.networkEnabled||!t.inForeground)||ev(e).G().next((function(e){return void 0===t.Di(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&Ho("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=re(te().mark((function e(){var t=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Lr=!1,this.Fi(),this.ci&&(this.ci.cancel(),this.ci=null),this.Mi(),this.xi(),e.next=7,this.Ii.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new Is(e,$u.ae);return t.gi(n).next((function(){return t.wi(n)}))}));case 7:this.Ii.close(),this.Oi();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Di",value:function(e,t){var n=this;return e.filter((function(e){return n.bi(e.updateTimeMs,t)&&!n.Ci(e.clientId)}))}},{key:"Ni",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return ev(t).G().next((function(t){return e.Di(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Lr}},{key:"getMutationQueue",value:function(e,t){return ld.lt(e,this.serializer,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.kr}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new ed(e,this.serializer.ct.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return Nh.lt(this.serializer,e)}},{key:"getBundleCache",value:function(){return this.Qr}},{key:"runTransaction",value:function(e,t,n){var r=this;Ho("IndexedDbPersistence","Starting transaction:",e);var i,a="readonly"===t?"readonly":"readwrite",o=function(e){return 15===e?Es:14===e?Ss:13===e?xs:12===e?_s:11===e?ws:void Xo()}(this._i);return this.Ii.runTransaction(e,a,o,(function(a){return i=new Is(a,r.Br?r.Br.next():$u.ae),"readwrite-primary"===t?r.mi(i).next((function(e){return!!e||r.fi(i)})).next((function(t){if(!t)throw $o("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.ii.enqueueRetryable((function(){return r.hi(!1)})),new nu(tu.FAILED_PRECONDITION,Ou);return n(i)})).next((function(e){return r.pi(i).next((function(){return e}))})):r.Bi(i).next((function(){return n(i)}))})).then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Bi",value:function(e){var t=this;return Jd(e).get("owner").next((function(e){if(null!==e&&t.bi(e.leaseTimestampMs,5e3)&&!t.Ci(e.ownerId)&&!t.yi(e)&&!(t.oi||t.allowTabSynchronization&&e.allowTabSynchronization))throw new nu(tu.FAILED_PRECONDITION,Zd)}))}},{key:"pi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Jd(e).put("owner",t)}},{key:"gi",value:function(e){var t=this,n=Jd(e);return n.get("owner").next((function(e){return t.yi(e)?(Ho("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Fu.resolve()}))}},{key:"bi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||($o("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"di",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ui=function(){e.ii.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.Ei()}))},this.document.addEventListener("visibilitychange",this.ui),this.inForeground="visible"===this.document.visibilityState)}},{key:"Mi",value:function(){this.ui&&(this.document.removeEventListener("visibilitychange",this.ui),this.ui=null)}},{key:"Ai",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ai=function(){t.Fi();var e=/(?:Version|Mobile)\/1[456]/;Ce()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&t.ii.enterRestrictedMode(!0),t.ii.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ai))}},{key:"xi",value:function(){this.ai&&(this.window.removeEventListener("pagehide",this.ai),this.ai=null)}},{key:"Ci",value:function(e){var t;try{var n=null!==(null===(t=this.Ti)||void 0===t?void 0:t.getItem(this.vi(e)));return Ho("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return $o("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Fi",value:function(){if(this.Ti)try{this.Ti.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){$o("Failed to set zombie client id.",e)}}},{key:"Oi",value:function(){if(this.Ti)try{this.Ti.removeItem(this.vi(this.clientId))}catch(e){}}},{key:"vi",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"v",value:function(){return zu.v()}}]),e}();function Jd(e){return Ts(e,"owner")}function ev(e){return Ts(e,"clientMetadata")}function tv(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var nv=function(){function e(t,n,r,i){ie(this,e),this.targetId=t,this.fromCache=n,this.Li=r,this.ki=i}return ue(e,null,[{key:"qi",value:function(t,n){var r,i=Il(),a=Il(),o=se(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),rv=function(){function e(){ie(this,e),this.Qi=!1}return ue(e,[{key:"initialize",value:function(e,t){this.Ki=e,this.indexManager=t,this.Qi=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.$i(e,t).next((function(a){return a||i.Ui(e,t,r,n)})).next((function(n){return n||i.Wi(e,t)}))}},{key:"$i",value:function(e,t){var n=this;if(el(t))return Fu.resolve(null);var r=al(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=ul(t,null,"F"),r=al(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=Il.apply(void 0,x(i));return n.Ki.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.Gi(t,i);return n.zi(t,o,a,r.readTime)?n.$i(e,ul(t,null,"F")):n.ji(e,o,t,r)}))}))})))}))}},{key:"Ui",value:function(e,t,n,r){var i=this;return el(t)||r.isEqual(gu.min())?this.Wi(e,t):this.Ki.getDocuments(e,n).next((function(a){var o=i.Gi(t,a);return i.zi(t,o,n,r)?i.Wi(e,t):(Wo()<=Ge.DEBUG&&Ho("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ll(t)),i.ji(e,o,t,Nu(r,-1)))}))}},{key:"Gi",value:function(e,t){var n=new Rs(dl(e));return t.forEach((function(t,r){fl(e,r)&&(n=n.add(r))})),n}},{key:"zi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Wi",value:function(e,t){return Wo()<=Ge.DEBUG&&Ho("QueryEngine","Using full collection scan to execute query:",ll(t)),this.Ki.getDocumentsMatchingQuery(e,t,Au.min())}},{key:"ji",value:function(e,t,n,r){return this.Ki.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),iv=function(){function e(t,n,r,i){ie(this,e),this.persistence=t,this.Hi=n,this.serializer=i,this.Ji=new As(vu),this.Yi=new pl((function(e){return Gc(e)}),Qc),this.Zi=new Map,this.Xi=t.getRemoteDocumentCache(),this.kr=t.getTargetCache(),this.Qr=t.getBundleCache(),this.es(r)}return ue(e,[{key:"es",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Fd(this.Xi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Xi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Ji)}))}}]),e}();function av(e,t,n,r){return new iv(e,t,n,r)}function ov(e,t){return uv.apply(this,arguments)}function uv(){return uv=re(te().mark((function e(t,n){var r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=eu(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.es(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=Il(),s=se(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=se(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,v=se(n);try{for(v.s();!(d=v.n()).done;){var p=d.value;o.push(p.batchId);var y,m=se(p.mutations);try{for(m.s();!(y=m.n()).done;){var g=y.value;u=u.add(g.key)}}catch(k){m.e(k)}finally{m.f()}}}catch(k){v.e(k)}finally{v.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{ts:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),uv.apply(this,arguments)}function sv(e,t){var n=eu(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Xi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Fu.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Jo(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=Il(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function cv(e){var t=eu(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.kr.getLastRemoteSnapshotVersion(e)}))}function lv(e,t){var n=eu(e),r=t.snapshotVersion,i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Xi.newChangeBuffer({trackRemovals:!0});i=n.Ji;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.kr.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.kr.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(u)?c=c.withResumeToken(zs.EMPTY_BYTE_STRING,gu.min()).withLastLimboFreeSnapshotVersion(gu.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.kr.updateTargetData(e,c))}}));var u=ml(),s=Il();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(fv(e,a,t.documentUpdates).next((function(e){u=e.ns,s=e.rs}))),!r.isEqual(gu.min())){var c=n.kr.getLastRemoteSnapshotVersion(e).next((function(t){return n.kr.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return Fu.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.Ji=i,e}))}function fv(e,t,n){var r=Il(),i=Il();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=ml();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(gu.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):Ho("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{ns:r,rs:i}}))}function hv(e,t){var n=eu(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function dv(e,t){var n=eu(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.kr.getTargetData(e,t).next((function(i){return i?(r=i,Fu.resolve(r)):n.kr.allocateTargetId(e).next((function(i){return r=new dh(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.kr.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Ji.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e}))}function vv(e,t,n){return pv.apply(this,arguments)}function pv(){return pv=re(te().mark((function e(t,n,r){var i,a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=eu(t),a=i.Ji.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),ju(e.t1)){e.next=12;break}throw e.t1;case 12:Ho("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Ji=i.Ji.remove(n),i.Yi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),pv.apply(this,arguments)}function yv(e,t,n){var r=eu(e),i=gu.min(),a=Il();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=eu(e),i=r.Yi.get(n);return void 0!==i?Fu.resolve(r.Ji.get(i)):r.kr.getTargetData(t,n)}(r,e,al(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.kr.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Hi.getDocumentsMatchingQuery(e,t,n?i:gu.min(),n?a:Il())})).next((function(e){return kv(r,hl(t),e),{documents:e,ss:a}}))}))}function mv(e,t){var n=eu(e),r=eu(n.kr),i=n.Ji.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.ut(e,t).next((function(e){return e?e.target:null}))}))}function gv(e,t){var n=eu(e),r=n.Zi.get(t)||gu.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Xi.getAllFromCollectionGroup(e,t,Nu(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return kv(n,t,e),e}))}function kv(e,t,n){var r=e.Zi.get(t)||gu.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Zi.set(t,r)}function bv(e,t,n,r){return wv.apply(this,arguments)}function wv(){return wv=re(te().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,v;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=eu(t),o=Il(),u=ml(),s=se(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.os(l.metadata.name),l.document&&(o=o.add(f)),(h=n._s(l)).setReadTime(n.us(l.metadata.readTime)),u=u.insert(f,h)}catch(p){s.e(p)}finally{s.f()}return d=a.Xi.newChangeBuffer({trackRemovals:!0}),e.next=7,dv(a,function(e){return al(Jc(bu.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return v=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return fv(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.kr.removeMatchingKeysForTargetId(e,v.targetId).next((function(){return a.kr.addMatchingKeys(e,o,v.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.ns,t.rs)})).next((function(){return t.ns}))}))})));case 9:case"end":return e.stop()}}),e)}))),wv.apply(this,arguments)}function _v(e,t){return xv.apply(this,arguments)}function xv(){return xv=re(te().mark((function e(t,n){var r,i,a,o=arguments;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:Il(),e.next=3,dv(t,al(_h(n.bundledQuery)));case 3:return i=e.sent,a=eu(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=Bf(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Qr.saveNamedQuery(e,n);var o=i.withResumeToken(zs.EMPTY_BYTE_STRING,t);return a.Ji=a.Ji.insert(o.targetId,o),a.kr.updateTargetData(e,o).next((function(){return a.kr.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.kr.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Qr.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),xv.apply(this,arguments)}function Sv(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Ev(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Iv(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var Tv=function(){function e(t,n,r,i){ie(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return ue(e,[{key:"ls",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"cs",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new nu(a.error.code,a.error.message))),o?new e(t,n,a.state,i):($o("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),Cv=function(){function e(t,n,r){ie(this,e),this.targetId=t,this.state=n,this.error=r}return ue(e,[{key:"ls",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"cs",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new nu(i.error.code,i.error.message))),a?new e(t,i.state,r):($o("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),Nv=function(){function e(t,n){ie(this,e),this.clientId=t,this.activeTargetIds=n}return ue(e,null,[{key:"cs",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Cl(),o=0;i&&o<r.activeTargetIds.length;++o)i=Xu(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):($o("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),Dv=function(){function e(t,n){ie(this,e),this.clientId=t,this.onlineState=n}return ue(e,null,[{key:"cs",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):($o("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),Av=function(){function e(){ie(this,e),this.activeTargetIds=Cl()}return ue(e,[{key:"hs",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Ps",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"ls",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Pv=function(){function e(t,n,r,i,a){ie(this,e),this.window=t,this.ii=n,this.persistenceKey=r,this.Is=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Ts=this.Es.bind(this),this.ds=new As(vu),this.started=!1,this.As=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.Rs=Sv(this.persistenceKey,this.Is),this.Vs=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ds=this.ds.insert(this.Is,new Av),this.fs=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.gs=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.ps=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.ys=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.ws=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.Ts)}return ue(e,[{key:"start",value:function(){var e=re(te().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Ni();case 2:t=e.sent,n=se(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.Is){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(Sv(this.persistenceKey,i)))&&(o=Nv.cs(i,a))&&(this.ds=this.ds.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.Ss(),(u=this.storage.getItem(this.ys))&&(s=this.bs(u))&&this.Ds(s),c=se(this.As);try{for(c.s();!(l=c.n()).done;)f=l.value,this.Es(f)}catch(d){c.e(d)}finally{c.f()}this.As=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.Vs,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.vs(this.ds)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ds.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Cs(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Cs(e,t,n),this.Fs(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Iv(this.persistenceKey,e));if(n){var r=Cv.cs(e,n);r&&(t=r.state)}}return this.Ms.hs(e),this.Ss(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Ms.Ps(e),this.Ss()}},{key:"isLocalQueryTarget",value:function(e){return this.Ms.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(Iv(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.xs(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Fs(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Os(e)}},{key:"notifyBundleLoaded",value:function(e){this.Ns(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.Ts),this.removeItem(this.Rs),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return Ho("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){Ho("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){Ho("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"Es",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(Ho("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Rs)return void $o("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable(re(te().mark((function e(){var r,i,a,o,u,s,c;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.fs.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Bs(n.key),e.abrupt("return",t.Ls(r,null));case 6:if(!(i=t.ks(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Ls(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.gs.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.qs(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Qs(a));case 16:e.next=41;break;case 18:if(!t.ps.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Ks(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.$s(o));case 23:e.next=41;break;case 25:if(n.key!==t.ys){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.bs(n.newValue))){e.next=30;break}return e.abrupt("return",t.Ds(u));case 30:e.next=41;break;case 32:if(n.key!==t.Vs){e.next=37;break}s=function(e){var t=$u.ae;if(null!=e)try{var n=JSON.parse(e);Jo("number"==typeof n),t=n}catch(e){$o("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==$u.ae&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.ws){e.next=41;break}return c=t.Us(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Ws(e)})));case 41:e.next=44;break;case 43:t.As.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Ms",get:function(){return this.ds.get(this.Is)}},{key:"Ss",value:function(){this.setItem(this.Rs,this.Ms.ls())}},{key:"Cs",value:function(e,t,n){var r=new Tv(this.currentUser,e,t,n),i=Ev(this.persistenceKey,this.currentUser,e);this.setItem(i,r.ls())}},{key:"Fs",value:function(e){var t=Ev(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Os",value:function(e){var t={clientId:this.Is,onlineState:e};this.storage.setItem(this.ys,JSON.stringify(t))}},{key:"xs",value:function(e,t,n){var r=Iv(this.persistenceKey,e),i=new Cv(e,t,n);this.setItem(r,i.ls())}},{key:"Ns",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.ws,t)}},{key:"Bs",value:function(e){var t=this.fs.exec(e);return t?t[1]:null}},{key:"ks",value:function(e,t){var n=this.Bs(e);return Nv.cs(n,t)}},{key:"qs",value:function(e,t){var n=this.gs.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Tv.cs(new Ko(i),r,t)}},{key:"Ks",value:function(e,t){var n=this.ps.exec(e),r=Number(n[1]);return Cv.cs(r,t)}},{key:"bs",value:function(e){return Dv.cs(e)}},{key:"Us",value:function(e){return JSON.parse(e)}},{key:"Qs",value:function(){var e=re(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.Gs(t.batchId,t.state,t.error));case 2:Ho("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"$s",value:function(e){return this.syncEngine.zs(e.targetId,e.state,e.error)}},{key:"Ls",value:function(e,t){var n=this,r=t?this.ds.insert(e,t):this.ds.remove(e),i=this.vs(this.ds),a=this.vs(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.js(o,u).then((function(){n.ds=r}))}},{key:"Ds",value:function(e){this.ds.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"vs",value:function(e){var t=Cl();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"v",value:function(e){return!(!e||!e.localStorage)}}]),e}(),Ov=function(){function e(){ie(this,e),this.Hs=new Av,this.Js={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return ue(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Hs.hs(e),this.Js[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Js[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Hs.Ps(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Hs.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Js[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Hs.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Hs.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Hs=new Av,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),Rv=function(){function e(){ie(this,e)}return ue(e,[{key:"Ys",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Lv=function(){function e(){var t=this;ie(this,e),this.Zs=function(){return t.Xs()},this.eo=function(){return t.no()},this.ro=[],this.io()}return ue(e,[{key:"Ys",value:function(e){this.ro.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Zs),window.removeEventListener("offline",this.eo)}},{key:"io",value:function(){window.addEventListener("online",this.Zs),window.addEventListener("offline",this.eo)}},{key:"Xs",value:function(){Ho("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=se(this.ro);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"no",value:function(){Ho("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=se(this.ro);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"v",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),Mv=null;function Fv(){return null===Mv?Mv=268435456+Math.round(2147483648*Math.random()):Mv++,"0x"+Mv.toString(16)}var Vv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},zv=function(){function e(t){ie(this,e),this.so=t.so,this.oo=t.oo}return ue(e,[{key:"_o",value:function(e){this.ao=e}},{key:"uo",value:function(e){this.co=e}},{key:"onMessage",value:function(e){this.lo=e}},{key:"close",value:function(){this.oo()}},{key:"send",value:function(e){this.so(e)}},{key:"ho",value:function(){this.ao()}},{key:"Po",value:function(e){this.co(e)}},{key:"Io",value:function(e){this.lo(e)}}]),e}(),Uv="WebChannelConnection",Bv=function(e){fe(n,e);var t=ve(n);function n(e){var r;return ie(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r.longPollingOptions=e.longPollingOptions,r}return ue(n,[{key:"fo",value:function(e,t,n,r){var i=Fv();return new Promise((function(a,o){var u=new Uo;u.setWithCredentials(!0),u.listenOnce(Lo.COMPLETE,(function(){try{switch(u.getLastErrorCode()){case Ro.NO_ERROR:var t=u.getResponseJson();Ho(Uv,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case Ro.TIMEOUT:Ho(Uv,"RPC '".concat(e,"' ").concat(i," timed out")),o(new nu(tu.DEADLINE_EXCEEDED,"Request time out"));break;case Ro.HTTP_ERROR:var n=u.getStatus();if(Ho(Uv,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",u.getResponseText()),n>0){var r=u.getResponseJson();Array.isArray(r)&&(r=r[0]);var s=null==r?void 0:r.error;if(s&&s.status&&s.message){var c=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(tu).indexOf(t)>=0?t:tu.UNKNOWN}(s.status);o(new nu(c,s.message))}else o(new nu(tu.UNKNOWN,"Server responded with status "+u.getStatus()))}else o(new nu(tu.UNAVAILABLE,"Connection failed."));break;default:Xo()}}finally{Ho(Uv,"RPC '".concat(e,"' ").concat(i," completed."))}}));var s=JSON.stringify(r);Ho(Uv,"RPC '".concat(e,"' ").concat(i," sending request:"),r),u.send(t,"POST",s,n,15)}))}},{key:"yo",value:function(e,t,n){var r=Fv(),i=[this.To,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Po(),o=Oo(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},s=this.longPollingOptions.timeoutSeconds;void 0!==s&&(u.longPollingTimeout=Math.round(1e3*s)),this.useFetchStreams&&(u.xmlHttpFactory=new Vo({})),this.mo(u.initMessageHeaders,t,n),u.encodeInitMessageHeaders=!0;var c=i.join("");Ho(Uv,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),u);var l=a.createWebChannel(c,u),f=!1,h=!1,d=new zv({so:function(t){h?Ho(Uv,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(f||(Ho(Uv,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),l.open(),f=!0),Ho(Uv,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),l.send(t))},oo:function(){return l.close()}}),v=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return v(l,zo.EventType.OPEN,(function(){h||Ho(Uv,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),v(l,zo.EventType.CLOSE,(function(){h||(h=!0,Ho(Uv,"RPC '".concat(e,"' stream ").concat(r," transport closed")),d.Po())})),v(l,zo.EventType.ERROR,(function(t){h||(h=!0,Yo(Uv,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),d.Po(new nu(tu.UNAVAILABLE,"The operation could not be completed")))})),v(l,zo.EventType.MESSAGE,(function(t){var n;if(!h){var i=t.data[0];Jo(!!i);var a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){Ho(Uv,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var u=o.status,s=function(e){var t=of[e];if(void 0!==t)return pf(t)}(u),c=o.message;void 0===s&&(s=tu.INTERNAL,c="Unknown error status: "+u+" with message "+o.message),h=!0,d.Po(new nu(s,c)),l.close()}else Ho(Uv,"RPC '".concat(e,"' stream ").concat(r," received:"),i),d.Io(i)}})),v(o,Mo.STAT_EVENT,(function(t){t.stat===Fo.PROXY?Ho(Uv,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Fo.NOPROXY&&Ho(Uv,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){d.ho()}),0),d}}]),n}(function(){function e(t){ie(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.To=n+"://"+t.host,this.Eo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return ue(e,[{key:"Ao",get:function(){return!1}},{key:"Ro",value:function(e,t,n,r,i){var a=Fv(),o=this.Vo(e,t);Ho("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var u={};return this.mo(u,r,i),this.fo(e,o,u,n).then((function(t){return Ho("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw Yo("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"po",value:function(e,t,n,r,i,a){return this.Ro(e,t,n,r,i)}},{key:"mo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Go,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"Vo",value:function(e,t){var n=Vv[e];return"".concat(this.To,"/v1/").concat(t,":").concat(n)}}]),e}());function jv(){return"undefined"!=typeof window?window:null}function qv(){return"undefined"!=typeof document?document:null}function Kv(e){return new Mf(e,!0)}var Gv=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;ie(this,e),this.ii=t,this.timerId=n,this.wo=r,this.So=i,this.bo=a,this.Do=0,this.vo=null,this.Co=Date.now(),this.reset()}return ue(e,[{key:"reset",value:function(){this.Do=0}},{key:"Fo",value:function(){this.Do=this.bo}},{key:"Mo",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Do+this.xo()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,n-r);i>0&&Ho("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Do," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.vo=this.ii.enqueueAfterDelay(this.timerId,i,(function(){return t.Co=Date.now(),e()})),this.Do*=this.So,this.Do<this.wo&&(this.Do=this.wo),this.Do>this.bo&&(this.Do=this.bo)}},{key:"Oo",value:function(){null!==this.vo&&(this.vo.skipDelay(),this.vo=null)}},{key:"cancel",value:function(){null!==this.vo&&(this.vo.cancel(),this.vo=null)}},{key:"xo",value:function(){return(Math.random()-.5)*this.Do}}]),e}(),Qv=function(){function e(t,n,r,i,a,o,u,s){ie(this,e),this.ii=t,this.No=r,this.Bo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Lo=0,this.ko=null,this.qo=null,this.stream=null,this.Qo=new Gv(t,n)}return ue(e,[{key:"Ko",value:function(){return 1===this.state||5===this.state||this.$o()}},{key:"$o",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Uo()}},{key:"stop",value:function(){var e=re(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Ko(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Wo",value:function(){this.state=0,this.Qo.reset()}},{key:"Go",value:function(){var e=this;this.$o()&&null===this.ko&&(this.ko=this.ii.enqueueAfterDelay(this.No,6e4,(function(){return e.zo()})))}},{key:"jo",value:function(e){this.Ho(),this.stream.send(e)}},{key:"zo",value:function(){var e=re(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.$o()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ho",value:function(){this.ko&&(this.ko.cancel(),this.ko=null)}},{key:"Jo",value:function(){this.qo&&(this.qo.cancel(),this.qo=null)}},{key:"close",value:function(){var e=re(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ho(),this.Jo(),this.Qo.cancel(),this.Lo++,4!==t?this.Qo.reset():n&&n.code===tu.RESOURCE_EXHAUSTED?($o(n.toString()),$o("Using maximum backoff delay to prevent overloading the backend."),this.Qo.Fo()):n&&n.code===tu.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.uo(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Yo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Zo(this.Lo),n=this.Lo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=_(t,2),i=r[0],a=r[1];e.Lo===n&&e.Xo(i,a)}),(function(n){t((function(){var t=new nu(tu.UNKNOWN,"Fetching auth token failed: "+n.message);return e.e_(t)}))}))}},{key:"Xo",value:function(e,t){var n=this,r=this.Zo(this.Lo);this.stream=this.t_(e,t),this.stream._o((function(){r((function(){return n.state=2,n.qo=n.ii.enqueueAfterDelay(n.Bo,1e4,(function(){return n.$o()&&(n.state=3),Promise.resolve()})),n.listener._o()}))})),this.stream.uo((function(e){r((function(){return n.e_(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Uo",value:function(){var e=this;this.state=5,this.Qo.Mo(re(te().mark((function t(){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"e_",value:function(e){return Ho("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Zo",value:function(e){var t=this;return function(n){t.ii.enqueueAndForget((function(){return t.Lo===e?n():(Ho("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),Wv=function(e){fe(n,e);var t=ve(n);function n(e,r,i,a,o,u){var s;return ie(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s}return ue(n,[{key:"t_",value:function(e,t){return this.connection.yo("Listen",e,t)}},{key:"onMessage",value:function(e){this.Qo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Xo()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(Jo(void 0===t||"string"==typeof t),zs.fromBase64String(t||"")):(Jo(void 0===t||t instanceof Uint8Array),zs.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?tu.UNKNOWN:pf(e.code);return new nu(t,e.message||"")}(o);n=new Cf(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=Gf(e,s.document.name),l=Bf(s.document.updateTime),f=s.document.createTime?Bf(s.document.createTime):gu.min(),h=new yc({mapValue:{fields:s.document.fields}}),d=gc.newFoundDocument(c,l,f,h),v=s.targetIds||[],p=s.removedTargetIds||[];n=new If(v,p,d.key,d)}else if("documentDelete"in t){t.documentDelete;var y=t.documentDelete;y.document;var m=Gf(e,y.document),g=y.readTime?Bf(y.readTime):gu.min(),k=gc.newNoDocument(m,g),b=y.removedTargetIds||[];n=new If([],b,k.key,k)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var _=Gf(e,w.document),x=w.removedTargetIds||[];n=new If([],x,_,null)}else{if(!("filter"in t))return Xo();t.filter;var S=t.filter;S.targetId;var E=S.count,I=void 0===E?0:E,T=S.unchangedNames,C=new df(I,T),N=S.targetId;n=new Tf(N,C)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return gu.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?gu.min():t.readTime?Bf(t.readTime):gu.min()}(e);return this.listener.n_(t,n)}},{key:"r_",value:function(e){var t={};t.database=Hf(this.serializer),t.addTarget=function(e,t){var n,r=t.target;if((n=Wc(r)?{documents:th(e,r)}:{query:nh(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=zf(e,t.resumeToken);var i=Ff(e,t.expectedCount);null!==i&&(n.expectedCount=i)}else if(t.snapshotVersion.compareTo(gu.min())>0){n.readTime=Vf(e,t.snapshotVersion.toTimestamp());var a=Ff(e,t.expectedCount);null!==a&&(n.expectedCount=a)}return n}(this.serializer,e);var n=function(e,t){var n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Xo()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.jo(t)}},{key:"i_",value:function(e){var t={};t.database=Hf(this.serializer),t.removeTarget=e,this.jo(t)}}]),n}(Qv),Hv=function(e){fe(n,e);var t=ve(n);function n(e,r,i,a,o,u){var s;return ie(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s.s_=!1,s}return ue(n,[{key:"o_",get:function(){return this.s_}},{key:"start",value:function(){this.s_=!1,this.lastStreamToken=void 0,kn(he(n.prototype),"start",this).call(this)}},{key:"Yo",value:function(){this.s_&&this.__([])}},{key:"t_",value:function(e,t){return this.connection.yo("Write",e,t)}},{key:"onMessage",value:function(e){if(Jo(!!e.streamToken),this.lastStreamToken=e.streamToken,this.s_){this.Qo.reset();var t=function(e,t){return e&&e.length>0?(Jo(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Bf(e.updateTime):Bf(t);return n.isEqual(gu.min())&&(n=Bf(t)),new Gl(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Bf(e.commitTime);return this.listener.a_(n,t)}return Jo(!e.writeResults||0===e.writeResults.length),this.s_=!0,this.listener.u_()}},{key:"c_",value:function(){var e={};e.database=Hf(this.serializer),this.jo(e)}},{key:"__",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Jf(t.serializer,e)}))};this.jo(n)}}]),n}(Qv),$v=function(e){fe(n,e);var t=ve(n);function n(e,r,i,a){var o;return ie(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.serializer=a,o.l_=!1,o}return ue(n,[{key:"h_",value:function(){if(this.l_)throw new nu(tu.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"Ro",value:function(e,t,n){var r=this;return this.h_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=_(i,2),o=a[0],u=a[1];return r.connection.Ro(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===tu.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new nu(tu.UNKNOWN,e.toString())}))}},{key:"po",value:function(e,t,n,r){var i=this;return this.h_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=_(a,2),u=o[0],s=o[1];return i.connection.po(e,t,n,u,s,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===tu.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new nu(tu.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.l_=!0}}]),n}(ue((function e(){ie(this,e)})));var Yv=function(){function e(t,n){ie(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.I_=0,this.T_=null,this.E_=!0}return ue(e,[{key:"d_",value:function(){var e=this;0===this.I_&&(this.A_("Unknown"),this.T_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.T_=null,e.R_("Backend didn't respond within 10 seconds."),e.A_("Offline"),Promise.resolve()})))}},{key:"V_",value:function(e){"Online"===this.state?this.A_("Unknown"):(this.I_++,this.I_>=1&&(this.m_(),this.R_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.A_("Offline")))}},{key:"set",value:function(e){this.m_(),this.I_=0,"Online"===e&&(this.E_=!1),this.A_(e)}},{key:"A_",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"R_",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.E_?($o(t),this.E_=!1):Ho("OnlineStateTracker",t)}},{key:"m_",value:function(){null!==this.T_&&(this.T_.cancel(),this.T_=null)}}]),e}(),Zv=ue((function e(t,n,r,i,a){var o=this;ie(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.f_=[],this.g_=new Map,this.p_=new Set,this.y_=[],this.w_=a,this.w_.Ys((function(e){r.enqueueAndForget(re(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=sp(o),!e.t0){e.next=5;break}return Ho("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=re(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=eu(t)).p_.add(4),e.next=4,ep(n);case 4:return n.S_.set("Unknown"),n.p_.delete(4),e.next=8,Xv(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.S_=new Yv(r,i)}));function Xv(e){return Jv.apply(this,arguments)}function Jv(){return(Jv=re(te().mark((function e(t){var n,r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!sp(t)){e.next=18;break}n=se(t.y_),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])})))).apply(this,arguments)}function ep(e){return tp.apply(this,arguments)}function tp(){return(tp=re(te().mark((function e(t){var n,r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=se(t.y_),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})))).apply(this,arguments)}function np(e,t){var n=eu(e);n.g_.has(t.targetId)||(n.g_.set(t.targetId,t),up(n)?op(n):Fp(n).$o()&&ip(n,t))}function rp(e,t){var n=eu(e),r=Fp(n);n.g_.delete(t),r.$o()&&ap(n,t),0===n.g_.size&&(r.$o()?r.Go():sp(n)&&n.S_.set("Unknown"))}function ip(e,t){if(e.b_.Be(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(gu.min())>0){var n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Fp(e).r_(t)}function ap(e,t){e.b_.Be(t),Fp(e).i_(t)}function op(e){e.b_=new Df({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},ut:function(t){return e.g_.get(t)||null},rt:function(){return e.datastore.serializer.databaseId}}),Fp(e).start(),e.S_.d_()}function up(e){return sp(e)&&!Fp(e).Ko()&&e.g_.size>0}function sp(e){return 0===eu(e).p_.size}function cp(e){e.b_=void 0}function lp(e){return fp.apply(this,arguments)}function fp(){return(fp=re(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.g_.forEach((function(e,n){ip(t,e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hp(e,t){return dp.apply(this,arguments)}function dp(){return(dp=re(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:cp(t),up(t)?(t.S_.V_(n),op(t)):t.S_.set("Unknown");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vp(e,t,n){return pp.apply(this,arguments)}function pp(){return pp=re(te().mark((function e(t,n,r){var i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.S_.set("Online"),!(n instanceof Cf&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=re(te().mark((function e(t,n){var r,i,a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=se(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.g_.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.g_.delete(o),t.b_.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Ho("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,yp(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof If?t.b_.We(n):n instanceof Tf?t.b_.Ze(n):t.b_.je(n),r.isEqual(gu.min())){e.next=29;break}return e.prev=14,e.next=17,cv(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.b_.st(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.g_.get(r);i&&e.g_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t,n){var r=e.g_.get(t);if(r){e.g_.set(t,r.withResumeToken(zs.EMPTY_BYTE_STRING,r.snapshotVersion)),ap(e,t);var i=new dh(r.target,t,n,r.sequenceNumber);ip(e,i)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Ho("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,yp(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),pp.apply(this,arguments)}function yp(e,t,n){return mp.apply(this,arguments)}function mp(){return(mp=re(te().mark((function e(t,n,r){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ju(n)){e.next=2;break}throw n;case 2:return t.p_.add(1),e.next=5,ep(t);case 5:t.S_.set("Offline"),r||(r=function(){return cv(t.localStore)}),t.asyncQueue.enqueueRetryable(re(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ho("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.p_.delete(1),e.next=6,Xv(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gp(e,t){return t().catch((function(n){return yp(e,n,t)}))}function kp(e){return bp.apply(this,arguments)}function bp(){return bp=re(te().mark((function e(t){var n,r,i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=eu(t),r=Vp(n),i=n.f_.length>0?n.f_[n.f_.length-1].batchId:-1;case 2:if(!wp(n)){e.next=19;break}return e.prev=3,e.next=6,hv(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.f_.length&&r.Go(),e.abrupt("break",19);case 10:i=a.batchId,_p(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,yp(n,e.t0);case 17:e.next=2;break;case 19:xp(n)&&Sp(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),bp.apply(this,arguments)}function wp(e){return sp(e)&&e.f_.length<10}function _p(e,t){e.f_.push(t);var n=Vp(e);n.$o()&&n.o_&&n.__(t.mutations)}function xp(e){return sp(e)&&!Vp(e).Ko()&&e.f_.length>0}function Sp(e){Vp(e).start()}function Ep(e){return Ip.apply(this,arguments)}function Ip(){return(Ip=re(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Vp(t).c_();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tp(e){return Cp.apply(this,arguments)}function Cp(){return(Cp=re(te().mark((function e(t){var n,r,i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Vp(t),r=se(t.f_);try{for(r.s();!(i=r.n()).done;)a=i.value,n.__(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Np(e,t,n){return Dp.apply(this,arguments)}function Dp(){return Dp=re(te().mark((function e(t,n,r){var i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.f_.shift(),a=ff.from(i,n,r),e.next=3,gp(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,kp(t);case 5:case"end":return e.stop()}}),e)}))),Dp.apply(this,arguments)}function Ap(e,t){return Pp.apply(this,arguments)}function Pp(){return Pp=re(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&Vp(t).o_,!e.t0){e.next=4;break}return e.next=4,function(){var e=re(te().mark((function e(t,n){var r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!function(e){return vf(e)&&e!==tu.ABORTED}(n.code)){e.next=7;break}return r=t.f_.shift(),Vp(t).Wo(),e.next=5,gp(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,kp(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:xp(t)&&Sp(t);case 5:case"end":return e.stop()}}),e)}))),Pp.apply(this,arguments)}function Op(e,t){return Rp.apply(this,arguments)}function Rp(){return Rp=re(te().mark((function e(t,n){var r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=eu(t)).asyncQueue.verifyOperationInProgress(),Ho("RemoteStore","RemoteStore received new credentials"),i=sp(r),r.p_.add(3),e.next=6,ep(r);case 6:return i&&r.S_.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.p_.delete(3),e.next=12,Xv(r);case 12:case"end":return e.stop()}}),e)}))),Rp.apply(this,arguments)}function Lp(e,t){return Mp.apply(this,arguments)}function Mp(){return(Mp=re(te().mark((function e(t,n){var r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=eu(t),!n){e.next=7;break}return r.p_.delete(2),e.next=5,Xv(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.p_.add(2),e.next=12,ep(r);case 12:r.S_.set("Unknown");case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fp(e){return e.D_||(e.D_=function(e,t,n){var r=eu(e);return r.h_(),new Wv(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{_o:lp.bind(null,e),uo:hp.bind(null,e),n_:vp.bind(null,e)}),e.y_.push(function(){var t=re(te().mark((function t(n){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.D_.Wo(),up(e)?op(e):e.S_.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.D_.stop();case 6:cp(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.D_}function Vp(e){return e.v_||(e.v_=function(e,t,n){var r=eu(e);return r.h_(),new Hv(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{_o:Ep.bind(null,e),uo:Ap.bind(null,e),u_:Tp.bind(null,e),a_:Np.bind(null,e)}),e.y_.push(function(){var t=re(te().mark((function t(n){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.v_.Wo(),t.next=4,kp(e);case 4:t.next=9;break;case 6:return t.next=8,e.v_.stop();case 8:e.f_.length>0&&(Ho("RemoteStore","Stopping write stream with ".concat(e.f_.length," pending writes")),e.f_=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.v_}var zp=function(){function e(t,n,r,i,a){ie(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new ru,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return ue(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new nu(tu.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function Up(e,t){if($o("AsyncQueue","".concat(t,": ").concat(e)),ju(e))return new nu(tu.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var Bp=function(){function e(t){ie(this,e),this.comparator=t?function(e,n){return t(e,n)||xu.comparator(e.key,n.key)}:function(e,t){return xu.comparator(e.key,t.key)},this.keyedMap=kl(),this.sortedSet=new As(this.comparator)}return ue(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),jp=function(){function e(){ie(this,e),this.C_=new As(xu.comparator)}return ue(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.C_.get(t);n?0!==e.type&&3===n.type?this.C_=this.C_.insert(t,e):3===e.type&&1!==n.type?this.C_=this.C_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.C_=this.C_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.C_=this.C_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.C_=this.C_.remove(t):1===e.type&&2===n.type?this.C_=this.C_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.C_=this.C_.insert(t,{type:2,doc:e.doc}):Xo():this.C_=this.C_.insert(t,e)}},{key:"F_",value:function(){var e=[];return this.C_.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),qp=function(){function e(t,n,r,i,a,o,u,s,c){ie(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s,this.hasCachedResults=c}return ue(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&sl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,Bp.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),Kp=ue((function e(){ie(this,e),this.M_=void 0,this.listeners=[]})),Gp=ue((function e(){ie(this,e),this.queries=new pl((function(e){return cl(e)}),sl),this.onlineState="Unknown",this.x_=new Set}));function Qp(e,t){return Wp.apply(this,arguments)}function Wp(){return Wp=re(te().mark((function e(t,n){var r,i,a,o,u;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=eu(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new Kp),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.M_=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=Up(e.t0,"Initialization of query '".concat(ll(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.O_(r.onlineState),o.M_&&n.N_(o.M_)&&Xp(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),Wp.apply(this,arguments)}function Hp(e,t){return $p.apply(this,arguments)}function $p(){return $p=re(te().mark((function e(t,n){var r,i,a,o,u;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=eu(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),$p.apply(this,arguments)}function Yp(e,t){var n,r=eu(e),i=!1,a=se(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=se(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.N_(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.M_=o}}}catch(f){a.e(f)}finally{a.f()}i&&Xp(r)}function Zp(e,t,n){var r=eu(e),i=r.queries.get(t);if(i){var a,o=se(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function Xp(e){e.x_.forEach((function(e){e.next()}))}var Jp=function(){function e(t,n,r){ie(this,e),this.query=t,this.B_=n,this.L_=!1,this.k_=null,this.onlineState="Unknown",this.options=r||{}}return ue(e,[{key:"N_",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=se(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new qp(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.L_?this.q_(e)&&(this.B_.next(e),a=!0):this.Q_(e,this.onlineState)&&(this.K_(e),a=!0),this.k_=e,a}},{key:"onError",value:function(e){this.B_.error(e)}},{key:"O_",value:function(e){this.onlineState=e;var t=!1;return this.k_&&!this.L_&&this.Q_(this.k_,e)&&(this.K_(this.k_),t=!0),t}},{key:"Q_",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.U_||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"q_",value:function(e){if(e.docChanges.length>0)return!0;var t=this.k_&&this.k_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"K_",value:function(e){e=qp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.L_=!0,this.B_.next(e)}}]),e}(),ey=function(){function e(t,n){ie(this,e),this.W_=t,this.byteLength=n}return ue(e,[{key:"G_",value:function(){return"metadata"in this.W_}}]),e}(),ty=function(){function e(t){ie(this,e),this.serializer=t}return ue(e,[{key:"os",value:function(e){return Gf(this.serializer,e)}},{key:"_s",value:function(e){return e.metadata.exists?Zf(this.serializer,e.document,!1):gc.newNoDocument(this.os(e.metadata.name),this.us(e.metadata.readTime))}},{key:"us",value:function(e){return Bf(e)}}]),e}(),ny=function(){function e(t,n,r){ie(this,e),this.z_=t,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=ry(t)}return ue(e,[{key:"j_",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.W_.namedQuery)this.queries.push(e.W_.namedQuery);else if(e.W_.documentMetadata){this.documents.push({metadata:e.W_.documentMetadata}),e.W_.documentMetadata.exists||++t;var n=bu.fromString(e.W_.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.W_.document&&(this.documents[this.documents.length-1].document=e.W_.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"H_",value:function(e){var t,n=new Map,r=new ty(this.serializer),i=se(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.os(a.metadata.name),s=se(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||Il()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=re(te().mark((function e(){var t,n,r,i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bv(this.localStore,new ty(this.serializer),this.documents,this.z_.id);case 2:t=e.sent,n=this.H_(this.documents),r=se(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,_v(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,J_:this.collectionGroups,Y_:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function ry(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var iy=ue((function e(t){ie(this,e),this.key=t})),ay=ue((function e(t){ie(this,e),this.key=t})),oy=function(){function e(t,n){ie(this,e),this.query=t,this.Z_=n,this.X_=null,this.hasCachedResults=!1,this.current=!1,this.ea=Il(),this.mutatedKeys=Il(),this.ta=dl(t),this.na=new Bp(this.ta)}return ue(e,[{key:"ra",get:function(){return this.Z_}},{key:"ia",value:function(e,t){var n=this,r=t?t.sa:new jp,i=t?t.na:this.na,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=fl(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),v=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),v=!0):n.oa(l,f)||(r.track({type:2,doc:f}),v=!0,(s&&n.ta(f,s)>0||c&&n.ta(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),v=!0):l&&!f&&(r.track({type:1,doc:l}),v=!0,(s||c)&&(u=!0)),v&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{na:o,sa:r,zi:u,mutatedKeys:a}}},{key:"oa",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.na;this.na=e.na,this.mutatedKeys=e.mutatedKeys;var a=e.sa.F_();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Xo()}};return n(e)-n(t)}(e.type,t.type)||r.ta(e.doc,t.doc)})),this._a(n);var o=t?this.aa():[],u=0===this.ea.size&&this.current?1:0,s=u!==this.X_;return this.X_=u,0!==a.length||s?{snapshot:new qp(this.query,e.na,i,a,e.mutatedKeys,0===u,s,!1,!!n&&n.resumeToken.approximateByteSize()>0),ua:o}:{ua:o}}},{key:"O_",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({na:this.na,sa:new jp,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{ua:[]}}},{key:"ca",value:function(e){return!this.Z_.has(e)&&!!this.na.has(e)&&!this.na.get(e).hasLocalMutations}},{key:"_a",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Z_=t.Z_.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Z_=t.Z_.delete(e)})),this.current=e.current)}},{key:"aa",value:function(){var e=this;if(!this.current)return[];var t=this.ea;this.ea=Il(),this.na.forEach((function(t){e.ca(t.key)&&(e.ea=e.ea.add(t.key))}));var n=[];return t.forEach((function(t){e.ea.has(t)||n.push(new ay(t))})),this.ea.forEach((function(e){t.has(e)||n.push(new iy(e))})),n}},{key:"la",value:function(e){this.Z_=e.ss,this.ea=Il();var t=this.ia(e.documents);return this.applyChanges(t,!0)}},{key:"ha",value:function(){return qp.fromInitialDocuments(this.query,this.na,this.mutatedKeys,0===this.X_,this.hasCachedResults)}}]),e}(),uy=ue((function e(t,n,r){ie(this,e),this.query=t,this.targetId=n,this.view=r})),sy=ue((function e(t){ie(this,e),this.key=t,this.Pa=!1})),cy=function(){function e(t,n,r,i,a,o){ie(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Ia={},this.Ta=new pl((function(e){return cl(e)}),sl),this.Ea=new Map,this.da=new Set,this.Aa=new As(xu.comparator),this.Ra=new Map,this.Va=new Ud,this.ma={},this.fa=new Map,this.ga=pd.On(),this.onlineState="Unknown",this.pa=void 0}return ue(e,[{key:"isPrimaryClient",get:function(){return!0===this.pa}}]),e}();function ly(e,t){return fy.apply(this,arguments)}function fy(){return fy=re(te().mark((function e(t,n){var r,i,a,o,u,s;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=rm(t),!(o=r.Ta.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.ha(),e.next=15;break;case 6:return e.next=8,dv(r.localStore,al(n));case 8:return u=e.sent,s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=13,hy(r,n,i,"current"===s,u.resumeToken);case 13:a=e.sent,r.isPrimaryClient&&np(r.remoteStore,u);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),fy.apply(this,arguments)}function hy(e,t,n,r,i){return dy.apply(this,arguments)}function dy(){return dy=re(te().mark((function e(t,n,r,i,a){var o,u,s,c,l,f;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.ya=function(e,n,r){return function(){var e=re(te().mark((function e(t,n,r,i){var a,o,u;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.ia(r),e.t0=a.zi,!e.t0){e.next=6;break}return e.next=5,yv(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.ia(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(Oy(t,n.targetId,u.ua),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,yv(t.localStore,n,!0);case 3:return o=e.sent,u=new oy(n,o.ss),s=u.ia(o.documents),c=Ef.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),l=u.applyChanges(s,t.isPrimaryClient,c),Oy(t,r,l.ua),f=new uy(n,r,u),e.abrupt("return",(t.Ta.set(n,f),t.Ea.has(r)?t.Ea.get(r).push(n):t.Ea.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),dy.apply(this,arguments)}function vy(e,t){return py.apply(this,arguments)}function py(){return py=re(te().mark((function e(t,n){var r,i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=eu(t),i=r.Ta.get(n),!((a=r.Ea.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.Ea.set(i.targetId,a.filter((function(e){return!sl(e,n)}))),void r.Ta.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,vv(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),rp(r.remoteStore,i.targetId),Ay(r,i.targetId)})).catch(Lu);case 9:e.next=14;break;case 11:return Ay(r,i.targetId),e.next=14,vv(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),py.apply(this,arguments)}function yy(e,t,n){return my.apply(this,arguments)}function my(){return my=re(te().mark((function e(t,n,r){var i,a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=im(t),e.prev=1,e.next=4,function(e,t){var n,r,i=eu(e),a=mu.now(),o=t.reduce((function(e,t){return e.add(t.key)}),Il());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=ml(),s=Il();return i.Xi.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=se(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=Xl(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new tf(c.key,l,mc(l.value.mapValue),Ql.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:bl(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.ma[e.currentUser.toKey()];r||(r=new As(vu)),r=r.insert(t,n),e.ma[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,My(i,a.changes);case 9:return e.next=11,kp(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=Up(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),my.apply(this,arguments)}function gy(e,t){return ky.apply(this,arguments)}function ky(){return ky=re(te().mark((function e(t,n){var r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=eu(t),e.prev=1,e.next=4,lv(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.Ra.get(t);n&&(Jo(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Pa=!0:e.modifiedDocuments.size>0?Jo(n.Pa):e.removedDocuments.size>0&&(Jo(n.Pa),n.Pa=!1))})),e.next=8,My(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Lu(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),ky.apply(this,arguments)}function by(e,t,n){var r=eu(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Ta.forEach((function(e,n){var r=n.view.O_(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=eu(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=se(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.O_(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&Xp(n)}(r.eventManager,t),i.length&&r.Ia.n_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function wy(e,t,n){return _y.apply(this,arguments)}function _y(){return _y=re(te().mark((function e(t,n,r){var i,a,o,u,s,c;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=eu(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.Ra.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new As(xu.comparator)).insert(o,gc.newNoDocument(o,gu.min())),s=Il().add(o),c=new Sf(gu.min(),new Map,new As(vu),u,s),e.next=9,gy(i,c);case 9:i.Aa=i.Aa.remove(o),i.Ra.delete(n),Ly(i),e.next=16;break;case 14:return e.next=16,vv(i.localStore,n,!1).then((function(){return Ay(i,n,r)})).catch(Lu);case 16:case"end":return e.stop()}}),e)}))),_y.apply(this,arguments)}function xy(e,t){return Sy.apply(this,arguments)}function Sy(){return Sy=re(te().mark((function e(t,n){var r,i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=eu(t),i=n.batch.batchId,e.prev=1,e.next=4,sv(r.localStore,n);case 4:return a=e.sent,Dy(r,i,null),Ny(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,My(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Lu(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Sy.apply(this,arguments)}function Ey(e,t,n){return Iy.apply(this,arguments)}function Iy(){return Iy=re(te().mark((function e(t,n,r){var i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=eu(t),e.prev=1,e.next=4,function(e,t){var n=eu(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return Jo(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,Dy(i,n,r),Ny(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,My(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Lu(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Iy.apply(this,arguments)}function Ty(e,t){return Cy.apply(this,arguments)}function Cy(){return Cy=re(te().mark((function e(t,n){var r,i,a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return sp((r=eu(t)).remoteStore)||Ho("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=eu(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.fa.get(i)||[]).push(n),r.fa.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=Up(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),Cy.apply(this,arguments)}function Ny(e,t){(e.fa.get(t)||[]).forEach((function(e){e.resolve()})),e.fa.delete(t)}function Dy(e,t,n){var r=eu(e),i=r.ma[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.ma[r.currentUser.toKey()]=i}}function Ay(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=se(e.Ea.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.Ta.delete(a),n&&e.Ia.wa(a,n)}}catch(o){i.e(o)}finally{i.f()}e.Ea.delete(t),e.isPrimaryClient&&e.Va.Ar(t).forEach((function(t){e.Va.containsKey(t)||Py(e,t)}))}function Py(e,t){e.da.delete(t.path.canonicalString());var n=e.Aa.get(t);null!==n&&(rp(e.remoteStore,n),e.Aa=e.Aa.remove(t),e.Ra.delete(n),Ly(e))}function Oy(e,t,n){var r,i=se(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof iy?(e.Va.addReference(a.key,t),Ry(e,a)):a instanceof ay?(Ho("SyncEngine","Document no longer in limbo: "+a.key),e.Va.removeReference(a.key,t),e.Va.containsKey(a.key)||Py(e,a.key)):Xo()}}catch(o){i.e(o)}finally{i.f()}}function Ry(e,t){var n=t.key,r=n.path.canonicalString();e.Aa.get(n)||e.da.has(r)||(Ho("SyncEngine","New document in limbo: "+n),e.da.add(r),Ly(e))}function Ly(e){for(;e.da.size>0&&e.Aa.size<e.maxConcurrentLimboResolutions;){var t=e.da.values().next().value;e.da.delete(t);var n=new xu(bu.fromString(t)),r=e.ga.next();e.Ra.set(r,new sy(n)),e.Aa=e.Aa.insert(n,r),np(e.remoteStore,new dh(al(Jc(n.path)),r,"TargetPurposeLimboResolution",$u.ae))}}function My(e,t,n){return Fy.apply(this,arguments)}function Fy(){return Fy=re(te().mark((function e(t,n,r){var i,a,o,u;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=eu(t),a=[],o=[],u=[],e.t0=i.Ta.isEmpty(),e.t0){e.next=9;break}return i.Ta.forEach((function(e,t){u.push(i.ya(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=nv.qi(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.Ia.n_(a),e.next=9,function(){var e=re(te().mark((function e(t,n){var r,i,a,o,u,s,c,l;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=eu(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Fu.forEach(n,(function(t){return Fu.forEach(t.Li,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Fu.forEach(t.ki,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),ju(e.t0)){e.next=10;break}throw e.t0;case 10:Ho("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=se(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.Ji.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.Ji=r.Ji.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),Fy.apply(this,arguments)}function Vy(e,t){return zy.apply(this,arguments)}function zy(){return(zy=re(te().mark((function e(t,n){var r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=eu(t)).currentUser.isEqual(n)){e.next=11;break}return Ho("SyncEngine","User change. New user:",n.toKey()),e.next=5,ov(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.fa.forEach((function(e){e.forEach((function(e){e.reject(new nu(tu.CANCELLED,t))}))})),e.fa.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,My(r,i.ts);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Uy(e,t){var n=eu(e),r=n.Ra.get(t);if(r&&r.Pa)return Il().add(r.key);var i=Il(),a=n.Ea.get(t);if(!a)return i;var o,u=se(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.Ta.get(s);i=i.unionWith(c.view.ra)}}catch(l){u.e(l)}finally{u.f()}return i}function By(e,t){return jy.apply(this,arguments)}function jy(){return jy=re(te().mark((function e(t,n){var r,i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=eu(t),e.next=3,yv(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.la(i),e.abrupt("return",(r.isPrimaryClient&&Oy(r,n.targetId,a.ua),a));case 6:case"end":return e.stop()}}),e)}))),jy.apply(this,arguments)}function qy(e,t){return Ky.apply(this,arguments)}function Ky(){return(Ky=re(te().mark((function e(t,n){var r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=eu(t),e.abrupt("return",gv(r.localStore,n).then((function(e){return My(r,e)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gy(e,t,n,r){return Qy.apply(this,arguments)}function Qy(){return Qy=re(te().mark((function e(t,n,r,i){var a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=eu(t),e.next=3,function(e,t){var n=eu(e),r=eu(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Dn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):Fu.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,kp(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(Dy(a,n,i||null),Ny(a,n),function(e,t){eu(eu(e).mutationQueue).Cn(t)}(a.localStore,n)):Xo();case 11:return e.next=13,My(a,o);case 13:e.next=16;break;case 15:Ho("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),Qy.apply(this,arguments)}function Wy(e,t){return Hy.apply(this,arguments)}function Hy(){return(Hy=re(te().mark((function e(t,n){var r,i,a,o,u,s,c,l;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(rm(r=eu(t)),im(r),!0!==n||!0===r.pa){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,$y(r,i.toArray());case 5:return a=e.sent,r.pa=!0,e.next=9,Lp(r.remoteStore,!0);case 9:o=se(a);try{for(o.s();!(u=o.n()).done;)s=u.value,np(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.pa){e.next=25;break}return c=[],l=Promise.resolve(),r.Ea.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return Ay(r,t),vv(r.localStore,t,!0)})),rp(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,$y(r,c);case 21:return function(e){var t=eu(e);t.Ra.forEach((function(e,n){rp(t.remoteStore,n)})),t.Va.Rr(),t.Ra=new Map,t.Aa=new As(xu.comparator)}(r),r.pa=!1,e.next=25,Lp(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $y(e,t,n){return Yy.apply(this,arguments)}function Yy(){return Yy=re(te().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,v,p,y,m;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=eu(t),a=[],o=[],u=se(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.Ea.get(c))||0===f.length){e.next=34;break}return e.next=11,dv(i.localStore,al(f[0]));case 11:l=e.sent,h=se(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return v=d.value,p=i.Ta.get(v),e.next=20,By(i,p);case 20:(y=e.sent).snapshot&&o.push(y.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,mv(i.localStore,c);case 36:return m=e.sent,e.next=39,dv(i.localStore,m);case 39:return l=e.sent,e.next=42,hy(i,Zy(m),c,!1,l.resumeToken);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.Ia.n_(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),Yy.apply(this,arguments)}function Zy(e){return Xc(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Xy(e){return function(e){return eu(eu(e).persistence).Ni()}(eu(e).localStore)}function Jy(e,t,n,r){return em.apply(this,arguments)}function em(){return em=re(te().mark((function e(t,n,r,i){var a,o,u,s;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=eu(t)).pa){e.next=3;break}return e.abrupt("return",void Ho("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.Ea.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,gv(a.localStore,hl(o[0]));case 10:return u=e.sent,s=Sf.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,zs.EMPTY_BYTE_STRING),e.next=14,My(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,vv(a.localStore,n,!0);case 17:return Ay(a,n,i),e.abrupt("break",20);case 19:Xo();case 20:case"end":return e.stop()}}),e)}))),em.apply(this,arguments)}function tm(e,t,n){return nm.apply(this,arguments)}function nm(){return nm=re(te().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=rm(t)).pa){e.next=45;break}a=se(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.Ea.has(u)){e.next=10;break}return Ho("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,mv(i.localStore,u);case 12:return s=e.sent,e.next=15,dv(i.localStore,s);case 15:return c=e.sent,e.next=18,hy(i,Zy(s),c.targetId,!1,c.resumeToken);case 18:np(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=se(r),e.prev=30,h=te().mark((function e(){var t;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.Ea.has(t),!e.t0){e.next=5;break}return e.next=5,vv(i.localStore,t,!1).then((function(){rp(i.remoteStore,t),Ay(i,t)})).catch(Lu);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),nm.apply(this,arguments)}function rm(e){var t=eu(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=gy.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Uy.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=wy.bind(null,t),t.Ia.n_=Yp.bind(null,t.eventManager),t.Ia.wa=Zp.bind(null,t.eventManager),t}function im(e){var t=eu(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=xy.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Ey.bind(null,t),t}function am(e,t,n){var r=eu(e);(function(){var e=re(te().mark((function e(t,n,r){var i,a,o,u,s;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=eu(e),r=Bf(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Qr.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(ry(i)),a=new ny(i,t.localStore,n.serializer),e.next=15,n.Sa();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.j_(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.Sa();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,My(t,s.Y_,void 0);case 31:return e.next=33,function(e,t){var n=eu(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Qr.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.J_));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(Yo("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var om=function(){function e(){ie(this,e),this.synchronizeTabs=!1}return ue(e,[{key:"initialize",value:function(){var e=re(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.serializer=Kv(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),e.next=5,this.persistence.start();case 5:this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createGarbageCollectionScheduler",value:function(e,t){return null}},{key:"createIndexBackfillerScheduler",value:function(e,t){return null}},{key:"createLocalStore",value:function(e){return av(this.persistence,new rv,e.initialUser,this.serializer)}},{key:"createPersistence",value:function(e){return new Qd(Hd.zr,this.serializer)}},{key:"createSharedClientState",value:function(e){return new Ov}},{key:"terminate",value:function(){var e=re(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),um=function(e){fe(n,e);var t=ve(n);function n(e,r,i){var a;return ie(this,n),(a=t.call(this)).ba=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return ue(n,[{key:"initialize",value:function(){var e=re(te().mark((function e(t){var r=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kn(he(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.ba.initialize(this,t);case 4:return e.next=6,im(this.ba.syncEngine);case 6:return e.next=8,kp(this.ba.remoteStore);case 8:return e.next=10,this.persistence.Vi((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createLocalStore",value:function(e){return av(this.persistence,new rv,e.initialUser,this.serializer)}},{key:"createGarbageCollectionScheduler",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new _d(n,e.asyncQueue,t)}},{key:"createIndexBackfillerScheduler",value:function(e,t){var n=new Hu(t,this.persistence);return new Wu(e.asyncQueue,n)}},{key:"createPersistence",value:function(e){var t=tv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?ud.withCacheSize(this.cacheSizeBytes):ud.DEFAULT;return new Xd(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,jv(),qv(),this.serializer,this.sharedClientState,!!this.forceOwnership)}},{key:"createSharedClientState",value:function(e){return new Ov}}]),n}(om),sm=function(e){fe(n,e);var t=ve(n);function n(e,r){var i;return ie(this,n),(i=t.call(this,e,r,!1)).ba=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return ue(n,[{key:"initialize",value:function(){var e=re(te().mark((function e(t){var r,i=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kn(he(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.ba.syncEngine,e.t0=this.sharedClientState instanceof Pv,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={Gs:Gy.bind(null,r),zs:Jy.bind(null,r),js:tm.bind(null,r),Ni:Xy.bind(null,r),Ws:qy.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.Vi(function(){var e=re(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wy(i.ba.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createSharedClientState",value:function(e){var t=jv();if(!Pv.v(t))throw new nu(tu.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=tv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Pv(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(um),cm=function(){function e(){ie(this,e)}return ue(e,[{key:"initialize",value:function(){var e=re(te().mark((function e(t,n){var r=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return by(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Vy.bind(null,this.syncEngine),e.next=12,Lp(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new Gp}},{key:"createDatastore",value:function(e){var t=Kv(e.databaseInfo.databaseId),n=function(e){return new Bv(e)}(e.databaseInfo);return function(e,t,n,r){return new $v(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}},{key:"createRemoteStore",value:function(e){var t=this;return function(e,t,n,r,i){return new Zv(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(function(e){return by(t.syncEngine,e,0)}),Lv.v()?new Lv:new Rv)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new cy(e,t,n,r,i,a);return o&&(u.pa=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=re(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=eu(t),Ho("RemoteStore","RemoteStore shutting down."),n.p_.add(5),e.next=5,ep(n);case 5:n.w_.shutdown(),n.S_.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function lm(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return re(te().mark((function r(){var i;return te().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return re(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.resolve()}}var fm=function(){function e(t){ie(this,e),this.observer=t,this.muted=!1}return ue(e,[{key:"next",value:function(e){this.observer.next&&this.Da(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Da(this.observer.error,e):$o("Uncaught Error in snapshot listener:",e.toString())}},{key:"va",value:function(){this.muted=!0}},{key:"Da",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),hm=function(){function e(t,n){var r=this;ie(this,e),this.Ca=t,this.serializer=n,this.metadata=new ru,this.buffer=new Uint8Array,this.Fa=new TextDecoder("utf-8"),this.Ma().then((function(e){e&&e.G_()?r.metadata.resolve(e.W_.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.W_))))}),(function(e){return r.metadata.reject(e)}))}return ue(e,[{key:"close",value:function(){return this.Ca.cancel()}},{key:"getMetadata",value:function(){var e=re(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Sa",value:function(){var e=re(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Ma());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ma",value:function(){var e=re(te().mark((function e(){var t,n,r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.xa();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Fa.decode(t),r=Number(n),isNaN(r)&&this.Oa("length string (".concat(n,") is not valid number")),e.next=9,this.Na(r);case 9:return i=e.sent,e.abrupt("return",new ey(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ba",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"xa",value:function(){var e=re(te().mark((function e(){var t,n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Ba()<0)){e.next=7;break}return e.next=3,this.La();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Ba())<0&&this.Oa("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Na",value:function(){var e=re(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.La();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Oa("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Fa.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Oa",value:function(e){throw this.Ca.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"La",value:function(){var e=re(te().mark((function e(){var t,n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ca.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),dm=function(){function e(t){ie(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return ue(e,[{key:"lookup",value:function(){var e=re(te().mark((function e(t){var n,r=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new nu(tu.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=re(te().mark((function e(t,n){var r,i,a,o,u,s;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=eu(t),i=Hf(r.serializer)+"/documents",a={documents:n.map((function(e){return Kf(r.serializer,e)}))},e.next=5,r.po("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=Xf(r.serializer,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());Jo(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new sf(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=re(te().mark((function e(){var t,n=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=xu.fromPath(t);n.mutations.push(new cf(r,n.precondition(r)))})),e.next=7,function(){var e=re(te().mark((function e(t,n){var r,i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=eu(t),i=Hf(r.serializer)+"/documents",a={writes:n.map((function(e){return Jf(r.serializer,e)}))},e.next=3,r.Ro("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Xo();t=gu.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new nu(tu.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(gu.min())?Ql.exists(!1):Ql.updateTime(t):Ql.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(gu.min()))throw new nu(tu.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ql.updateTime(t)}return Ql.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),vm=function(){function e(t,n,r,i,a){ie(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.ka=r.maxAttempts,this.Qo=new Gv(this.asyncQueue,"transaction_retry")}return ue(e,[{key:"run",value:function(){this.ka-=1,this.qa()}},{key:"qa",value:function(){var e=this;this.Qo.Mo(re(te().mark((function t(){var n,r;return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new dm(e.datastore),(r=e.Qa(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Ka(t)}))}))})).catch((function(t){e.Ka(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Qa",value:function(e){try{var t=this.updateFunction(e);return!Yu(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Ka",value:function(e){var t=this;this.ka>0&&this.$a(e)?(this.ka-=1,this.asyncQueue.enqueueAndForget((function(){return t.qa(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"$a",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!vf(t)}return!1}}]),e}(),pm=function(){function e(t,n,r,i){var a=this;ie(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ko.UNAUTHENTICATED,this.clientId=du.V(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=re(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ho("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return Ho("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return ue(e,[{key:"getConfiguration",value:function(){var e=re(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new nu(tu.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new ru;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(re(te().mark((function n(){var r;return te().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e._onlineComponents,!n.t0){n.next=5;break}return n.next=5,e._onlineComponents.terminate();case 5:if(n.t1=e._offlineComponents,!n.t1){n.next=9;break}return n.next=9,e._offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=Up(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function ym(e,t){return mm.apply(this,arguments)}function mm(){return mm=re(te().mark((function e(t,n){var r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Ho("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=re(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,ov(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t._offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),mm.apply(this,arguments)}function gm(e,t){return km.apply(this,arguments)}function km(){return km=re(te().mark((function e(t,n){var r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,wm(t);case 3:return r=e.sent,Ho("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return Op(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return Op(n.remoteStore,t)})),t._onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),km.apply(this,arguments)}function bm(e){return"FirebaseError"===e.name?e.code===tu.FAILED_PRECONDITION||e.code===tu.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}function wm(e){return _m.apply(this,arguments)}function _m(){return(_m=re(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._offlineComponents){e.next=21;break}if(!t._uninitializedComponentsProvider){e.next=18;break}return Ho("FirestoreClient","Using user provided OfflineComponentProvider"),e.prev=3,e.next=6,ym(t,t._uninitializedComponentsProvider._offline);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),bm(n=e.t0)){e.next=13;break}throw n;case 13:return Yo("Error using user provided cache. Falling back to memory cache: "+n),e.next=16,ym(t,new om);case 16:e.next=21;break;case 18:return Ho("FirestoreClient","Using default OfflineComponentProvider"),e.next=21,ym(t,new om);case 21:return e.abrupt("return",t._offlineComponents);case 22:case"end":return e.stop()}}),e,null,[[3,8]])})))).apply(this,arguments)}function xm(e){return Sm.apply(this,arguments)}function Sm(){return(Sm=re(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t._onlineComponents,e.t0){e.next=11;break}if(!t._uninitializedComponentsProvider){e.next=8;break}return Ho("FirestoreClient","Using user provided OnlineComponentProvider"),e.next=6,gm(t,t._uninitializedComponentsProvider._online);case 6:e.next=11;break;case 8:return Ho("FirestoreClient","Using default OnlineComponentProvider"),e.next=11,gm(t,new cm);case 11:return e.abrupt("return",t._onlineComponents);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Em(e){return wm(e).then((function(e){return e.persistence}))}function Im(e){return wm(e).then((function(e){return e.localStore}))}function Tm(e){return xm(e).then((function(e){return e.remoteStore}))}function Cm(e){return xm(e).then((function(e){return e.syncEngine}))}function Nm(e){return xm(e).then((function(e){return e.datastore}))}function Dm(e){return Am.apply(this,arguments)}function Am(){return(Am=re(te().mark((function e(t){var n,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xm(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=ly.bind(null,n.syncEngine),r.onUnlisten=vy.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pm(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new ru;return e.asyncQueue.enqueueAndForget(re(te().mark((function i(){return te().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new fm({next:function(a){t.enqueueAndForget((function(){return Hp(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new nu(tu.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new nu(tu.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new Jp(Jc(n.path),a,{includeMetadataChanges:!0,U_:!0});return Qp(e,o)},i.next=3,Dm(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function Om(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new ru;return e.asyncQueue.enqueueAndForget(re(te().mark((function i(){return te().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new fm({next:function(n){t.enqueueAndForget((function(){return Hp(e,o)})),n.fromCache&&"server"===r.source?i.reject(new nu(tu.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new Jp(n,a,{includeMetadataChanges:!0,U_:!0});return Qp(e,o)},i.next=3,Dm(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function Rm(e){var t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}var Lm=new Map;function Mm(e,t,n){if(!n)throw new nu(tu.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Fm(e,t,n,r){if(!0===t&&!0===r)throw new nu(tu.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function Vm(e){if(!xu.isDocumentKey(e))throw new nu(tu.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function zm(e){if(xu.isDocumentKey(e))throw new nu(tu.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Um(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Xo()}function Bm(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new nu(tu.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Um(e);throw new nu(tu.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function jm(e,t){if(t<=0)throw new nu(tu.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var qm=function(){function e(t){var n,r;if(ie(this,e),void 0===t.host){if(void 0!==t.ssl)throw new nu(tu.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new nu(tu.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Fm("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Rm(null!==(r=t.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new nu(tu.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new nu(tu.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new nu(tu.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}return ue(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),Km=function(){function e(t,n,r,i){ie(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qm({}),this._settingsFrozen=!1}return ue(e,[{key:"app",get:function(){if(!this._app)throw new nu(tu.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new nu(tu.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qm(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new au;switch(e.type){case"firstParty":return new cu(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new nu(tu.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=Lm.get(e);t&&(Ho("ComponentProvider","Removing Datastore"),Lm.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function Gm(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=Bm(e,Km))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==a.host&&a.host!==o&&Yo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),i.mockUserToken){var u,s;if("string"==typeof i.mockUserToken)u=i.mockUserToken,s=Ko.MOCK_USER;else{u=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[be(JSON.stringify({alg:"none",type:"JWT"})),be(JSON.stringify(a)),""].join(".")}(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new nu(tu.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new Ko(c)}e._authCredentials=new ou(new iu(u,s))}}var Qm=function(){function e(t,n,r){ie(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return ue(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),Wm=function(){function e(t,n,r){ie(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return ue(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new Hm(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),Hm=function(e){fe(n,e);var t=ve(n);function n(e,r,i){var a;return ie(this,n),(a=t.call(this,e,r,Jc(i)))._path=i,a.type="collection",a}return ue(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new Wm(this.firestore,null,new xu(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(Qm);function $m(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Ue(e),Mm("collection","path",t),e instanceof Km){var a=bu.fromString.apply(bu,[t].concat(r));return zm(a),new Hm(e,null,a)}if(!(e instanceof Wm||e instanceof Hm))throw new nu(tu.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(bu.fromString.apply(bu,[t].concat(r)));return zm(o),new Hm(e.firestore,null,o)}function Ym(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Ue(e),1===arguments.length&&(t=du.V()),Mm("doc","path",t),e instanceof Km){var a=bu.fromString.apply(bu,[t].concat(r));return Vm(a),new Wm(e,null,new xu(a))}if(!(e instanceof Wm||e instanceof Hm))throw new nu(tu.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(bu.fromString.apply(bu,[t].concat(r)));return Vm(o),new Wm(e.firestore,e instanceof Hm?e.converter:null,new xu(o))}function Zm(e,t){return e=Ue(e),t=Ue(t),(e instanceof Wm||e instanceof Hm)&&(t instanceof Wm||t instanceof Hm)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Xm(e,t){return e=Ue(e),t=Ue(t),e instanceof Qm&&t instanceof Qm&&e.firestore===t.firestore&&sl(e._query,t._query)&&e.converter===t.converter}var Jm=function(){function e(){var t=this;ie(this,e),this.Ua=Promise.resolve(),this.Wa=[],this.Ga=!1,this.za=[],this.ja=null,this.Ha=!1,this.Ja=!1,this.Ya=[],this.Qo=new Gv(this,"async_queue_retry"),this.Za=function(){var e=qv();e&&Ho("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Qo.Oo()};var n=qv();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Za)}return ue(e,[{key:"isShuttingDown",get:function(){return this.Ga}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Xa(),this.eu(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Ga){this.Ga=!0,this.Ja=e||!1;var t=qv();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Za)}}},{key:"enqueue",value:function(e){var t=this;if(this.Xa(),this.Ga)return new Promise((function(){}));var n=new ru;return this.eu((function(){return t.Ga&&t.Ja?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Wa.push(e),t.tu()}))}},{key:"tu",value:function(){var e=re(te().mark((function e(){var t=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Wa.length){e.next=14;break}return e.prev=1,e.next=4,this.Wa[0]();case 4:this.Wa.shift(),this.Qo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),ju(e.t0)){e.next=12;break}throw e.t0;case 12:Ho("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Wa.length>0&&this.Qo.Mo((function(){return t.tu()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"eu",value:function(e){var t=this,n=this.Ua.then((function(){return t.Ha=!0,e().catch((function(e){t.ja=e,t.Ha=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw $o("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Ha=!1,e}))}));return this.Ua=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Xa(),this.Ya.indexOf(e)>-1&&(t=0);var i=zp.createAndSchedule(this,e,t,n,(function(e){return r.nu(e)}));return this.za.push(i),i}},{key:"Xa",value:function(){this.ja&&Xo()}},{key:"verifyOperationInProgress",value:function(){}},{key:"ru",value:function(){var e=re(te().mark((function e(){var t;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Ua,e.next=3,t;case 3:if(t!==this.Ua){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"iu",value:function(e){var t,n=se(this.za);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"su",value:function(e){var t=this;return this.ru().then((function(){t.za.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=se(t.za);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.ru()}))}},{key:"ou",value:function(e){this.Ya.push(e)}},{key:"nu",value:function(e){var t=this.za.indexOf(e);this.za.splice(t,1)}}]),e}();function eg(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=se(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var tg=function(){function e(){ie(this,e),this._progressObserver={},this._taskCompletionResolver=new ru,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return ue(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),ng=function(e){fe(n,e);var t=ve(n);function n(e,r,i,a){var o;return ie(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new Jm,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return ue(n,[{key:"_terminate",value:function(){return this._firestoreClient||ig(this),this._firestoreClient.terminate()}}]),n}(Km);function rg(e){return e._firestoreClient||ig(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function ig(e){var t,n,r,i=e._freezeSettings(),a=function(e,t,n,r){return new Ws(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Rm(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new pm(e._authCredentials,e._appCheckCredentials,e._queue,a),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function ag(e,t,n){var r=new ru;return e.asyncQueue.enqueue(re(te().mark((function i(){var a;return te().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,ym(e,n);case 3:return i.next=5,gm(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),bm(a=i.t0)){i.next=13;break}throw a;case 13:Yo("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function og(e){return function(e){var t=new ru;return e.asyncQueue.enqueueAndForget(re(te().mark((function n(){return te().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=Ty,n.next=3,Cm(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(rg(e=Bm(e,ng)))}function ug(e){return function(e){return e.asyncQueue.enqueue(re(te().mark((function t(){var n,r;return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Em(e);case 2:return n=t.sent,t.next=5,Tm(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=eu(e);return t.p_.delete(0),Xv(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(rg(e=Bm(e,ng)))}function sg(e){return function(e){return e.asyncQueue.enqueue(re(te().mark((function t(){var n,r;return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Em(e);case 2:return n=t.sent,t.next=5,Tm(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=re(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=eu(t)).p_.add(0),e.next=4,ep(n);case 4:n.S_.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(rg(e=Bm(e,ng)))}function cg(e,t){var n=rg(e=Bm(e,ng)),r=new tg;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new hm(e,t)}(function(e,t){if(e instanceof Uint8Array)return lm(e,t);if(e instanceof ArrayBuffer)return lm(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?gf().encode(e):e),t)}(n,Kv(t));e.asyncQueue.enqueueAndForget(re(te().mark((function t(){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=am,t.next=3,Cm(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function lg(e,t){return function(e,t){return e.asyncQueue.enqueue(re(te().mark((function n(){return te().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=eu(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Qr.getNamedQuery(e,t)}))},n.next=3,Im(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(rg(e=Bm(e,ng)),t).then((function(t){return t?new Qm(e,null,t.query):null}))}function fg(e){if(e._initialized||e._terminated)throw new nu(tu.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var hg=function(){function e(t){ie(this,e),this._byteString=t}return ue(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(zs.fromBase64String(t))}catch(t){throw new nu(tu.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(zs.fromUint8Array(t))}}]),e}(),dg=function(){function e(){ie(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new nu(tu.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _u(n)}return ue(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var vg=ue((function e(t){ie(this,e),this._methodName=t})),pg=function(){function e(t,n){if(ie(this,e),!isFinite(t)||t<-90||t>90)throw new nu(tu.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new nu(tu.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return ue(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return vu(this._lat,e._lat)||vu(this._long,e._long)}}]),e}(),yg=/^__.*__$/,mg=function(){function e(t,n,r){ie(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return ue(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new tf(e,this.data,this.fieldMask,t,this.fieldTransforms):new ef(e,this.data,t,this.fieldTransforms)}}]),e}(),gg=function(){function e(t,n,r){ie(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return ue(e,[{key:"toMutation",value:function(e,t){return new tf(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function kg(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Xo()}}var bg=function(){function e(t,n,r,i,a,o){ie(this,e),this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this._u(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return ue(e,[{key:"path",get:function(){return this.settings.path}},{key:"au",get:function(){return this.settings.au}},{key:"uu",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"cu",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.uu({path:n,lu:!1});return r.hu(e),r}},{key:"Pu",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.uu({path:n,lu:!1});return r._u(),r}},{key:"Iu",value:function(e){return this.uu({path:void 0,lu:!0})}},{key:"Tu",value:function(e){return Ug(e,this.settings.methodName,this.settings.Eu||!1,this.path,this.settings.du)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"_u",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.hu(this.path.get(e))}},{key:"hu",value:function(e){if(0===e.length)throw this.Tu("Document fields must not be empty");if(kg(this.au)&&yg.test(e))throw this.Tu('Document fields cannot begin and end with "__"')}}]),e}(),wg=function(){function e(t,n,r){ie(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||Kv(t)}return ue(e,[{key:"Au",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new bg({au:e,methodName:t,du:n,path:_u.emptyPath(),lu:!1,Eu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}]),e}();function _g(e){var t=e._freezeSettings(),n=Kv(e._databaseId);return new wg(e._databaseId,!!t.ignoreUndefinedProperties,n)}function xg(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.Au(a.merge||a.mergeFields?2:0,t,n,i);Mg("Data must be an object, but it was:",o,r);var u,s,c=Rg(r,o);if(a.merge)u=new Fs(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=se(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=Fg(t,l.value,n);if(!o.contains(d))throw new nu(tu.INVALID_ARGUMENT,"Field '".concat(d,"' is specified in your field mask but missing from your input data."));Bg(f,d)||f.push(d)}}catch(v){h.e(v)}finally{h.f()}u=new Fs(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new mg(new yc(c),u,s)}var Sg=function(e){fe(n,e);var t=ve(n);function n(){return ie(this,n),t.apply(this,arguments)}return ue(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.au)throw 1===e.au?e.Tu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Tu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(vg);function Eg(e,t,n){return new bg({au:3,du:t.settings.du,methodName:e._methodName,lu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var Ig=function(e){fe(n,e);var t=ve(n);function n(){return ie(this,n),t.apply(this,arguments)}return ue(n,[{key:"_toFieldTransform",value:function(e){return new Kl(e.path,new Ml)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(vg),Tg=function(e){fe(n,e);var t=ve(n);function n(e,r){var i;return ie(this,n),(i=t.call(this,e)).Ru=r,i}return ue(n,[{key:"_toFieldTransform",value:function(e){var t=Eg(this,e,!0),n=this.Ru.map((function(e){return Og(e,t)})),r=new Fl(n);return new Kl(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(vg),Cg=function(e){fe(n,e);var t=ve(n);function n(e,r){var i;return ie(this,n),(i=t.call(this,e)).Ru=r,i}return ue(n,[{key:"_toFieldTransform",value:function(e){var t=Eg(this,e,!0),n=this.Ru.map((function(e){return Og(e,t)})),r=new zl(n);return new Kl(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(vg),Ng=function(e){fe(n,e);var t=ve(n);function n(e,r){var i;return ie(this,n),(i=t.call(this,e)).Vu=r,i}return ue(n,[{key:"_toFieldTransform",value:function(e){var t=new Bl(e.serializer,Al(e.serializer,this.Vu));return new Kl(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(vg);function Dg(e,t,n,r){var i=e.Au(1,t,n);Mg("Data must be an object, but it was:",i,r);var a=[],o=yc.empty();Ns(r,(function(e,r){var u=zg(t,e,n);r=Ue(r);var s=i.Pu(u);if(r instanceof Sg)a.push(u);else{var c=Og(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new Fs(a);return new gg(o,u,i.fieldTransforms)}function Ag(e,t,n,r,i,a){var o=e.Au(1,t,n),u=[Fg(t,r,n)],s=[i];if(a.length%2!=0)throw new nu(tu.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(Fg(t,a[c])),s.push(a[c+1]);for(var l=[],f=yc.empty(),h=u.length-1;h>=0;--h)if(!Bg(l,u[h])){var d=u[h],v=s[h];v=Ue(v);var p=o.Pu(d);if(v instanceof Sg)l.push(d);else{var y=Og(v,p);null!=y&&(l.push(d),f.set(d,y))}}var m=new Fs(l);return new gg(f,m,o.fieldTransforms)}function Pg(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Og(n,e.Au(r?4:3,t))}function Og(e,t){if(Lg(e=Ue(e)))return Mg("Unsupported field value:",t,e),Rg(e,t);if(e instanceof vg)return function(e,t){if(!kg(t.au))throw t.Tu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Tu("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.lu&&4!==t.au)throw t.Tu("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=se(e);try{for(a.s();!(n=a.n()).done;){var o=Og(n.value,t.Iu(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=Ue(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Al(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=mu.fromDate(e);return{timestampValue:Vf(t.serializer,n)}}if(e instanceof mu){var r=new mu(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Vf(t.serializer,r)}}if(e instanceof pg)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof hg)return{bytesValue:zf(t.serializer,e._byteString)};if(e instanceof Wm){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.Tu("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:jf(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Tu("Unsupported field value: ".concat(Um(e)))}(e,t)}function Rg(e,t){var n={};return Ds(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ns(e,(function(e,r){var i=Og(r,t.cu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Lg(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof mu||e instanceof pg||e instanceof hg||e instanceof Wm||e instanceof vg)}function Mg(e,t,n){if(!Lg(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=Um(n);throw"an object"===r?t.Tu(e+" a custom object"):t.Tu(e+" "+r)}}function Fg(e,t,n){if((t=Ue(t))instanceof dg)return t._internalPath;if("string"==typeof t)return zg(e,t);throw Ug("Field path arguments must be of type string or ",e,!1,void 0,n)}var Vg=new RegExp("[~\\*/\\[\\]]");function zg(e,t,n){if(t.search(Vg)>=0)throw Ug("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return pe(dg,x(t.split(".")))._internalPath}catch(On){throw Ug("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Ug(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new nu(tu.INVALID_ARGUMENT,u+e+s)}function Bg(e,t){return e.some((function(e){return e.isEqual(t)}))}var jg=function(){function e(t,n,r,i,a){ie(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return ue(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new Wm(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new qg(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(Kg("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),qg=function(e){fe(n,e);var t=ve(n);function n(){return ie(this,n),t.apply(this,arguments)}return ue(n,[{key:"data",value:function(){return kn(he(n.prototype),"data",this).call(this)}}]),n}(jg);function Kg(e,t){return"string"==typeof t?zg(e,t):t instanceof dg?t._internalPath:t._delegate._internalPath}function Gg(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new nu(tu.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Qg=ue((function e(){ie(this,e)})),Wg=function(e){fe(n,e);var t=ve(n);function n(){return ie(this,n),t.apply(this,arguments)}return ue(n)}(Qg);function Hg(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof Qg&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof Yg})).length,n=e.filter((function(e){return e instanceof $g})).length;if(t>1||t>0&&n>0)throw new nu(tu.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,u=se(n);try{for(u.s();!(o=u.n()).done;){e=o.value._apply(e)}}catch(s){u.e(s)}finally{u.f()}return e}var $g=function(e){fe(n,e);var t=ve(n);function n(e,r,i){var a;return ie(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return ue(n,[{key:"_apply",value:function(e){var t=this._parse(e);return sk(e._query,t),new Qm(e.firestore,e.converter,ol(e._query,t))}},{key:"_parse",value:function(e){var t=_g(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new nu(tu.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){uk(o,a);var s,c=[],l=se(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(ok(r,e,f))}}catch(h){l.e(h)}finally{l.f()}u={arrayValue:{values:c}}}else u=ok(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||uk(o,a),u=Pg(n,t,o,"in"===a||"not-in"===a);return Ec.create(i,a,u)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(Wg);var Yg=function(e){fe(n,e);var t=ve(n);function n(e,r){var i;return ie(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return ue(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:Ic.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=se(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;sk(r,a),r=ol(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new Qm(e.firestore,e.converter,ol(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Qg);var Zg=function(e){fe(n,e);var t=ve(n);function n(e,r){var i;return ie(this,n),(i=t.call(this))._field=e,i._direction=r,i.type="orderBy",i}return ue(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new nu(tu.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new nu(tu.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new _c(t,n);return function(e,t){if(null===tl(e)){var n=nl(e);null!==n&&ck(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new Qm(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Zc(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Wg);var Xg=function(e){fe(n,e);var t=ve(n);function n(e,r,i){var a;return ie(this,n),(a=t.call(this)).type=e,a._limit=r,a._limitType=i,a}return ue(n,[{key:"_apply",value:function(e){return new Qm(e.firestore,e.converter,ul(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(Wg);var Jg=function(e){fe(n,e);var t=ve(n);function n(e,r,i){var a;return ie(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return ue(n,[{key:"_apply",value:function(e){var t=ak(e,this.type,this._docOrFields,this._inclusive);return new Qm(e.firestore,e.converter,function(e,t){return new Zc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(Wg);function ek(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Jg._create("startAt",t,!0)}function tk(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Jg._create("startAfter",t,!1)}var nk=function(e){fe(n,e);var t=ve(n);function n(e,r,i){var a;return ie(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return ue(n,[{key:"_apply",value:function(e){var t=ak(e,this.type,this._docOrFields,this._inclusive);return new Qm(e.firestore,e.converter,function(e,t){return new Zc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(Wg);function rk(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return nk._create("endBefore",t,!1)}function ik(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return nk._create("endAt",t,!0)}function ak(e,t,n,r){if(n[0]=Ue(n[0]),n[0]instanceof jg)return function(e,t,n,r,i){if(!r)throw new nu(tu.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=se(il(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(ic(t,r.key));else{var c=r.data.field(s.field);if(Ks(c))throw new nu(tu.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new nu(tu.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new kc(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=_g(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new nu(tu.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new nu(tu.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!rl(e)&&-1!==c.indexOf("/"))throw new nu(tu.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(bu.fromString(c));if(!xu.isDocumentKey(l))throw new nu(tu.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new xu(l);u.push(ic(t,f))}else{var h=Pg(n,r,c);u.push(h)}}return new kc(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function ok(e,t,n){if("string"==typeof(n=Ue(n))){if(""===n)throw new nu(tu.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!rl(t)&&-1!==n.indexOf("/"))throw new nu(tu.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(bu.fromString(n));if(!xu.isDocumentKey(r))throw new nu(tu.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return ic(e,new xu(r))}if(n instanceof Wm)return ic(e,n._key);throw new nu(tu.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Um(n),"."))}function uk(e,t){if(!Array.isArray(e)||0===e.length)throw new nu(tu.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function sk(e,t){if(t.isInequality()){var n=nl(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new nu(tu.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=tl(e);null!==i&&ck(e,r,i)}var a=function(e,t){var n,r=se(e);try{for(r.s();!(n=r.n()).done;){var i,a=se(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(u){a.e(u)}finally{a.f()}}}catch(u){r.e(u)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new nu(tu.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new nu(tu.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function ck(e,t,n){if(!n.isEqual(t))throw new nu(tu.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var lk=function(){function e(){ie(this,e)}return ue(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Zs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return js(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(qs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Xo()}}},{key:"convertObject",value:function(e,t){return this.convertObjectMap(e.fields,t)}},{key:"convertObjectMap",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",r={};return Ns(e,(function(e,i){r[e]=t.convertValue(i,n)})),r}},{key:"convertGeoPoint",value:function(e){return new pg(js(e.latitude),js(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Gs(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Qs(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Bs(e);return new mu(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=bu.fromString(e);Jo(hh(n));var r=new Hs(n.get(1),n.get(3)),i=new xu(n.popFirst(5));return r.isEqual(t)||$o("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function fk(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var hk=function(e){fe(n,e);var t=ve(n);function n(e){var r;return ie(this,n),(r=t.call(this)).firestore=e,r}return ue(n,[{key:"convertBytes",value:function(e){return new hg(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wm(this.firestore,null,t)}}]),n}(lk);var dk=function(){function e(t,n){ie(this,e),this.hasPendingWrites=t,this.fromCache=n}return ue(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),vk=function(e){fe(n,e);var t=ve(n);function n(e,r,i,a,o,u){var s;return ie(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return ue(n,[{key:"exists",value:function(){return kn(he(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new pk(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(Kg("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(jg),pk=function(e){fe(n,e);var t=ve(n);function n(){return ie(this,n),t.apply(this,arguments)}return ue(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return kn(he(n.prototype),"data",this).call(this,e)}}]),n}(vk),yk=function(){function e(t,n,r,i){ie(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new dk(i.hasPendingWrites,i.fromCache),this.query=r}return ue(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new pk(n._firestore,n._userDataWriter,r.key,r,new dk(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new nu(tu.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new pk(e._firestore,e._userDataWriter,t.doc.key,t.doc,new dk(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new pk(e._firestore,e._userDataWriter,t.doc.key,t.doc,new dk(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:mk(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function mk(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Xo()}}function gk(e,t){return e instanceof vk&&t instanceof vk?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof yk&&t instanceof yk&&e._firestore===t._firestore&&Xm(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var kk=function(e){fe(n,e);var t=ve(n);function n(e){var r;return ie(this,n),(r=t.call(this)).firestore=e,r}return ue(n,[{key:"convertBytes",value:function(e){return new hg(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wm(this.firestore,null,t)}}]),n}(lk);function bk(e){e=Bm(e,Wm);var t=Bm(e.firestore,ng),n=rg(t),r=new kk(t);return function(e,t){var n=new ru;return e.asyncQueue.enqueueAndForget(re(te().mark((function r(){return te().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=re(te().mark((function e(t,n,r){var i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=eu(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new nu(tu.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=Up(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Im(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new vk(t,r,e._key,n,new dk(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function wk(e){e=Bm(e,Qm);var t=Bm(e.firestore,ng),n=rg(t),r=new kk(t);return Gg(e._query),Om(n,e._query).then((function(n){return new yk(t,r,e,n)}))}function _k(e){e=Bm(e,Qm);var t=Bm(e.firestore,ng),n=rg(t),r=new kk(t);return function(e,t){var n=new ru;return e.asyncQueue.enqueueAndForget(re(te().mark((function r(){return te().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=re(te().mark((function e(t,n,r){var i,a,o,u,s;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,yv(t,n,!0);case 3:i=e.sent,a=new oy(n,i.ss),o=a.ia(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=Up(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Im(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new yk(t,r,e,n)}))}function xk(e){e=Bm(e,Qm);var t=Bm(e.firestore,ng),n=rg(t),r=new kk(t);return Om(n,e._query,{source:"server"}).then((function(n){return new yk(t,r,e,n)}))}function Sk(e,t,n){e=Bm(e,Wm);var r=Bm(e.firestore,ng),i=fk(e.converter,t,n);return Ck(r,[xg(_g(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Ql.none())])}function Ek(e,t,n){e=Bm(e,Wm);for(var r=Bm(e.firestore,ng),i=_g(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return Ck(r,[("string"==typeof(t=Ue(t))||t instanceof dg?Ag(i,"updateDoc",e._key,t,n,o):Dg(i,"updateDoc",e._key,t)).toMutation(e._key,Ql.exists(!0))])}function Ik(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=Ue(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||eg(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(eg(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof Wm)l=Bm(e.firestore,ng),f=Jc(e._key.path),c={next:function(t){n[s]&&n[s](Nk(l,e,t))},error:n[s+1],complete:n[s+2]};else{var v=Bm(e,Qm);l=Bm(v.firestore,ng),f=v._query;var p=new kk(l);c={next:function(e){n[s]&&n[s](new yk(l,p,v,e))},error:n[s+1],complete:n[s+2]},Gg(e._query)}return function(e,t,n,r){var i=new fm(r),a=new Jp(t,i,n);return e.asyncQueue.enqueueAndForget(re(te().mark((function t(){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Qp,t.next=3,Dm(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.va(),e.asyncQueue.enqueueAndForget(re(te().mark((function t(){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Hp,t.next=3,Dm(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(rg(l),f,h,c)}function Tk(e,t){return function(e,t){var n=new fm(t);return e.asyncQueue.enqueueAndForget(re(te().mark((function t(){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){eu(e).x_.add(t),t.next()},t.next=3,Dm(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.va(),e.asyncQueue.enqueueAndForget(re(te().mark((function t(){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){eu(e).x_.delete(t)},t.next=3,Dm(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(rg(e=Bm(e,ng)),eg(t)?t:{next:t})}function Ck(e,t){return function(e,t){var n=new ru;return e.asyncQueue.enqueueAndForget(re(te().mark((function r(){return te().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=yy,r.next=3,Cm(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(rg(e),t)}function Nk(e,t,n){var r=n.docs.get(t._key),i=new kk(e);return new vk(e,i,t._key,r,new dk(n.hasPendingWrites,n.fromCache),t.converter)}var Dk={maxAttempts:5},Ak=function(){function e(t,n){ie(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=_g(t)}return ue(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=Pk(e,this._firestore),i=fk(r.converter,t,n),a=xg(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Ql.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=Pk(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Ue(t))||t instanceof dg?Ag(this._dataReader,"WriteBatch.update",i._key,t,n,o):Dg(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Ql.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=Pk(e,this._firestore);return this._mutations=this._mutations.concat(new sf(t._key,Ql.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new nu(tu.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function Pk(e,t){if((e=Ue(e)).firestore!==t)throw new nu(tu.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var Ok=function(e){fe(n,e);var t=ve(n);function n(e,r){var i;return ie(this,n),(i=t.call(this,e,r))._firestore=e,i}return ue(n,[{key:"get",value:function(e){var t=this,r=Pk(e,this._firestore),i=new kk(this._firestore);return kn(he(n.prototype),"get",this).call(this,e).then((function(e){return new vk(t._firestore,i,r._key,e._document,new dk(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){ie(this,e),this._firestore=t,this._transaction=n,this._dataReader=_g(t)}return ue(e,[{key:"get",value:function(e){var t=this,n=Pk(e,this._firestore),r=new hk(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return Xo();var i=e[0];if(i.isFoundDocument())return new jg(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new jg(t._firestore,r,n._key,null,n.converter);throw Xo()}))}},{key:"set",value:function(e,t,n){var r=Pk(e,this._firestore),i=fk(r.converter,t,n),a=xg(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=Pk(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Ue(t))||t instanceof dg?Ag(this._dataReader,"Transaction.update",i._key,t,n,o):Dg(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=Pk(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function Rk(e,t,n){e=Bm(e,ng);var r=Object.assign(Object.assign({},Dk),n);return function(e){if(e.maxAttempts<1)throw new nu(tu.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new ru;return e.asyncQueue.enqueueAndForget(re(te().mark((function i(){var a;return te().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Nm(e);case 2:a=i.sent,new vm(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(rg(e),(function(n){return t(new Ok(e,n))}),r)}function Lk(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Tg("arrayUnion",t)}function Mk(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Cg("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Go=e}(Mt),Nt(new Be("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new ng(new uu(e.getProvider("auth-internal")),new fu(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new nu(tu.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hs(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),jt(qo,"4.0.0",e),jt(qo,"4.0.0","esm2017")}();var Fk="@firebase/firestore-compat",Vk="0.3.13";function zk(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new nu("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function Uk(){if("undefined"===typeof Uint8Array)throw new nu("unimplemented","Uint8Arrays are not available in this environment.")}function Bk(){if("undefined"==typeof atob)throw new nu("unimplemented","Blobs are unavailable in Firestore in this environment.")}var jk=function(){function e(t){ie(this,e),this._delegate=t}return ue(e,[{key:"toBase64",value:function(){return Bk(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return Uk(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return Bk(),new e(hg.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return Uk(),new e(hg.fromUint8Array(t))}}]),e}();function qk(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=se(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var Kk=function(){function e(){ie(this,e)}return ue(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){fg(e=Bm(e,ng));var n=rg(e);if(n._uninitializedComponentsProvider)throw new nu(tu.FAILED_PRECONDITION,"SDK cache is already specified.");Yo("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var r=e._freezeSettings(),i=new cm;return ag(n,i,new um(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){fg(e=Bm(e,ng));var t=rg(e);if(t._uninitializedComponentsProvider)throw new nu(tu.FAILED_PRECONDITION,"SDK cache is already specified.");Yo("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var n=e._freezeSettings(),r=new cm;return ag(t,r,new sm(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new nu(tu.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new ru;return e._queue.enqueueAndForgetEvenWhileRestricted(re(te().mark((function n(){return te().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=re(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(zu.v()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,zu.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(tv(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),Gk=function(){function e(t,n,r){var i=this;ie(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof Hs||(this._appCompat=t)}return ue(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||Yo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Gm(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return ug(this._delegate)}},{key:"disableNetwork",value:function(){return sg(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&Fm("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return og(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return Tk(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new nu("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new ab(this,$m(this._delegate,e))}catch(t){throw Zk(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new Yk(this,Ym(this._delegate,e))}catch(t){throw Zk(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new nb(this,function(e,t){if(e=Bm(e,Km),Mm("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new nu(tu.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new Qm(e,null,function(e){return new Zc(bu.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw Zk(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return Rk(this._delegate,(function(n){return e(new Wk(t,n))}))}},{key:"batch",value:function(){var e=this;return rg(this._delegate),new Hk(new Ak(this._delegate,(function(t){return Ck(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return cg(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return lg(this._delegate,e).then((function(e){return e?new nb(t,e):null}))}}]),e}(),Qk=function(e){fe(n,e);var t=ve(n);function n(e){var r;return ie(this,n),(r=t.call(this)).firestore=e,r}return ue(n,[{key:"convertBytes",value:function(e){return new jk(new hg(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return Yk.forKey(t,this.firestore,null)}}]),n}(lk);var Wk=function(){function e(t,n){ie(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new Qk(t)}return ue(e,[{key:"get",value:function(e){var t=this,n=ob(e);return this._delegate.get(n).then((function(e){return new eb(t._firestore,new vk(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=ob(e);return n?(zk("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=ob(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=ob(e);return this._delegate.delete(t),this}}]),e}(),Hk=function(){function e(t){ie(this,e),this._delegate=t}return ue(e,[{key:"set",value:function(e,t,n){var r=ob(e);return n?(zk("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=ob(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=ob(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),$k=function(){function e(t,n,r){ie(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return ue(e,[{key:"fromFirestore",value:function(e,t){var n=new pk(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new tb(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new Qk(t),n),i.set(n,a)),a}}]),e}();$k.INSTANCES=new WeakMap;var Yk=function(){function e(t,n){ie(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new Qk(t)}return ue(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new ab(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new ab(this.firestore,$m(this._delegate,e))}catch(t){throw Zk(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=Ue(e))instanceof Wm&&Zm(this._delegate,e)}},{key:"set",value:function(e,t){t=zk("DocumentReference.set",t);try{return t?Sk(this._delegate,e,t):Sk(this._delegate,e)}catch(n){throw Zk(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?Ek(this._delegate,e):Ek.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw Zk(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return Ck(Bm((e=this._delegate).firestore,ng),[new sf(e._key,Ql.none())]);var e}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=Xk(n),a=Jk(n,(function(t){return new eb(e.firestore,new vk(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return Ik(this._delegate,i,a)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?bk(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Bm(e,Wm);var t=Bm(e.firestore,ng);return Pm(rg(t),e._key,{source:"server"}).then((function(n){return Nk(t,e,n)}))}(this._delegate):function(e){e=Bm(e,Wm);var t=Bm(e.firestore,ng);return Pm(rg(t),e._key).then((function(n){return Nk(t,e,n)}))}(this._delegate)).then((function(e){return new eb(t.firestore,new vk(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter($k.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new nu("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new Wm(n._delegate,r,new xu(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new Wm(n._delegate,r,t))}}]),e}();function Zk(e,t,n){return e.message=e.message.replace(t,n),e}function Xk(e){var t,n=se(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!qk(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function Jk(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=qk(e[0])?e[0]:qk(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var eb=function(){function e(t,n){ie(this,e),this._firestore=t,this._delegate=n}return ue(e,[{key:"ref",get:function(){return new Yk(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return gk(this._delegate,e._delegate)}}]),e}(),tb=function(e){fe(n,e);var t=ve(n);function n(){return ie(this,n),t.apply(this,arguments)}return ue(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return void 0!==t||Xo(),t}}]),n}(eb),nb=function(){function e(t,n){ie(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new Qk(t)}return ue(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,Hg(this._delegate,function(e,t,n){var r=t,i=Kg("where",e);return $g._create(i,r,n)}(t,n,r)))}catch(i){throw Zk(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,Hg(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Kg("orderBy",e);return Zg._create(n,t)}(t,n)))}catch(r){throw Zk(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,Hg(this._delegate,(jm("limit",n=t),Xg._create("limit",n,"F"))))}catch(n){throw Zk(n,"limit()","Query.limit()")}var n}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,Hg(this._delegate,(jm("limitToLast",n=t),Xg._create("limitToLast",n,"L"))))}catch(n){throw Zk(n,"limitToLast()","Query.limitToLast()")}var n}},{key:"startAt",value:function(){try{return new e(this.firestore,Hg(this._delegate,ek.apply(void 0,arguments)))}catch(t){throw Zk(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,Hg(this._delegate,tk.apply(void 0,arguments)))}catch(t){throw Zk(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,Hg(this._delegate,rk.apply(void 0,arguments)))}catch(t){throw Zk(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,Hg(this._delegate,ik.apply(void 0,arguments)))}catch(t){throw Zk(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return Xm(this._delegate,e._delegate)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?_k(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?xk(this._delegate):wk(this._delegate)).then((function(e){return new ib(t.firestore,new yk(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=Xk(n),a=Jk(n,(function(t){return new ib(e.firestore,new yk(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return Ik(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter($k.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),rb=function(){function e(t,n){ie(this,e),this._firestore=t,this._delegate=n}return ue(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new tb(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),ib=function(){function e(t,n){ie(this,e),this._firestore=t,this._delegate=n}return ue(e,[{key:"query",get:function(){return new nb(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new tb(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new rb(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new tb(n._firestore,r))}))}},{key:"isEqual",value:function(e){return gk(this._delegate,e._delegate)}}]),e}(),ab=function(e){fe(n,e);var t=ve(n);function n(e,r){var i;return ie(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return ue(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new Yk(this.firestore,e):null}},{key:"doc",value:function(e){try{return new Yk(this.firestore,void 0===e?Ym(this._delegate):Ym(this._delegate,e))}catch(t){throw Zk(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=Bm(e.firestore,ng),r=Ym(e),i=fk(e.converter,t);return Ck(n,[xg(_g(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Ql.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new Yk(t.firestore,e)}))}},{key:"isEqual",value:function(e){return Zm(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter($k.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(nb);function ob(e){return Bm(e,Wm)}var ub,sb=function(){function e(){ie(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=pe(dg,n)}return ue(e,[{key:"isEqual",value:function(e){return(e=Ue(e))instanceof dg&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(_u.keyField().canonicalString())}}]),e}(),cb=function(){function e(t){ie(this,e),this._delegate=t}return ue(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new Ig("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new Sg("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=Lk.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=Mk.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=new Ng("increment",t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),lb={Firestore:Gk,GeoPoint:pg,Timestamp:mu,Blob:jk,Transaction:Wk,WriteBatch:Hk,DocumentReference:Yk,DocumentSnapshot:eb,Query:nb,QueryDocumentSnapshot:tb,QuerySnapshot:ib,CollectionReference:ab,FieldPath:sb,FieldValue:cb,setLogLevel:function(e){var t;t=e,Qo.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(e,t){e.INTERNAL.registerComponent(new Be("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},lb)))})(ub=gn,(function(e,t){return new Gk(e,t,new Kk)})),ub.registerVersion(Fk,Vk);gn.initializeApp({apiKey:"AIzaSyAcrchKlZtcD4MrVQ0SV_BGybm2zfZDWMc",authDomain:"noteapp-c32a1.firebaseapp.com",projectId:"noteapp-c32a1",storageBucket:"noteapp-c32a1.appspot.com",messagingSenderId:"198223412447",appId:"1:198223412447:web:fdae2f2d432493ca763d6a"});var fb=gn.firestore(),hb="ADD_NOTE",db="LOAD_NOTES",vb="SET_LOADER",pb=function(){return function(){var e=re(te().mark((function e(t){var n,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:vb}),e.next=4,fb.collection("notes").get();case 4:n=e.sent,r=n.docs.map((function(e){return e.data()})),t({type:db,payload:r}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},yb=n(417),mb=Q(null,{toggle_note:function(e){return function(){var t=re(te().mark((function t(n){var r,i;return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:vb}),r=fb.collection("notes").doc(e.toString()),t.next=5,r.get();case 5:return i=t.sent.data(),console.log(r),t.next=9,r.update({isImportant:!i.isImportant});case 9:n(pb()),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),console.log(t.t0.message);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.note,n=t.date,r=t.note,i=t.id,a=t.isImportant,o=e.toggle_note;return(0,yb.jsxs)("div",{className:"card",style:{paddingBottom:"10px"},children:[(0,yb.jsx)("div",{className:"card_header",children:n}),(0,yb.jsx)("div",{className:"card_body",children:r}),(0,yb.jsx)("button",{className:"importent",onClick:function(){return o(i)},children:a?"Remove Note":"Add Note"})]})})),gb=function(){var e=k((function(e){var t;return null===(t=e.Note_Reducer)||void 0===t?void 0:t.notes})),t=$();return console.log(t.getState()),(0,yb.jsxs)("div",{className:"allNotes",children:[(0,yb.jsx)("h3",{children:"All Notes"}),(0,yb.jsx)("div",{className:"note_container",children:e.map((function(e){return(0,yb.jsx)(mb,{note:e},e.id)}))})]})},kb=function(){var e=_((0,t.useState)(""),2),n=e[0],r=e[1],i=J();return(0,yb.jsx)("div",{className:"createnotes",children:(0,yb.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t={note:n,date:(new Date).toJSON().slice(0,10),id:Math.floor(1e3*Math.random()),isImportant:!1};i(function(e){return function(){var t=re(te().mark((function t(n){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:vb}),t.next=4,fb.collection("notes").doc(e.id.toString()).set(e);case 4:n({type:hb,payload:e}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0.message);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}(t)),r("")},children:[(0,yb.jsx)("textarea",{id:"textarea",value:n,onChange:function(e){return r(e.target.value)},placeholder:"Write Your dream note..."}),(0,yb.jsx)("button",{type:"submit",children:"Add Notes"})]})})},bb=Q((function(e){return{notes:e.Note_Reducer.notes}}))((function(e){var t=e.notes;return(0,yb.jsxs)("div",{style:{padding:"0px 10px"},children:[(0,yb.jsx)("h4",{style:{fontSize:"22px",fontWeight:"400",color:"#969696",letterSpacing:"1px",margin:"10px 0px"},children:"Importent Notes"}),(0,yb.jsx)("div",{className:"importent_notes_container",style:{paddingBottom:"20px",display:"flex",justifyContent:"space-between",flexWrap:"wrap"},children:t.filter((function(e){return!0===e.isImportant})).map((function(e){return(0,yb.jsx)(mb,{note:e},e.id)}))})]})})),wb=n(38),_b=n(350),xb={notes:[],loading:!1};function Sb(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"===typeof i?i(n,r,e):t(i)}}}}var Eb=Sb();Eb.withExtraArgument=Sb;var Ib=Eb,Tb=(0,wb.UY)({Note_Reducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xb,t=arguments.length>1?arguments[1]:void 0,n=t.payload;switch(t.type){case vb:return(0,tt.Z)((0,tt.Z)({},e),{},{loading:!0});case hb:return(0,tt.Z)((0,tt.Z)({},e),{},{loading:!1,notes:[].concat(x(e.notes),[n])});case db:return(0,tt.Z)((0,tt.Z)({},e),{},{loading:!1,notes:n});default:return e}}}),Cb=[Ib],Nb=(0,wb.MT)(Tb,(0,_b.Uo)(wb.md.apply(void 0,Cb))),Db=function(){var e=k((function(e){var t;return null===(t=e.Note_Reducer)||void 0===t?void 0:t.loading}));return(0,t.useEffect)((function(){Nb.dispatch(pb())}),[]),(0,yb.jsxs)("div",{className:"container",children:[(0,yb.jsx)(kb,{}),e&&(0,yb.jsx)("div",{id:"outer",children:(0,yb.jsx)("div",{id:"middle",children:(0,yb.jsx)("div",{id:"inner"})})}),(0,yb.jsx)("hr",{}),(0,yb.jsx)(bb,{}),(0,yb.jsx)("hr",{}),(0,yb.jsx)(gb,{})]})};r.createRoot(document.getElementById("root")).render((0,yb.jsx)(W,{store:Nb,children:(0,yb.jsx)(Db,{})}))}()}();